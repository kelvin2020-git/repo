"use strict";
/*
 * ATTENTION: An "eval-source-map" devtool has been used.
 * This devtool is neither made for production nor for readable output files.
 * It uses "eval()" calls to create a separate source file with attached SourceMaps in the browser devtools.
 * If you are trying to read the output file, select a different devtool (https://webpack.js.org/configuration/devtool/)
 * or disable the default devtool with "devtool: false".
 * If you are looking for production-ready output files, see mode: "production" (https://webpack.js.org/configuration/mode/).
 */
self["webpackHotUpdate_N_E"]("pages/Login",{

/***/ "./node_modules/@firebase/auth-compat/dist/index.esm2017.js":
/*!******************************************************************!*\
  !*** ./node_modules/@firebase/auth-compat/dist/index.esm2017.js ***!
  \******************************************************************/
/***/ (function(__unused_webpack_module, __webpack_exports__, __webpack_require__) {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony import */ var _firebase_app_compat__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! @firebase/app-compat */ \"./node_modules/@firebase/app-compat/dist/esm/index.esm2017.js\");\n/* harmony import */ var _firebase_auth_internal__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! @firebase/auth/internal */ \"./node_modules/@firebase/auth/dist/esm2017/internal.js\");\n/* harmony import */ var _firebase_component__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! @firebase/component */ \"./node_modules/@firebase/component/dist/esm/index.esm2017.js\");\n/* harmony import */ var _firebase_util__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! @firebase/util */ \"./node_modules/@firebase/util/dist/index.esm2017.js\");\n\n\n\n\n\nvar name = \"@firebase/auth-compat\";\nvar version = \"0.2.16\";\n\n/**\r\n * @license\r\n * Copyright 2020 Google LLC\r\n *\r\n * Licensed under the Apache License, Version 2.0 (the \"License\");\r\n * you may not use this file except in compliance with the License.\r\n * You may obtain a copy of the License at\r\n *\r\n *   http://www.apache.org/licenses/LICENSE-2.0\r\n *\r\n * Unless required by applicable law or agreed to in writing, software\r\n * distributed under the License is distributed on an \"AS IS\" BASIS,\r\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\r\n * See the License for the specific language governing permissions and\r\n * limitations under the License.\r\n */\r\nconst CORDOVA_ONDEVICEREADY_TIMEOUT_MS = 1000;\r\nfunction _getCurrentScheme() {\r\n    var _a;\r\n    return ((_a = self === null || self === void 0 ? void 0 : self.location) === null || _a === void 0 ? void 0 : _a.protocol) || null;\r\n}\r\n/**\r\n * @return {boolean} Whether the current environment is http or https.\r\n */\r\nfunction _isHttpOrHttps() {\r\n    return _getCurrentScheme() === 'http:' || _getCurrentScheme() === 'https:';\r\n}\r\n/**\r\n * @param {?string=} ua The user agent.\r\n * @return {boolean} Whether the app is rendered in a mobile iOS or Android\r\n *     Cordova environment.\r\n */\r\nfunction _isAndroidOrIosCordovaScheme(ua = (0,_firebase_util__WEBPACK_IMPORTED_MODULE_3__.getUA)()) {\r\n    return !!((_getCurrentScheme() === 'file:' ||\r\n        _getCurrentScheme() === 'ionic:' ||\r\n        _getCurrentScheme() === 'capacitor:') &&\r\n        ua.toLowerCase().match(/iphone|ipad|ipod|android/));\r\n}\r\n/**\r\n * @return {boolean} Whether the environment is a native environment, where\r\n *     CORS checks do not apply.\r\n */\r\nfunction _isNativeEnvironment() {\r\n    return (0,_firebase_util__WEBPACK_IMPORTED_MODULE_3__.isReactNative)() || (0,_firebase_util__WEBPACK_IMPORTED_MODULE_3__.isNode)();\r\n}\r\n/**\r\n * Checks whether the user agent is IE11.\r\n * @return {boolean} True if it is IE11.\r\n */\r\nfunction _isIe11() {\r\n    return (0,_firebase_util__WEBPACK_IMPORTED_MODULE_3__.isIE)() && (document === null || document === void 0 ? void 0 : document.documentMode) === 11;\r\n}\r\n/**\r\n * Checks whether the user agent is Edge.\r\n * @param {string} userAgent The browser user agent string.\r\n * @return {boolean} True if it is Edge.\r\n */\r\nfunction _isEdge(ua = (0,_firebase_util__WEBPACK_IMPORTED_MODULE_3__.getUA)()) {\r\n    return /Edge\\/\\d+/.test(ua);\r\n}\r\n/**\r\n * @param {?string=} opt_userAgent The navigator user agent.\r\n * @return {boolean} Whether local storage is not synchronized between an iframe\r\n *     and a popup of the same domain.\r\n */\r\nfunction _isLocalStorageNotSynchronized(ua = (0,_firebase_util__WEBPACK_IMPORTED_MODULE_3__.getUA)()) {\r\n    return _isIe11() || _isEdge(ua);\r\n}\r\n/** @return {boolean} Whether web storage is supported. */\r\nfunction _isWebStorageSupported() {\r\n    try {\r\n        const storage = self.localStorage;\r\n        const key = _firebase_auth_internal__WEBPACK_IMPORTED_MODULE_1__._generateEventId();\r\n        if (storage) {\r\n            // setItem will throw an exception if we cannot access WebStorage (e.g.,\r\n            // Safari in private mode).\r\n            storage['setItem'](key, '1');\r\n            storage['removeItem'](key);\r\n            // For browsers where iframe web storage does not synchronize with a popup\r\n            // of the same domain, indexedDB is used for persistent storage. These\r\n            // browsers include IE11 and Edge.\r\n            // Make sure it is supported (IE11 and Edge private mode does not support\r\n            // that).\r\n            if (_isLocalStorageNotSynchronized()) {\r\n                // In such browsers, if indexedDB is not supported, an iframe cannot be\r\n                // notified of the popup sign in result.\r\n                return (0,_firebase_util__WEBPACK_IMPORTED_MODULE_3__.isIndexedDBAvailable)();\r\n            }\r\n            return true;\r\n        }\r\n    }\r\n    catch (e) {\r\n        // localStorage is not available from a worker. Test availability of\r\n        // indexedDB.\r\n        return _isWorker() && (0,_firebase_util__WEBPACK_IMPORTED_MODULE_3__.isIndexedDBAvailable)();\r\n    }\r\n    return false;\r\n}\r\n/**\r\n * @param {?Object=} global The optional global scope.\r\n * @return {boolean} Whether current environment is a worker.\r\n */\r\nfunction _isWorker() {\r\n    // WorkerGlobalScope only defined in worker environment.\r\n    return (typeof __webpack_require__.g !== 'undefined' &&\r\n        'WorkerGlobalScope' in __webpack_require__.g &&\r\n        'importScripts' in __webpack_require__.g);\r\n}\r\nfunction _isPopupRedirectSupported() {\r\n    return ((_isHttpOrHttps() ||\r\n        (0,_firebase_util__WEBPACK_IMPORTED_MODULE_3__.isBrowserExtension)() ||\r\n        _isAndroidOrIosCordovaScheme()) &&\r\n        // React Native with remote debugging reports its location.protocol as\r\n        // http.\r\n        !_isNativeEnvironment() &&\r\n        // Local storage has to be supported for browser popup and redirect\r\n        // operations to work.\r\n        _isWebStorageSupported() &&\r\n        // DOM, popups and redirects are not supported within a worker.\r\n        !_isWorker());\r\n}\r\n/** Quick check that indicates the platform *may* be Cordova */\r\nfunction _isLikelyCordova() {\r\n    return _isAndroidOrIosCordovaScheme() && typeof document !== 'undefined';\r\n}\r\nasync function _isCordova() {\r\n    if (!_isLikelyCordova()) {\r\n        return false;\r\n    }\r\n    return new Promise(resolve => {\r\n        const timeoutId = setTimeout(() => {\r\n            // We've waited long enough; the telltale Cordova event didn't happen\r\n            resolve(false);\r\n        }, CORDOVA_ONDEVICEREADY_TIMEOUT_MS);\r\n        document.addEventListener('deviceready', () => {\r\n            clearTimeout(timeoutId);\r\n            resolve(true);\r\n        });\r\n    });\r\n}\r\nfunction _getSelfWindow() {\r\n    return typeof window !== 'undefined' ? window : null;\r\n}\n\n/**\r\n * @license\r\n * Copyright 2020 Google LLC\r\n *\r\n * Licensed under the Apache License, Version 2.0 (the \"License\");\r\n * you may not use this file except in compliance with the License.\r\n * You may obtain a copy of the License at\r\n *\r\n *   http://www.apache.org/licenses/LICENSE-2.0\r\n *\r\n * Unless required by applicable law or agreed to in writing, software\r\n * distributed under the License is distributed on an \"AS IS\" BASIS,\r\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\r\n * See the License for the specific language governing permissions and\r\n * limitations under the License.\r\n */\r\nconst Persistence = {\r\n    LOCAL: 'local',\r\n    NONE: 'none',\r\n    SESSION: 'session'\r\n};\r\nconst _assert$3 = _firebase_auth_internal__WEBPACK_IMPORTED_MODULE_1__._assert;\r\nconst PERSISTENCE_KEY = 'persistence';\r\n/**\r\n * Validates that an argument is a valid persistence value. If an invalid type\r\n * is specified, an error is thrown synchronously.\r\n */\r\nfunction _validatePersistenceArgument(auth, persistence) {\r\n    _assert$3(Object.values(Persistence).includes(persistence), auth, \"invalid-persistence-type\" /* INVALID_PERSISTENCE */);\r\n    // Validate if the specified type is supported in the current environment.\r\n    if ((0,_firebase_util__WEBPACK_IMPORTED_MODULE_3__.isReactNative)()) {\r\n        // This is only supported in a browser.\r\n        _assert$3(persistence !== Persistence.SESSION, auth, \"unsupported-persistence-type\" /* UNSUPPORTED_PERSISTENCE */);\r\n        return;\r\n    }\r\n    if ((0,_firebase_util__WEBPACK_IMPORTED_MODULE_3__.isNode)()) {\r\n        // Only none is supported in Node.js.\r\n        _assert$3(persistence === Persistence.NONE, auth, \"unsupported-persistence-type\" /* UNSUPPORTED_PERSISTENCE */);\r\n        return;\r\n    }\r\n    if (_isWorker()) {\r\n        // In a worker environment, either LOCAL or NONE are supported.\r\n        // If indexedDB not supported and LOCAL provided, throw an error\r\n        _assert$3(persistence === Persistence.NONE ||\r\n            (persistence === Persistence.LOCAL && (0,_firebase_util__WEBPACK_IMPORTED_MODULE_3__.isIndexedDBAvailable)()), auth, \"unsupported-persistence-type\" /* UNSUPPORTED_PERSISTENCE */);\r\n        return;\r\n    }\r\n    // This is restricted by what the browser supports.\r\n    _assert$3(persistence === Persistence.NONE || _isWebStorageSupported(), auth, \"unsupported-persistence-type\" /* UNSUPPORTED_PERSISTENCE */);\r\n}\r\nasync function _savePersistenceForRedirect(auth) {\r\n    await auth._initializationPromise;\r\n    const session = getSessionStorageIfAvailable();\r\n    const key = _firebase_auth_internal__WEBPACK_IMPORTED_MODULE_1__._persistenceKeyName(PERSISTENCE_KEY, auth.config.apiKey, auth.name);\r\n    if (session) {\r\n        session.setItem(key, auth._getPersistence());\r\n    }\r\n}\r\nfunction _getPersistencesFromRedirect(apiKey, appName) {\r\n    const session = getSessionStorageIfAvailable();\r\n    if (!session) {\r\n        return [];\r\n    }\r\n    const key = _firebase_auth_internal__WEBPACK_IMPORTED_MODULE_1__._persistenceKeyName(PERSISTENCE_KEY, apiKey, appName);\r\n    const persistence = session.getItem(key);\r\n    switch (persistence) {\r\n        case Persistence.NONE:\r\n            return [_firebase_auth_internal__WEBPACK_IMPORTED_MODULE_1__.inMemoryPersistence];\r\n        case Persistence.LOCAL:\r\n            return [_firebase_auth_internal__WEBPACK_IMPORTED_MODULE_1__.indexedDBLocalPersistence, _firebase_auth_internal__WEBPACK_IMPORTED_MODULE_1__.browserSessionPersistence];\r\n        case Persistence.SESSION:\r\n            return [_firebase_auth_internal__WEBPACK_IMPORTED_MODULE_1__.browserSessionPersistence];\r\n        default:\r\n            return [];\r\n    }\r\n}\r\n/** Returns session storage, or null if the property access errors */\r\nfunction getSessionStorageIfAvailable() {\r\n    var _a;\r\n    try {\r\n        return ((_a = _getSelfWindow()) === null || _a === void 0 ? void 0 : _a.sessionStorage) || null;\r\n    }\r\n    catch (e) {\r\n        return null;\r\n    }\r\n}\n\n/**\r\n * @license\r\n * Copyright 2020 Google LLC\r\n *\r\n * Licensed under the Apache License, Version 2.0 (the \"License\");\r\n * you may not use this file except in compliance with the License.\r\n * You may obtain a copy of the License at\r\n *\r\n *   http://www.apache.org/licenses/LICENSE-2.0\r\n *\r\n * Unless required by applicable law or agreed to in writing, software\r\n * distributed under the License is distributed on an \"AS IS\" BASIS,\r\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\r\n * See the License for the specific language governing permissions and\r\n * limitations under the License.\r\n */\r\nconst _assert$2 = _firebase_auth_internal__WEBPACK_IMPORTED_MODULE_1__._assert;\r\n/** Platform-agnostic popup-redirect resolver */\r\nclass CompatPopupRedirectResolver {\r\n    constructor() {\r\n        // Create both resolvers for dynamic resolution later\r\n        this.browserResolver = _firebase_auth_internal__WEBPACK_IMPORTED_MODULE_1__._getInstance(_firebase_auth_internal__WEBPACK_IMPORTED_MODULE_1__.browserPopupRedirectResolver);\r\n        this.cordovaResolver = _firebase_auth_internal__WEBPACK_IMPORTED_MODULE_1__._getInstance(_firebase_auth_internal__WEBPACK_IMPORTED_MODULE_1__.cordovaPopupRedirectResolver);\r\n        // The actual resolver in use: either browserResolver or cordovaResolver.\r\n        this.underlyingResolver = null;\r\n        this._redirectPersistence = _firebase_auth_internal__WEBPACK_IMPORTED_MODULE_1__.browserSessionPersistence;\r\n        this._completeRedirectFn = _firebase_auth_internal__WEBPACK_IMPORTED_MODULE_1__._getRedirectResult;\r\n        this._overrideRedirectResult = _firebase_auth_internal__WEBPACK_IMPORTED_MODULE_1__._overrideRedirectResult;\r\n    }\r\n    async _initialize(auth) {\r\n        await this.selectUnderlyingResolver();\r\n        return this.assertedUnderlyingResolver._initialize(auth);\r\n    }\r\n    async _openPopup(auth, provider, authType, eventId) {\r\n        await this.selectUnderlyingResolver();\r\n        return this.assertedUnderlyingResolver._openPopup(auth, provider, authType, eventId);\r\n    }\r\n    async _openRedirect(auth, provider, authType, eventId) {\r\n        await this.selectUnderlyingResolver();\r\n        return this.assertedUnderlyingResolver._openRedirect(auth, provider, authType, eventId);\r\n    }\r\n    _isIframeWebStorageSupported(auth, cb) {\r\n        this.assertedUnderlyingResolver._isIframeWebStorageSupported(auth, cb);\r\n    }\r\n    _originValidation(auth) {\r\n        return this.assertedUnderlyingResolver._originValidation(auth);\r\n    }\r\n    get _shouldInitProactively() {\r\n        return _isLikelyCordova() || this.browserResolver._shouldInitProactively;\r\n    }\r\n    get assertedUnderlyingResolver() {\r\n        _assert$2(this.underlyingResolver, \"internal-error\" /* INTERNAL_ERROR */);\r\n        return this.underlyingResolver;\r\n    }\r\n    async selectUnderlyingResolver() {\r\n        if (this.underlyingResolver) {\r\n            return;\r\n        }\r\n        // We haven't yet determined whether or not we're in Cordova; go ahead\r\n        // and determine that state now.\r\n        const isCordova = await _isCordova();\r\n        this.underlyingResolver = isCordova\r\n            ? this.cordovaResolver\r\n            : this.browserResolver;\r\n    }\r\n}\n\n/**\r\n * @license\r\n * Copyright 2020 Google LLC\r\n *\r\n * Licensed under the Apache License, Version 2.0 (the \"License\");\r\n * you may not use this file except in compliance with the License.\r\n * You may obtain a copy of the License at\r\n *\r\n *   http://www.apache.org/licenses/LICENSE-2.0\r\n *\r\n * Unless required by applicable law or agreed to in writing, software\r\n * distributed under the License is distributed on an \"AS IS\" BASIS,\r\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\r\n * See the License for the specific language governing permissions and\r\n * limitations under the License.\r\n */\r\nfunction unwrap(object) {\r\n    return object.unwrap();\r\n}\r\nfunction wrapped(object) {\r\n    return object.wrapped();\r\n}\n\n/**\r\n * @license\r\n * Copyright 2020 Google LLC\r\n *\r\n * Licensed under the Apache License, Version 2.0 (the \"License\");\r\n * you may not use this file except in compliance with the License.\r\n * You may obtain a copy of the License at\r\n *\r\n *   http://www.apache.org/licenses/LICENSE-2.0\r\n *\r\n * Unless required by applicable law or agreed to in writing, software\r\n * distributed under the License is distributed on an \"AS IS\" BASIS,\r\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\r\n * See the License for the specific language governing permissions and\r\n * limitations under the License.\r\n */\r\nfunction credentialFromResponse(userCredential) {\r\n    return credentialFromObject(userCredential);\r\n}\r\nfunction attachExtraErrorFields(auth, e) {\r\n    var _a;\r\n    // The response contains all fields from the server which may or may not\r\n    // actually match the underlying type\r\n    const response = (_a = e.customData) === null || _a === void 0 ? void 0 : _a._tokenResponse;\r\n    if (e.code === 'auth/multi-factor-auth-required') {\r\n        const mfaErr = e;\r\n        mfaErr.resolver = new MultiFactorResolver(auth, _firebase_auth_internal__WEBPACK_IMPORTED_MODULE_1__.getMultiFactorResolver(auth, e));\r\n    }\r\n    else if (response) {\r\n        const credential = credentialFromObject(e);\r\n        const credErr = e;\r\n        if (credential) {\r\n            credErr.credential = credential;\r\n            credErr.tenantId = response.tenantId || undefined;\r\n            credErr.email = response.email || undefined;\r\n            credErr.phoneNumber = response.phoneNumber || undefined;\r\n        }\r\n    }\r\n}\r\nfunction credentialFromObject(object) {\r\n    const { _tokenResponse } = (object instanceof _firebase_util__WEBPACK_IMPORTED_MODULE_3__.FirebaseError ? object.customData : object);\r\n    if (!_tokenResponse) {\r\n        return null;\r\n    }\r\n    // Handle phone Auth credential responses, as they have a different format\r\n    // from other backend responses (i.e. no providerId). This is also only the\r\n    // case for user credentials (does not work for errors).\r\n    if (!(object instanceof _firebase_util__WEBPACK_IMPORTED_MODULE_3__.FirebaseError)) {\r\n        if ('temporaryProof' in _tokenResponse && 'phoneNumber' in _tokenResponse) {\r\n            return _firebase_auth_internal__WEBPACK_IMPORTED_MODULE_1__.PhoneAuthProvider.credentialFromResult(object);\r\n        }\r\n    }\r\n    const providerId = _tokenResponse.providerId;\r\n    // Email and password is not supported as there is no situation where the\r\n    // server would return the password to the client.\r\n    if (!providerId || providerId === _firebase_auth_internal__WEBPACK_IMPORTED_MODULE_1__.ProviderId.PASSWORD) {\r\n        return null;\r\n    }\r\n    let provider;\r\n    switch (providerId) {\r\n        case _firebase_auth_internal__WEBPACK_IMPORTED_MODULE_1__.ProviderId.GOOGLE:\r\n            provider = _firebase_auth_internal__WEBPACK_IMPORTED_MODULE_1__.GoogleAuthProvider;\r\n            break;\r\n        case _firebase_auth_internal__WEBPACK_IMPORTED_MODULE_1__.ProviderId.FACEBOOK:\r\n            provider = _firebase_auth_internal__WEBPACK_IMPORTED_MODULE_1__.FacebookAuthProvider;\r\n            break;\r\n        case _firebase_auth_internal__WEBPACK_IMPORTED_MODULE_1__.ProviderId.GITHUB:\r\n            provider = _firebase_auth_internal__WEBPACK_IMPORTED_MODULE_1__.GithubAuthProvider;\r\n            break;\r\n        case _firebase_auth_internal__WEBPACK_IMPORTED_MODULE_1__.ProviderId.TWITTER:\r\n            provider = _firebase_auth_internal__WEBPACK_IMPORTED_MODULE_1__.TwitterAuthProvider;\r\n            break;\r\n        default:\r\n            const { oauthIdToken, oauthAccessToken, oauthTokenSecret, pendingToken, nonce } = _tokenResponse;\r\n            if (!oauthAccessToken &&\r\n                !oauthTokenSecret &&\r\n                !oauthIdToken &&\r\n                !pendingToken) {\r\n                return null;\r\n            }\r\n            // TODO(avolkovi): uncomment this and get it working with SAML & OIDC\r\n            if (pendingToken) {\r\n                if (providerId.startsWith('saml.')) {\r\n                    return _firebase_auth_internal__WEBPACK_IMPORTED_MODULE_1__.SAMLAuthCredential._create(providerId, pendingToken);\r\n                }\r\n                else {\r\n                    // OIDC and non-default providers excluding Twitter.\r\n                    return _firebase_auth_internal__WEBPACK_IMPORTED_MODULE_1__.OAuthCredential._fromParams({\r\n                        providerId,\r\n                        signInMethod: providerId,\r\n                        pendingToken,\r\n                        idToken: oauthIdToken,\r\n                        accessToken: oauthAccessToken\r\n                    });\r\n                }\r\n            }\r\n            return new _firebase_auth_internal__WEBPACK_IMPORTED_MODULE_1__.OAuthProvider(providerId).credential({\r\n                idToken: oauthIdToken,\r\n                accessToken: oauthAccessToken,\r\n                rawNonce: nonce\r\n            });\r\n    }\r\n    return object instanceof _firebase_util__WEBPACK_IMPORTED_MODULE_3__.FirebaseError\r\n        ? provider.credentialFromError(object)\r\n        : provider.credentialFromResult(object);\r\n}\r\nfunction convertCredential(auth, credentialPromise) {\r\n    return credentialPromise\r\n        .catch(e => {\r\n        if (e instanceof _firebase_util__WEBPACK_IMPORTED_MODULE_3__.FirebaseError) {\r\n            attachExtraErrorFields(auth, e);\r\n        }\r\n        throw e;\r\n    })\r\n        .then(credential => {\r\n        const operationType = credential.operationType;\r\n        const user = credential.user;\r\n        return {\r\n            operationType,\r\n            credential: credentialFromResponse(credential),\r\n            additionalUserInfo: _firebase_auth_internal__WEBPACK_IMPORTED_MODULE_1__.getAdditionalUserInfo(credential),\r\n            user: User.getOrCreate(user)\r\n        };\r\n    });\r\n}\r\nasync function convertConfirmationResult(auth, confirmationResultPromise) {\r\n    const confirmationResultExp = await confirmationResultPromise;\r\n    return {\r\n        verificationId: confirmationResultExp.verificationId,\r\n        confirm: (verificationCode) => convertCredential(auth, confirmationResultExp.confirm(verificationCode))\r\n    };\r\n}\r\nclass MultiFactorResolver {\r\n    constructor(auth, resolver) {\r\n        this.resolver = resolver;\r\n        this.auth = wrapped(auth);\r\n    }\r\n    get session() {\r\n        return this.resolver.session;\r\n    }\r\n    get hints() {\r\n        return this.resolver.hints;\r\n    }\r\n    resolveSignIn(assertion) {\r\n        return convertCredential(unwrap(this.auth), this.resolver.resolveSignIn(assertion));\r\n    }\r\n}\n\n/**\r\n * @license\r\n * Copyright 2020 Google LLC\r\n *\r\n * Licensed under the Apache License, Version 2.0 (the \"License\");\r\n * you may not use this file except in compliance with the License.\r\n * You may obtain a copy of the License at\r\n *\r\n *   http://www.apache.org/licenses/LICENSE-2.0\r\n *\r\n * Unless required by applicable law or agreed to in writing, software\r\n * distributed under the License is distributed on an \"AS IS\" BASIS,\r\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\r\n * See the License for the specific language governing permissions and\r\n * limitations under the License.\r\n */\r\nclass User {\r\n    constructor(_delegate) {\r\n        this._delegate = _delegate;\r\n        this.multiFactor = _firebase_auth_internal__WEBPACK_IMPORTED_MODULE_1__.multiFactor(_delegate);\r\n    }\r\n    static getOrCreate(user) {\r\n        if (!User.USER_MAP.has(user)) {\r\n            User.USER_MAP.set(user, new User(user));\r\n        }\r\n        return User.USER_MAP.get(user);\r\n    }\r\n    delete() {\r\n        return this._delegate.delete();\r\n    }\r\n    reload() {\r\n        return this._delegate.reload();\r\n    }\r\n    toJSON() {\r\n        return this._delegate.toJSON();\r\n    }\r\n    getIdTokenResult(forceRefresh) {\r\n        return this._delegate.getIdTokenResult(forceRefresh);\r\n    }\r\n    getIdToken(forceRefresh) {\r\n        return this._delegate.getIdToken(forceRefresh);\r\n    }\r\n    linkAndRetrieveDataWithCredential(credential) {\r\n        return this.linkWithCredential(credential);\r\n    }\r\n    async linkWithCredential(credential) {\r\n        return convertCredential(this.auth, _firebase_auth_internal__WEBPACK_IMPORTED_MODULE_1__.linkWithCredential(this._delegate, credential));\r\n    }\r\n    async linkWithPhoneNumber(phoneNumber, applicationVerifier) {\r\n        return convertConfirmationResult(this.auth, _firebase_auth_internal__WEBPACK_IMPORTED_MODULE_1__.linkWithPhoneNumber(this._delegate, phoneNumber, applicationVerifier));\r\n    }\r\n    async linkWithPopup(provider) {\r\n        return convertCredential(this.auth, _firebase_auth_internal__WEBPACK_IMPORTED_MODULE_1__.linkWithPopup(this._delegate, provider, CompatPopupRedirectResolver));\r\n    }\r\n    async linkWithRedirect(provider) {\r\n        await _savePersistenceForRedirect(_firebase_auth_internal__WEBPACK_IMPORTED_MODULE_1__._castAuth(this.auth));\r\n        return _firebase_auth_internal__WEBPACK_IMPORTED_MODULE_1__.linkWithRedirect(this._delegate, provider, CompatPopupRedirectResolver);\r\n    }\r\n    reauthenticateAndRetrieveDataWithCredential(credential) {\r\n        return this.reauthenticateWithCredential(credential);\r\n    }\r\n    async reauthenticateWithCredential(credential) {\r\n        return convertCredential(this.auth, _firebase_auth_internal__WEBPACK_IMPORTED_MODULE_1__.reauthenticateWithCredential(this._delegate, credential));\r\n    }\r\n    reauthenticateWithPhoneNumber(phoneNumber, applicationVerifier) {\r\n        return convertConfirmationResult(this.auth, _firebase_auth_internal__WEBPACK_IMPORTED_MODULE_1__.reauthenticateWithPhoneNumber(this._delegate, phoneNumber, applicationVerifier));\r\n    }\r\n    reauthenticateWithPopup(provider) {\r\n        return convertCredential(this.auth, _firebase_auth_internal__WEBPACK_IMPORTED_MODULE_1__.reauthenticateWithPopup(this._delegate, provider, CompatPopupRedirectResolver));\r\n    }\r\n    async reauthenticateWithRedirect(provider) {\r\n        await _savePersistenceForRedirect(_firebase_auth_internal__WEBPACK_IMPORTED_MODULE_1__._castAuth(this.auth));\r\n        return _firebase_auth_internal__WEBPACK_IMPORTED_MODULE_1__.reauthenticateWithRedirect(this._delegate, provider, CompatPopupRedirectResolver);\r\n    }\r\n    sendEmailVerification(actionCodeSettings) {\r\n        return _firebase_auth_internal__WEBPACK_IMPORTED_MODULE_1__.sendEmailVerification(this._delegate, actionCodeSettings);\r\n    }\r\n    async unlink(providerId) {\r\n        await _firebase_auth_internal__WEBPACK_IMPORTED_MODULE_1__.unlink(this._delegate, providerId);\r\n        return this;\r\n    }\r\n    updateEmail(newEmail) {\r\n        return _firebase_auth_internal__WEBPACK_IMPORTED_MODULE_1__.updateEmail(this._delegate, newEmail);\r\n    }\r\n    updatePassword(newPassword) {\r\n        return _firebase_auth_internal__WEBPACK_IMPORTED_MODULE_1__.updatePassword(this._delegate, newPassword);\r\n    }\r\n    updatePhoneNumber(phoneCredential) {\r\n        return _firebase_auth_internal__WEBPACK_IMPORTED_MODULE_1__.updatePhoneNumber(this._delegate, phoneCredential);\r\n    }\r\n    updateProfile(profile) {\r\n        return _firebase_auth_internal__WEBPACK_IMPORTED_MODULE_1__.updateProfile(this._delegate, profile);\r\n    }\r\n    verifyBeforeUpdateEmail(newEmail, actionCodeSettings) {\r\n        return _firebase_auth_internal__WEBPACK_IMPORTED_MODULE_1__.verifyBeforeUpdateEmail(this._delegate, newEmail, actionCodeSettings);\r\n    }\r\n    get emailVerified() {\r\n        return this._delegate.emailVerified;\r\n    }\r\n    get isAnonymous() {\r\n        return this._delegate.isAnonymous;\r\n    }\r\n    get metadata() {\r\n        return this._delegate.metadata;\r\n    }\r\n    get phoneNumber() {\r\n        return this._delegate.phoneNumber;\r\n    }\r\n    get providerData() {\r\n        return this._delegate.providerData;\r\n    }\r\n    get refreshToken() {\r\n        return this._delegate.refreshToken;\r\n    }\r\n    get tenantId() {\r\n        return this._delegate.tenantId;\r\n    }\r\n    get displayName() {\r\n        return this._delegate.displayName;\r\n    }\r\n    get email() {\r\n        return this._delegate.email;\r\n    }\r\n    get photoURL() {\r\n        return this._delegate.photoURL;\r\n    }\r\n    get providerId() {\r\n        return this._delegate.providerId;\r\n    }\r\n    get uid() {\r\n        return this._delegate.uid;\r\n    }\r\n    get auth() {\r\n        return this._delegate.auth;\r\n    }\r\n}\r\n// Maintain a map so that there's always a 1:1 mapping between new User and\r\n// legacy compat users\r\nUser.USER_MAP = new WeakMap();\n\n/**\r\n * @license\r\n * Copyright 2020 Google LLC\r\n *\r\n * Licensed under the Apache License, Version 2.0 (the \"License\");\r\n * you may not use this file except in compliance with the License.\r\n * You may obtain a copy of the License at\r\n *\r\n *   http://www.apache.org/licenses/LICENSE-2.0\r\n *\r\n * Unless required by applicable law or agreed to in writing, software\r\n * distributed under the License is distributed on an \"AS IS\" BASIS,\r\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\r\n * See the License for the specific language governing permissions and\r\n * limitations under the License.\r\n */\r\nconst _assert$1 = _firebase_auth_internal__WEBPACK_IMPORTED_MODULE_1__._assert;\r\nclass Auth {\r\n    constructor(app, provider) {\r\n        this.app = app;\r\n        if (provider.isInitialized()) {\r\n            this._delegate = provider.getImmediate();\r\n            this.linkUnderlyingAuth();\r\n            return;\r\n        }\r\n        const { apiKey } = app.options;\r\n        // TODO: platform needs to be determined using heuristics\r\n        _assert$1(apiKey, \"invalid-api-key\" /* INVALID_API_KEY */, {\r\n            appName: app.name\r\n        });\r\n        // TODO: platform needs to be determined using heuristics\r\n        _assert$1(apiKey, \"invalid-api-key\" /* INVALID_API_KEY */, {\r\n            appName: app.name\r\n        });\r\n        // Only use a popup/redirect resolver in browser environments\r\n        const resolver = typeof window !== 'undefined' ? CompatPopupRedirectResolver : undefined;\r\n        this._delegate = provider.initialize({\r\n            options: {\r\n                persistence: buildPersistenceHierarchy(apiKey, app.name),\r\n                popupRedirectResolver: resolver\r\n            }\r\n        });\r\n        this._delegate._updateErrorMap(_firebase_auth_internal__WEBPACK_IMPORTED_MODULE_1__.debugErrorMap);\r\n        this.linkUnderlyingAuth();\r\n    }\r\n    get emulatorConfig() {\r\n        return this._delegate.emulatorConfig;\r\n    }\r\n    get currentUser() {\r\n        if (!this._delegate.currentUser) {\r\n            return null;\r\n        }\r\n        return User.getOrCreate(this._delegate.currentUser);\r\n    }\r\n    get languageCode() {\r\n        return this._delegate.languageCode;\r\n    }\r\n    set languageCode(languageCode) {\r\n        this._delegate.languageCode = languageCode;\r\n    }\r\n    get settings() {\r\n        return this._delegate.settings;\r\n    }\r\n    get tenantId() {\r\n        return this._delegate.tenantId;\r\n    }\r\n    set tenantId(tid) {\r\n        this._delegate.tenantId = tid;\r\n    }\r\n    useDeviceLanguage() {\r\n        this._delegate.useDeviceLanguage();\r\n    }\r\n    signOut() {\r\n        return this._delegate.signOut();\r\n    }\r\n    useEmulator(url, options) {\r\n        _firebase_auth_internal__WEBPACK_IMPORTED_MODULE_1__.connectAuthEmulator(this._delegate, url, options);\r\n    }\r\n    applyActionCode(code) {\r\n        return _firebase_auth_internal__WEBPACK_IMPORTED_MODULE_1__.applyActionCode(this._delegate, code);\r\n    }\r\n    checkActionCode(code) {\r\n        return _firebase_auth_internal__WEBPACK_IMPORTED_MODULE_1__.checkActionCode(this._delegate, code);\r\n    }\r\n    confirmPasswordReset(code, newPassword) {\r\n        return _firebase_auth_internal__WEBPACK_IMPORTED_MODULE_1__.confirmPasswordReset(this._delegate, code, newPassword);\r\n    }\r\n    async createUserWithEmailAndPassword(email, password) {\r\n        return convertCredential(this._delegate, _firebase_auth_internal__WEBPACK_IMPORTED_MODULE_1__.createUserWithEmailAndPassword(this._delegate, email, password));\r\n    }\r\n    fetchProvidersForEmail(email) {\r\n        return this.fetchSignInMethodsForEmail(email);\r\n    }\r\n    fetchSignInMethodsForEmail(email) {\r\n        return _firebase_auth_internal__WEBPACK_IMPORTED_MODULE_1__.fetchSignInMethodsForEmail(this._delegate, email);\r\n    }\r\n    isSignInWithEmailLink(emailLink) {\r\n        return _firebase_auth_internal__WEBPACK_IMPORTED_MODULE_1__.isSignInWithEmailLink(this._delegate, emailLink);\r\n    }\r\n    async getRedirectResult() {\r\n        _assert$1(_isPopupRedirectSupported(), this._delegate, \"operation-not-supported-in-this-environment\" /* OPERATION_NOT_SUPPORTED */);\r\n        const credential = await _firebase_auth_internal__WEBPACK_IMPORTED_MODULE_1__.getRedirectResult(this._delegate, CompatPopupRedirectResolver);\r\n        if (!credential) {\r\n            return {\r\n                credential: null,\r\n                user: null\r\n            };\r\n        }\r\n        return convertCredential(this._delegate, Promise.resolve(credential));\r\n    }\r\n    // This function should only be called by frameworks (e.g. FirebaseUI-web) to log their usage.\r\n    // It is not intended for direct use by developer apps. NO jsdoc here to intentionally leave it\r\n    // out of autogenerated documentation pages to reduce accidental misuse.\r\n    addFrameworkForLogging(framework) {\r\n        _firebase_auth_internal__WEBPACK_IMPORTED_MODULE_1__.addFrameworkForLogging(this._delegate, framework);\r\n    }\r\n    onAuthStateChanged(nextOrObserver, errorFn, completed) {\r\n        const { next, error, complete } = wrapObservers(nextOrObserver, errorFn, completed);\r\n        return this._delegate.onAuthStateChanged(next, error, complete);\r\n    }\r\n    onIdTokenChanged(nextOrObserver, errorFn, completed) {\r\n        const { next, error, complete } = wrapObservers(nextOrObserver, errorFn, completed);\r\n        return this._delegate.onIdTokenChanged(next, error, complete);\r\n    }\r\n    sendSignInLinkToEmail(email, actionCodeSettings) {\r\n        return _firebase_auth_internal__WEBPACK_IMPORTED_MODULE_1__.sendSignInLinkToEmail(this._delegate, email, actionCodeSettings);\r\n    }\r\n    sendPasswordResetEmail(email, actionCodeSettings) {\r\n        return _firebase_auth_internal__WEBPACK_IMPORTED_MODULE_1__.sendPasswordResetEmail(this._delegate, email, actionCodeSettings || undefined);\r\n    }\r\n    async setPersistence(persistence) {\r\n        _validatePersistenceArgument(this._delegate, persistence);\r\n        let converted;\r\n        switch (persistence) {\r\n            case Persistence.SESSION:\r\n                converted = _firebase_auth_internal__WEBPACK_IMPORTED_MODULE_1__.browserSessionPersistence;\r\n                break;\r\n            case Persistence.LOCAL:\r\n                // Not using isIndexedDBAvailable() since it only checks if indexedDB is defined.\r\n                const isIndexedDBFullySupported = await _firebase_auth_internal__WEBPACK_IMPORTED_MODULE_1__._getInstance(_firebase_auth_internal__WEBPACK_IMPORTED_MODULE_1__.indexedDBLocalPersistence)\r\n                    ._isAvailable();\r\n                converted = isIndexedDBFullySupported\r\n                    ? _firebase_auth_internal__WEBPACK_IMPORTED_MODULE_1__.indexedDBLocalPersistence\r\n                    : _firebase_auth_internal__WEBPACK_IMPORTED_MODULE_1__.browserLocalPersistence;\r\n                break;\r\n            case Persistence.NONE:\r\n                converted = _firebase_auth_internal__WEBPACK_IMPORTED_MODULE_1__.inMemoryPersistence;\r\n                break;\r\n            default:\r\n                return _firebase_auth_internal__WEBPACK_IMPORTED_MODULE_1__._fail(\"argument-error\" /* ARGUMENT_ERROR */, {\r\n                    appName: this._delegate.name\r\n                });\r\n        }\r\n        return this._delegate.setPersistence(converted);\r\n    }\r\n    signInAndRetrieveDataWithCredential(credential) {\r\n        return this.signInWithCredential(credential);\r\n    }\r\n    signInAnonymously() {\r\n        return convertCredential(this._delegate, _firebase_auth_internal__WEBPACK_IMPORTED_MODULE_1__.signInAnonymously(this._delegate));\r\n    }\r\n    signInWithCredential(credential) {\r\n        return convertCredential(this._delegate, _firebase_auth_internal__WEBPACK_IMPORTED_MODULE_1__.signInWithCredential(this._delegate, credential));\r\n    }\r\n    signInWithCustomToken(token) {\r\n        return convertCredential(this._delegate, _firebase_auth_internal__WEBPACK_IMPORTED_MODULE_1__.signInWithCustomToken(this._delegate, token));\r\n    }\r\n    signInWithEmailAndPassword(email, password) {\r\n        return convertCredential(this._delegate, _firebase_auth_internal__WEBPACK_IMPORTED_MODULE_1__.signInWithEmailAndPassword(this._delegate, email, password));\r\n    }\r\n    signInWithEmailLink(email, emailLink) {\r\n        return convertCredential(this._delegate, _firebase_auth_internal__WEBPACK_IMPORTED_MODULE_1__.signInWithEmailLink(this._delegate, email, emailLink));\r\n    }\r\n    signInWithPhoneNumber(phoneNumber, applicationVerifier) {\r\n        return convertConfirmationResult(this._delegate, _firebase_auth_internal__WEBPACK_IMPORTED_MODULE_1__.signInWithPhoneNumber(this._delegate, phoneNumber, applicationVerifier));\r\n    }\r\n    async signInWithPopup(provider) {\r\n        _assert$1(_isPopupRedirectSupported(), this._delegate, \"operation-not-supported-in-this-environment\" /* OPERATION_NOT_SUPPORTED */);\r\n        return convertCredential(this._delegate, _firebase_auth_internal__WEBPACK_IMPORTED_MODULE_1__.signInWithPopup(this._delegate, provider, CompatPopupRedirectResolver));\r\n    }\r\n    async signInWithRedirect(provider) {\r\n        _assert$1(_isPopupRedirectSupported(), this._delegate, \"operation-not-supported-in-this-environment\" /* OPERATION_NOT_SUPPORTED */);\r\n        await _savePersistenceForRedirect(this._delegate);\r\n        return _firebase_auth_internal__WEBPACK_IMPORTED_MODULE_1__.signInWithRedirect(this._delegate, provider, CompatPopupRedirectResolver);\r\n    }\r\n    updateCurrentUser(user) {\r\n        // remove ts-ignore once overloads are defined for exp functions to accept compat objects\r\n        // @ts-ignore\r\n        return this._delegate.updateCurrentUser(user);\r\n    }\r\n    verifyPasswordResetCode(code) {\r\n        return _firebase_auth_internal__WEBPACK_IMPORTED_MODULE_1__.verifyPasswordResetCode(this._delegate, code);\r\n    }\r\n    unwrap() {\r\n        return this._delegate;\r\n    }\r\n    _delete() {\r\n        return this._delegate._delete();\r\n    }\r\n    linkUnderlyingAuth() {\r\n        this._delegate.wrapped = () => this;\r\n    }\r\n}\r\nAuth.Persistence = Persistence;\r\nfunction wrapObservers(nextOrObserver, error, complete) {\r\n    let next = nextOrObserver;\r\n    if (typeof nextOrObserver !== 'function') {\r\n        ({ next, error, complete } = nextOrObserver);\r\n    }\r\n    // We know 'next' is now a function\r\n    const oldNext = next;\r\n    const newNext = (user) => oldNext(user && User.getOrCreate(user));\r\n    return {\r\n        next: newNext,\r\n        error: error,\r\n        complete\r\n    };\r\n}\r\nfunction buildPersistenceHierarchy(apiKey, appName) {\r\n    // Note this is slightly different behavior: in this case, the stored\r\n    // persistence is checked *first* rather than last. This is because we want\r\n    // to prefer stored persistence type in the hierarchy. This is an empty\r\n    // array if window is not available or there is no pending redirect\r\n    const persistences = _getPersistencesFromRedirect(apiKey, appName);\r\n    // If \"self\" is available, add indexedDB\r\n    if (typeof self !== 'undefined' &&\r\n        !persistences.includes(_firebase_auth_internal__WEBPACK_IMPORTED_MODULE_1__.indexedDBLocalPersistence)) {\r\n        persistences.push(_firebase_auth_internal__WEBPACK_IMPORTED_MODULE_1__.indexedDBLocalPersistence);\r\n    }\r\n    // If \"window\" is available, add HTML Storage persistences\r\n    if (typeof window !== 'undefined') {\r\n        for (const persistence of [\r\n            _firebase_auth_internal__WEBPACK_IMPORTED_MODULE_1__.browserLocalPersistence,\r\n            _firebase_auth_internal__WEBPACK_IMPORTED_MODULE_1__.browserSessionPersistence\r\n        ]) {\r\n            if (!persistences.includes(persistence)) {\r\n                persistences.push(persistence);\r\n            }\r\n        }\r\n    }\r\n    // Add in-memory as a final fallback\r\n    if (!persistences.includes(_firebase_auth_internal__WEBPACK_IMPORTED_MODULE_1__.inMemoryPersistence)) {\r\n        persistences.push(_firebase_auth_internal__WEBPACK_IMPORTED_MODULE_1__.inMemoryPersistence);\r\n    }\r\n    return persistences;\r\n}\n\n/**\r\n * @license\r\n * Copyright 2020 Google LLC\r\n *\r\n * Licensed under the Apache License, Version 2.0 (the \"License\");\r\n * you may not use this file except in compliance with the License.\r\n * You may obtain a copy of the License at\r\n *\r\n *   http://www.apache.org/licenses/LICENSE-2.0\r\n *\r\n * Unless required by applicable law or agreed to in writing, software\r\n * distributed under the License is distributed on an \"AS IS\" BASIS,\r\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\r\n * See the License for the specific language governing permissions and\r\n * limitations under the License.\r\n */\r\nclass PhoneAuthProvider {\r\n    constructor() {\r\n        this.providerId = 'phone';\r\n        // TODO: remove ts-ignore when moving types from auth-types to auth-compat\r\n        // @ts-ignore\r\n        this._delegate = new _firebase_auth_internal__WEBPACK_IMPORTED_MODULE_1__.PhoneAuthProvider(unwrap(_firebase_app_compat__WEBPACK_IMPORTED_MODULE_0__[\"default\"].auth()));\r\n    }\r\n    static credential(verificationId, verificationCode) {\r\n        return _firebase_auth_internal__WEBPACK_IMPORTED_MODULE_1__.PhoneAuthProvider.credential(verificationId, verificationCode);\r\n    }\r\n    verifyPhoneNumber(phoneInfoOptions, applicationVerifier) {\r\n        return this._delegate.verifyPhoneNumber(\r\n        // The implementation matches but the types are subtly incompatible\r\n        // eslint-disable-next-line @typescript-eslint/no-explicit-any\r\n        phoneInfoOptions, applicationVerifier);\r\n    }\r\n    unwrap() {\r\n        return this._delegate;\r\n    }\r\n}\r\nPhoneAuthProvider.PHONE_SIGN_IN_METHOD = _firebase_auth_internal__WEBPACK_IMPORTED_MODULE_1__.PhoneAuthProvider.PHONE_SIGN_IN_METHOD;\r\nPhoneAuthProvider.PROVIDER_ID = _firebase_auth_internal__WEBPACK_IMPORTED_MODULE_1__.PhoneAuthProvider.PROVIDER_ID;\n\n/**\r\n * @license\r\n * Copyright 2020 Google LLC\r\n *\r\n * Licensed under the Apache License, Version 2.0 (the \"License\");\r\n * you may not use this file except in compliance with the License.\r\n * You may obtain a copy of the License at\r\n *\r\n *   http://www.apache.org/licenses/LICENSE-2.0\r\n *\r\n * Unless required by applicable law or agreed to in writing, software\r\n * distributed under the License is distributed on an \"AS IS\" BASIS,\r\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\r\n * See the License for the specific language governing permissions and\r\n * limitations under the License.\r\n */\r\nconst _assert = _firebase_auth_internal__WEBPACK_IMPORTED_MODULE_1__._assert;\r\nclass RecaptchaVerifier {\r\n    constructor(container, parameters, app = _firebase_app_compat__WEBPACK_IMPORTED_MODULE_0__[\"default\"].app()) {\r\n        var _a;\r\n        // API key is required for web client RPC calls.\r\n        _assert((_a = app.options) === null || _a === void 0 ? void 0 : _a.apiKey, \"invalid-api-key\" /* INVALID_API_KEY */, {\r\n            appName: app.name\r\n        });\r\n        this._delegate = new _firebase_auth_internal__WEBPACK_IMPORTED_MODULE_1__.RecaptchaVerifier(container, \r\n        // eslint-disable-next-line @typescript-eslint/no-explicit-any\r\n        parameters, \r\n        // TODO: remove ts-ignore when moving types from auth-types to auth-compat\r\n        // @ts-ignore\r\n        app.auth());\r\n        this.type = this._delegate.type;\r\n    }\r\n    clear() {\r\n        this._delegate.clear();\r\n    }\r\n    render() {\r\n        return this._delegate.render();\r\n    }\r\n    verify() {\r\n        return this._delegate.verify();\r\n    }\r\n}\n\n/**\r\n * @license\r\n * Copyright 2020 Google LLC\r\n *\r\n * Licensed under the Apache License, Version 2.0 (the \"License\");\r\n * you may not use this file except in compliance with the License.\r\n * You may obtain a copy of the License at\r\n *\r\n *   http://www.apache.org/licenses/LICENSE-2.0\r\n *\r\n * Unless required by applicable law or agreed to in writing, software\r\n * distributed under the License is distributed on an \"AS IS\" BASIS,\r\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\r\n * See the License for the specific language governing permissions and\r\n * limitations under the License.\r\n */\r\nconst AUTH_TYPE = 'auth-compat';\r\n// Create auth components to register with firebase.\r\n// Provides Auth public APIs.\r\nfunction registerAuthCompat(instance) {\r\n    instance.INTERNAL.registerComponent(new _firebase_component__WEBPACK_IMPORTED_MODULE_2__.Component(AUTH_TYPE, container => {\r\n        // getImmediate for FirebaseApp will always succeed\r\n        const app = container.getProvider('app-compat').getImmediate();\r\n        const authProvider = container.getProvider('auth');\r\n        return new Auth(app, authProvider);\r\n    }, \"PUBLIC\" /* PUBLIC */)\r\n        .setServiceProps({\r\n        ActionCodeInfo: {\r\n            Operation: {\r\n                EMAIL_SIGNIN: _firebase_auth_internal__WEBPACK_IMPORTED_MODULE_1__.ActionCodeOperation.EMAIL_SIGNIN,\r\n                PASSWORD_RESET: _firebase_auth_internal__WEBPACK_IMPORTED_MODULE_1__.ActionCodeOperation.PASSWORD_RESET,\r\n                RECOVER_EMAIL: _firebase_auth_internal__WEBPACK_IMPORTED_MODULE_1__.ActionCodeOperation.RECOVER_EMAIL,\r\n                REVERT_SECOND_FACTOR_ADDITION: _firebase_auth_internal__WEBPACK_IMPORTED_MODULE_1__.ActionCodeOperation.REVERT_SECOND_FACTOR_ADDITION,\r\n                VERIFY_AND_CHANGE_EMAIL: _firebase_auth_internal__WEBPACK_IMPORTED_MODULE_1__.ActionCodeOperation.VERIFY_AND_CHANGE_EMAIL,\r\n                VERIFY_EMAIL: _firebase_auth_internal__WEBPACK_IMPORTED_MODULE_1__.ActionCodeOperation.VERIFY_EMAIL\r\n            }\r\n        },\r\n        EmailAuthProvider: _firebase_auth_internal__WEBPACK_IMPORTED_MODULE_1__.EmailAuthProvider,\r\n        FacebookAuthProvider: _firebase_auth_internal__WEBPACK_IMPORTED_MODULE_1__.FacebookAuthProvider,\r\n        GithubAuthProvider: _firebase_auth_internal__WEBPACK_IMPORTED_MODULE_1__.GithubAuthProvider,\r\n        GoogleAuthProvider: _firebase_auth_internal__WEBPACK_IMPORTED_MODULE_1__.GoogleAuthProvider,\r\n        OAuthProvider: _firebase_auth_internal__WEBPACK_IMPORTED_MODULE_1__.OAuthProvider,\r\n        SAMLAuthProvider: _firebase_auth_internal__WEBPACK_IMPORTED_MODULE_1__.SAMLAuthProvider,\r\n        PhoneAuthProvider: PhoneAuthProvider,\r\n        PhoneMultiFactorGenerator: _firebase_auth_internal__WEBPACK_IMPORTED_MODULE_1__.PhoneMultiFactorGenerator,\r\n        RecaptchaVerifier: RecaptchaVerifier,\r\n        TwitterAuthProvider: _firebase_auth_internal__WEBPACK_IMPORTED_MODULE_1__.TwitterAuthProvider,\r\n        Auth,\r\n        AuthCredential: _firebase_auth_internal__WEBPACK_IMPORTED_MODULE_1__.AuthCredential,\r\n        Error: _firebase_util__WEBPACK_IMPORTED_MODULE_3__.FirebaseError\r\n    })\r\n        .setInstantiationMode(\"LAZY\" /* LAZY */)\r\n        .setMultipleInstances(false));\r\n    instance.registerVersion(name, version);\r\n}\r\nregisterAuthCompat(_firebase_app_compat__WEBPACK_IMPORTED_MODULE_0__[\"default\"]);\n//# sourceMappingURL=index.esm2017.js.map\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiLi9ub2RlX21vZHVsZXMvQGZpcmViYXNlL2F1dGgtY29tcGF0L2Rpc3QvaW5kZXguZXNtMjAxNy5qcy5qcyIsIm1hcHBpbmdzIjoiOzs7OztBQUE0QztBQUNHO0FBQ0M7QUFDNkU7O0FBRTdIO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxZQUFZLFNBQVM7QUFDckI7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLFdBQVcsVUFBVTtBQUNyQixZQUFZLFNBQVM7QUFDckI7QUFDQTtBQUNBLDJDQUEyQyxxREFBSztBQUNoRDtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxZQUFZLFNBQVM7QUFDckI7QUFDQTtBQUNBO0FBQ0EsV0FBVyw2REFBYSxNQUFNLHNEQUFNO0FBQ3BDO0FBQ0E7QUFDQTtBQUNBLFlBQVksU0FBUztBQUNyQjtBQUNBO0FBQ0EsV0FBVyxvREFBSTtBQUNmO0FBQ0E7QUFDQTtBQUNBLFdBQVcsUUFBUTtBQUNuQixZQUFZLFNBQVM7QUFDckI7QUFDQSxzQkFBc0IscURBQUs7QUFDM0I7QUFDQTtBQUNBO0FBQ0EsV0FBVyxVQUFVO0FBQ3JCLFlBQVksU0FBUztBQUNyQjtBQUNBO0FBQ0EsNkNBQTZDLHFEQUFLO0FBQ2xEO0FBQ0E7QUFDQSxhQUFhLFNBQVM7QUFDdEI7QUFDQTtBQUNBO0FBQ0Esb0JBQW9CLHFFQUFvQjtBQUN4QztBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLHVCQUF1QixvRUFBb0I7QUFDM0M7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSw4QkFBOEIsb0VBQW9CO0FBQ2xEO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsV0FBVyxVQUFVO0FBQ3JCLFlBQVksU0FBUztBQUNyQjtBQUNBO0FBQ0E7QUFDQSxtQkFBbUIscUJBQU07QUFDekIsK0JBQStCLHFCQUFNO0FBQ3JDLDJCQUEyQixxQkFBTTtBQUNqQztBQUNBO0FBQ0E7QUFDQSxRQUFRLGtFQUFrQjtBQUMxQjtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EseUNBQXlDO0FBQ3pDO0FBQ0EsU0FBUztBQUNUO0FBQ0E7QUFDQTtBQUNBLFNBQVM7QUFDVCxLQUFLO0FBQ0w7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0Esa0JBQWtCLDREQUFXO0FBQzdCO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxRQUFRLDZEQUFhO0FBQ3JCO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsUUFBUSxzREFBTTtBQUNkO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxrREFBa0Qsb0VBQW9CO0FBQ3RFO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxnQkFBZ0Isd0VBQXVCO0FBQ3ZDO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLGdCQUFnQix3RUFBdUI7QUFDdkM7QUFDQTtBQUNBO0FBQ0Esb0JBQW9CLHdFQUF1QjtBQUMzQztBQUNBLG9CQUFvQiw4RUFBNkIsRUFBRSw4RUFBNkI7QUFDaEY7QUFDQSxvQkFBb0IsOEVBQTZCO0FBQ2pEO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxrQkFBa0IsNERBQVc7QUFDN0I7QUFDQTtBQUNBO0FBQ0E7QUFDQSwrQkFBK0IsaUVBQWdCLENBQUMsaUZBQWdDO0FBQ2hGLCtCQUErQixpRUFBZ0IsQ0FBQyxpRkFBZ0M7QUFDaEY7QUFDQTtBQUNBLG9DQUFvQyw4RUFBNkI7QUFDakUsbUNBQW1DLHVFQUFzQjtBQUN6RCx1Q0FBdUMsNEVBQTJCO0FBQ2xFO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLHNFQUFzRTtBQUN0RTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0Esd0RBQXdELDJFQUEwQjtBQUNsRjtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLFlBQVksaUJBQWlCLHFCQUFxQix5REFBYTtBQUMvRDtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSw0QkFBNEIseURBQWE7QUFDekM7QUFDQSxtQkFBbUIsMkZBQTBDO0FBQzdEO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxzQ0FBc0Msd0VBQXVCO0FBQzdEO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsYUFBYSxzRUFBcUI7QUFDbEMsdUJBQXVCLHVFQUFzQjtBQUM3QztBQUNBLGFBQWEsd0VBQXVCO0FBQ3BDLHVCQUF1Qix5RUFBd0I7QUFDL0M7QUFDQSxhQUFhLHNFQUFxQjtBQUNsQyx1QkFBdUIsdUVBQXNCO0FBQzdDO0FBQ0EsYUFBYSx1RUFBc0I7QUFDbkMsdUJBQXVCLHdFQUF1QjtBQUM5QztBQUNBO0FBQ0Esb0JBQW9CLHdFQUF3RTtBQUM1RjtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSwyQkFBMkIsK0VBQThCO0FBQ3pEO0FBQ0E7QUFDQTtBQUNBLDJCQUEyQixnRkFBK0I7QUFDMUQ7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLHFCQUFxQjtBQUNyQjtBQUNBO0FBQ0EsdUJBQXVCLGtFQUFpQjtBQUN4QztBQUNBO0FBQ0E7QUFDQSxhQUFhO0FBQ2I7QUFDQSw2QkFBNkIseURBQWE7QUFDMUM7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EseUJBQXlCLHlEQUFhO0FBQ3RDO0FBQ0E7QUFDQTtBQUNBLEtBQUs7QUFDTDtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxnQ0FBZ0MsMEVBQXlCO0FBQ3pEO0FBQ0E7QUFDQSxLQUFLO0FBQ0w7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLDJCQUEyQixnRUFBZTtBQUMxQztBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsNENBQTRDLHVFQUFzQjtBQUNsRTtBQUNBO0FBQ0Esb0RBQW9ELHdFQUF1QjtBQUMzRTtBQUNBO0FBQ0EsNENBQTRDLGtFQUFpQjtBQUM3RDtBQUNBO0FBQ0EsMENBQTBDLDhEQUFhO0FBQ3ZELGVBQWUscUVBQW9CO0FBQ25DO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSw0Q0FBNEMsaUZBQWdDO0FBQzVFO0FBQ0E7QUFDQSxvREFBb0Qsa0ZBQWlDO0FBQ3JGO0FBQ0E7QUFDQSw0Q0FBNEMsNEVBQTJCO0FBQ3ZFO0FBQ0E7QUFDQSwwQ0FBMEMsOERBQWE7QUFDdkQsZUFBZSwrRUFBOEI7QUFDN0M7QUFDQTtBQUNBLGVBQWUsMEVBQXlCO0FBQ3hDO0FBQ0E7QUFDQSxjQUFjLDJEQUFVO0FBQ3hCO0FBQ0E7QUFDQTtBQUNBLGVBQWUsZ0VBQWU7QUFDOUI7QUFDQTtBQUNBLGVBQWUsbUVBQWtCO0FBQ2pDO0FBQ0E7QUFDQSxlQUFlLHNFQUFxQjtBQUNwQztBQUNBO0FBQ0EsZUFBZSxrRUFBaUI7QUFDaEM7QUFDQTtBQUNBLGVBQWUsNEVBQTJCO0FBQzFDO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxrQkFBa0IsNERBQVc7QUFDN0I7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLGdCQUFnQixTQUFTO0FBQ3pCO0FBQ0E7QUFDQTtBQUNBLFNBQVM7QUFDVDtBQUNBO0FBQ0E7QUFDQSxTQUFTO0FBQ1Q7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxTQUFTO0FBQ1QsdUNBQXVDLGtFQUFpQjtBQUN4RDtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxRQUFRLHdFQUF1QjtBQUMvQjtBQUNBO0FBQ0EsZUFBZSxvRUFBbUI7QUFDbEM7QUFDQTtBQUNBLGVBQWUsb0VBQW1CO0FBQ2xDO0FBQ0E7QUFDQSxlQUFlLHlFQUF3QjtBQUN2QztBQUNBO0FBQ0EsaURBQWlELG1GQUFrQztBQUNuRjtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsZUFBZSwrRUFBOEI7QUFDN0M7QUFDQTtBQUNBLGVBQWUsMEVBQXlCO0FBQ3hDO0FBQ0E7QUFDQTtBQUNBLGlDQUFpQyxzRUFBcUI7QUFDdEQ7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsUUFBUSwyRUFBMEI7QUFDbEM7QUFDQTtBQUNBLGdCQUFnQix3QkFBd0I7QUFDeEM7QUFDQTtBQUNBO0FBQ0EsZ0JBQWdCLHdCQUF3QjtBQUN4QztBQUNBO0FBQ0E7QUFDQSxlQUFlLDBFQUF5QjtBQUN4QztBQUNBO0FBQ0EsZUFBZSwyRUFBMEI7QUFDekM7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsNEJBQTRCLDhFQUE2QjtBQUN6RDtBQUNBO0FBQ0E7QUFDQSx3REFBd0QsaUVBQ3ZCLENBQUMsOEVBQTZCO0FBQy9EO0FBQ0E7QUFDQSxzQkFBc0IsOEVBQTZCO0FBQ25ELHNCQUFzQiw0RUFBMkI7QUFDakQ7QUFDQTtBQUNBLDRCQUE0Qix3RUFBdUI7QUFDbkQ7QUFDQTtBQUNBLHVCQUF1QiwwREFBUztBQUNoQztBQUNBLGlCQUFpQjtBQUNqQjtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLGlEQUFpRCxzRUFBcUI7QUFDdEU7QUFDQTtBQUNBLGlEQUFpRCx5RUFBd0I7QUFDekU7QUFDQTtBQUNBLGlEQUFpRCwwRUFBeUI7QUFDMUU7QUFDQTtBQUNBLGlEQUFpRCwrRUFBOEI7QUFDL0U7QUFDQTtBQUNBLGlEQUFpRCx3RUFBdUI7QUFDeEU7QUFDQTtBQUNBLHlEQUF5RCwwRUFBeUI7QUFDbEY7QUFDQTtBQUNBO0FBQ0EsaURBQWlELG9FQUFtQjtBQUNwRTtBQUNBO0FBQ0E7QUFDQTtBQUNBLGVBQWUsdUVBQXNCO0FBQ3JDO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsZUFBZSw0RUFBMkI7QUFDMUM7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsV0FBVyx3QkFBd0I7QUFDbkM7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsK0JBQStCLDhFQUE2QjtBQUM1RCwwQkFBMEIsOEVBQTZCO0FBQ3ZEO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsWUFBWSw0RUFBMkI7QUFDdkMsWUFBWSw4RUFBNkI7QUFDekM7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSwrQkFBK0Isd0VBQXVCO0FBQ3RELDBCQUEwQix3RUFBdUI7QUFDakQ7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLDZCQUE2QixzRUFBcUIsUUFBUSxpRUFBYTtBQUN2RTtBQUNBO0FBQ0EsZUFBZSxpRkFBZ0M7QUFDL0M7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLHlDQUF5QywyRkFBMEM7QUFDbkYsZ0NBQWdDLGtGQUFpQzs7QUFFakU7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxnQkFBZ0IsNERBQVc7QUFDM0I7QUFDQSw2Q0FBNkMsZ0VBQVk7QUFDekQ7QUFDQTtBQUNBO0FBQ0E7QUFDQSxTQUFTO0FBQ1QsNkJBQTZCLHNFQUFxQjtBQUNsRDtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSw0Q0FBNEMsMERBQVM7QUFDckQ7QUFDQTtBQUNBO0FBQ0E7QUFDQSxLQUFLO0FBQ0w7QUFDQTtBQUNBO0FBQ0EsOEJBQThCLHFGQUFvQztBQUNsRSxnQ0FBZ0MsdUZBQXNDO0FBQ3RFLCtCQUErQixzRkFBcUM7QUFDcEUsK0NBQStDLHNHQUFxRDtBQUNwRyx5Q0FBeUMsZ0dBQStDO0FBQ3hGLDhCQUE4QixxRkFBb0M7QUFDbEU7QUFDQSxTQUFTO0FBQ1QsMkJBQTJCLHNFQUFxQjtBQUNoRCw4QkFBOEIseUVBQXdCO0FBQ3RELDRCQUE0Qix1RUFBc0I7QUFDbEQsNEJBQTRCLHVFQUFzQjtBQUNsRCx1QkFBdUIsa0VBQWlCO0FBQ3hDLDBCQUEwQixxRUFBb0I7QUFDOUM7QUFDQSxtQ0FBbUMsOEVBQTZCO0FBQ2hFO0FBQ0EsNkJBQTZCLHdFQUF1QjtBQUNwRDtBQUNBLHdCQUF3QixtRUFBa0I7QUFDMUMsZUFBZSx5REFBYTtBQUM1QixLQUFLO0FBQ0w7QUFDQTtBQUNBO0FBQ0E7QUFDQSxtQkFBbUIsNERBQVE7QUFDM0IiLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly9fTl9FLy4vbm9kZV9tb2R1bGVzL0BmaXJlYmFzZS9hdXRoLWNvbXBhdC9kaXN0L2luZGV4LmVzbTIwMTcuanM/NDFjZCJdLCJzb3VyY2VzQ29udGVudCI6WyJpbXBvcnQgZmlyZWJhc2UgZnJvbSAnQGZpcmViYXNlL2FwcC1jb21wYXQnO1xuaW1wb3J0ICogYXMgZXhwIGZyb20gJ0BmaXJlYmFzZS9hdXRoL2ludGVybmFsJztcbmltcG9ydCB7IENvbXBvbmVudCB9IGZyb20gJ0BmaXJlYmFzZS9jb21wb25lbnQnO1xuaW1wb3J0IHsgaXNCcm93c2VyRXh0ZW5zaW9uLCBpc1JlYWN0TmF0aXZlLCBpc05vZGUsIGdldFVBLCBpc0lFLCBpc0luZGV4ZWREQkF2YWlsYWJsZSwgRmlyZWJhc2VFcnJvciB9IGZyb20gJ0BmaXJlYmFzZS91dGlsJztcblxudmFyIG5hbWUgPSBcIkBmaXJlYmFzZS9hdXRoLWNvbXBhdFwiO1xudmFyIHZlcnNpb24gPSBcIjAuMi4xNlwiO1xuXG4vKipcclxuICogQGxpY2Vuc2VcclxuICogQ29weXJpZ2h0IDIwMjAgR29vZ2xlIExMQ1xyXG4gKlxyXG4gKiBMaWNlbnNlZCB1bmRlciB0aGUgQXBhY2hlIExpY2Vuc2UsIFZlcnNpb24gMi4wICh0aGUgXCJMaWNlbnNlXCIpO1xyXG4gKiB5b3UgbWF5IG5vdCB1c2UgdGhpcyBmaWxlIGV4Y2VwdCBpbiBjb21wbGlhbmNlIHdpdGggdGhlIExpY2Vuc2UuXHJcbiAqIFlvdSBtYXkgb2J0YWluIGEgY29weSBvZiB0aGUgTGljZW5zZSBhdFxyXG4gKlxyXG4gKiAgIGh0dHA6Ly93d3cuYXBhY2hlLm9yZy9saWNlbnNlcy9MSUNFTlNFLTIuMFxyXG4gKlxyXG4gKiBVbmxlc3MgcmVxdWlyZWQgYnkgYXBwbGljYWJsZSBsYXcgb3IgYWdyZWVkIHRvIGluIHdyaXRpbmcsIHNvZnR3YXJlXHJcbiAqIGRpc3RyaWJ1dGVkIHVuZGVyIHRoZSBMaWNlbnNlIGlzIGRpc3RyaWJ1dGVkIG9uIGFuIFwiQVMgSVNcIiBCQVNJUyxcclxuICogV0lUSE9VVCBXQVJSQU5USUVTIE9SIENPTkRJVElPTlMgT0YgQU5ZIEtJTkQsIGVpdGhlciBleHByZXNzIG9yIGltcGxpZWQuXHJcbiAqIFNlZSB0aGUgTGljZW5zZSBmb3IgdGhlIHNwZWNpZmljIGxhbmd1YWdlIGdvdmVybmluZyBwZXJtaXNzaW9ucyBhbmRcclxuICogbGltaXRhdGlvbnMgdW5kZXIgdGhlIExpY2Vuc2UuXHJcbiAqL1xyXG5jb25zdCBDT1JET1ZBX09OREVWSUNFUkVBRFlfVElNRU9VVF9NUyA9IDEwMDA7XHJcbmZ1bmN0aW9uIF9nZXRDdXJyZW50U2NoZW1lKCkge1xyXG4gICAgdmFyIF9hO1xyXG4gICAgcmV0dXJuICgoX2EgPSBzZWxmID09PSBudWxsIHx8IHNlbGYgPT09IHZvaWQgMCA/IHZvaWQgMCA6IHNlbGYubG9jYXRpb24pID09PSBudWxsIHx8IF9hID09PSB2b2lkIDAgPyB2b2lkIDAgOiBfYS5wcm90b2NvbCkgfHwgbnVsbDtcclxufVxyXG4vKipcclxuICogQHJldHVybiB7Ym9vbGVhbn0gV2hldGhlciB0aGUgY3VycmVudCBlbnZpcm9ubWVudCBpcyBodHRwIG9yIGh0dHBzLlxyXG4gKi9cclxuZnVuY3Rpb24gX2lzSHR0cE9ySHR0cHMoKSB7XHJcbiAgICByZXR1cm4gX2dldEN1cnJlbnRTY2hlbWUoKSA9PT0gJ2h0dHA6JyB8fCBfZ2V0Q3VycmVudFNjaGVtZSgpID09PSAnaHR0cHM6JztcclxufVxyXG4vKipcclxuICogQHBhcmFtIHs/c3RyaW5nPX0gdWEgVGhlIHVzZXIgYWdlbnQuXHJcbiAqIEByZXR1cm4ge2Jvb2xlYW59IFdoZXRoZXIgdGhlIGFwcCBpcyByZW5kZXJlZCBpbiBhIG1vYmlsZSBpT1Mgb3IgQW5kcm9pZFxyXG4gKiAgICAgQ29yZG92YSBlbnZpcm9ubWVudC5cclxuICovXHJcbmZ1bmN0aW9uIF9pc0FuZHJvaWRPcklvc0NvcmRvdmFTY2hlbWUodWEgPSBnZXRVQSgpKSB7XHJcbiAgICByZXR1cm4gISEoKF9nZXRDdXJyZW50U2NoZW1lKCkgPT09ICdmaWxlOicgfHxcclxuICAgICAgICBfZ2V0Q3VycmVudFNjaGVtZSgpID09PSAnaW9uaWM6JyB8fFxyXG4gICAgICAgIF9nZXRDdXJyZW50U2NoZW1lKCkgPT09ICdjYXBhY2l0b3I6JykgJiZcclxuICAgICAgICB1YS50b0xvd2VyQ2FzZSgpLm1hdGNoKC9pcGhvbmV8aXBhZHxpcG9kfGFuZHJvaWQvKSk7XHJcbn1cclxuLyoqXHJcbiAqIEByZXR1cm4ge2Jvb2xlYW59IFdoZXRoZXIgdGhlIGVudmlyb25tZW50IGlzIGEgbmF0aXZlIGVudmlyb25tZW50LCB3aGVyZVxyXG4gKiAgICAgQ09SUyBjaGVja3MgZG8gbm90IGFwcGx5LlxyXG4gKi9cclxuZnVuY3Rpb24gX2lzTmF0aXZlRW52aXJvbm1lbnQoKSB7XHJcbiAgICByZXR1cm4gaXNSZWFjdE5hdGl2ZSgpIHx8IGlzTm9kZSgpO1xyXG59XHJcbi8qKlxyXG4gKiBDaGVja3Mgd2hldGhlciB0aGUgdXNlciBhZ2VudCBpcyBJRTExLlxyXG4gKiBAcmV0dXJuIHtib29sZWFufSBUcnVlIGlmIGl0IGlzIElFMTEuXHJcbiAqL1xyXG5mdW5jdGlvbiBfaXNJZTExKCkge1xyXG4gICAgcmV0dXJuIGlzSUUoKSAmJiAoZG9jdW1lbnQgPT09IG51bGwgfHwgZG9jdW1lbnQgPT09IHZvaWQgMCA/IHZvaWQgMCA6IGRvY3VtZW50LmRvY3VtZW50TW9kZSkgPT09IDExO1xyXG59XHJcbi8qKlxyXG4gKiBDaGVja3Mgd2hldGhlciB0aGUgdXNlciBhZ2VudCBpcyBFZGdlLlxyXG4gKiBAcGFyYW0ge3N0cmluZ30gdXNlckFnZW50IFRoZSBicm93c2VyIHVzZXIgYWdlbnQgc3RyaW5nLlxyXG4gKiBAcmV0dXJuIHtib29sZWFufSBUcnVlIGlmIGl0IGlzIEVkZ2UuXHJcbiAqL1xyXG5mdW5jdGlvbiBfaXNFZGdlKHVhID0gZ2V0VUEoKSkge1xyXG4gICAgcmV0dXJuIC9FZGdlXFwvXFxkKy8udGVzdCh1YSk7XHJcbn1cclxuLyoqXHJcbiAqIEBwYXJhbSB7P3N0cmluZz19IG9wdF91c2VyQWdlbnQgVGhlIG5hdmlnYXRvciB1c2VyIGFnZW50LlxyXG4gKiBAcmV0dXJuIHtib29sZWFufSBXaGV0aGVyIGxvY2FsIHN0b3JhZ2UgaXMgbm90IHN5bmNocm9uaXplZCBiZXR3ZWVuIGFuIGlmcmFtZVxyXG4gKiAgICAgYW5kIGEgcG9wdXAgb2YgdGhlIHNhbWUgZG9tYWluLlxyXG4gKi9cclxuZnVuY3Rpb24gX2lzTG9jYWxTdG9yYWdlTm90U3luY2hyb25pemVkKHVhID0gZ2V0VUEoKSkge1xyXG4gICAgcmV0dXJuIF9pc0llMTEoKSB8fCBfaXNFZGdlKHVhKTtcclxufVxyXG4vKiogQHJldHVybiB7Ym9vbGVhbn0gV2hldGhlciB3ZWIgc3RvcmFnZSBpcyBzdXBwb3J0ZWQuICovXHJcbmZ1bmN0aW9uIF9pc1dlYlN0b3JhZ2VTdXBwb3J0ZWQoKSB7XHJcbiAgICB0cnkge1xyXG4gICAgICAgIGNvbnN0IHN0b3JhZ2UgPSBzZWxmLmxvY2FsU3RvcmFnZTtcclxuICAgICAgICBjb25zdCBrZXkgPSBleHAuX2dlbmVyYXRlRXZlbnRJZCgpO1xyXG4gICAgICAgIGlmIChzdG9yYWdlKSB7XHJcbiAgICAgICAgICAgIC8vIHNldEl0ZW0gd2lsbCB0aHJvdyBhbiBleGNlcHRpb24gaWYgd2UgY2Fubm90IGFjY2VzcyBXZWJTdG9yYWdlIChlLmcuLFxyXG4gICAgICAgICAgICAvLyBTYWZhcmkgaW4gcHJpdmF0ZSBtb2RlKS5cclxuICAgICAgICAgICAgc3RvcmFnZVsnc2V0SXRlbSddKGtleSwgJzEnKTtcclxuICAgICAgICAgICAgc3RvcmFnZVsncmVtb3ZlSXRlbSddKGtleSk7XHJcbiAgICAgICAgICAgIC8vIEZvciBicm93c2VycyB3aGVyZSBpZnJhbWUgd2ViIHN0b3JhZ2UgZG9lcyBub3Qgc3luY2hyb25pemUgd2l0aCBhIHBvcHVwXHJcbiAgICAgICAgICAgIC8vIG9mIHRoZSBzYW1lIGRvbWFpbiwgaW5kZXhlZERCIGlzIHVzZWQgZm9yIHBlcnNpc3RlbnQgc3RvcmFnZS4gVGhlc2VcclxuICAgICAgICAgICAgLy8gYnJvd3NlcnMgaW5jbHVkZSBJRTExIGFuZCBFZGdlLlxyXG4gICAgICAgICAgICAvLyBNYWtlIHN1cmUgaXQgaXMgc3VwcG9ydGVkIChJRTExIGFuZCBFZGdlIHByaXZhdGUgbW9kZSBkb2VzIG5vdCBzdXBwb3J0XHJcbiAgICAgICAgICAgIC8vIHRoYXQpLlxyXG4gICAgICAgICAgICBpZiAoX2lzTG9jYWxTdG9yYWdlTm90U3luY2hyb25pemVkKCkpIHtcclxuICAgICAgICAgICAgICAgIC8vIEluIHN1Y2ggYnJvd3NlcnMsIGlmIGluZGV4ZWREQiBpcyBub3Qgc3VwcG9ydGVkLCBhbiBpZnJhbWUgY2Fubm90IGJlXHJcbiAgICAgICAgICAgICAgICAvLyBub3RpZmllZCBvZiB0aGUgcG9wdXAgc2lnbiBpbiByZXN1bHQuXHJcbiAgICAgICAgICAgICAgICByZXR1cm4gaXNJbmRleGVkREJBdmFpbGFibGUoKTtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICByZXR1cm4gdHJ1ZTtcclxuICAgICAgICB9XHJcbiAgICB9XHJcbiAgICBjYXRjaCAoZSkge1xyXG4gICAgICAgIC8vIGxvY2FsU3RvcmFnZSBpcyBub3QgYXZhaWxhYmxlIGZyb20gYSB3b3JrZXIuIFRlc3QgYXZhaWxhYmlsaXR5IG9mXHJcbiAgICAgICAgLy8gaW5kZXhlZERCLlxyXG4gICAgICAgIHJldHVybiBfaXNXb3JrZXIoKSAmJiBpc0luZGV4ZWREQkF2YWlsYWJsZSgpO1xyXG4gICAgfVxyXG4gICAgcmV0dXJuIGZhbHNlO1xyXG59XHJcbi8qKlxyXG4gKiBAcGFyYW0gez9PYmplY3Q9fSBnbG9iYWwgVGhlIG9wdGlvbmFsIGdsb2JhbCBzY29wZS5cclxuICogQHJldHVybiB7Ym9vbGVhbn0gV2hldGhlciBjdXJyZW50IGVudmlyb25tZW50IGlzIGEgd29ya2VyLlxyXG4gKi9cclxuZnVuY3Rpb24gX2lzV29ya2VyKCkge1xyXG4gICAgLy8gV29ya2VyR2xvYmFsU2NvcGUgb25seSBkZWZpbmVkIGluIHdvcmtlciBlbnZpcm9ubWVudC5cclxuICAgIHJldHVybiAodHlwZW9mIGdsb2JhbCAhPT0gJ3VuZGVmaW5lZCcgJiZcclxuICAgICAgICAnV29ya2VyR2xvYmFsU2NvcGUnIGluIGdsb2JhbCAmJlxyXG4gICAgICAgICdpbXBvcnRTY3JpcHRzJyBpbiBnbG9iYWwpO1xyXG59XHJcbmZ1bmN0aW9uIF9pc1BvcHVwUmVkaXJlY3RTdXBwb3J0ZWQoKSB7XHJcbiAgICByZXR1cm4gKChfaXNIdHRwT3JIdHRwcygpIHx8XHJcbiAgICAgICAgaXNCcm93c2VyRXh0ZW5zaW9uKCkgfHxcclxuICAgICAgICBfaXNBbmRyb2lkT3JJb3NDb3Jkb3ZhU2NoZW1lKCkpICYmXHJcbiAgICAgICAgLy8gUmVhY3QgTmF0aXZlIHdpdGggcmVtb3RlIGRlYnVnZ2luZyByZXBvcnRzIGl0cyBsb2NhdGlvbi5wcm90b2NvbCBhc1xyXG4gICAgICAgIC8vIGh0dHAuXHJcbiAgICAgICAgIV9pc05hdGl2ZUVudmlyb25tZW50KCkgJiZcclxuICAgICAgICAvLyBMb2NhbCBzdG9yYWdlIGhhcyB0byBiZSBzdXBwb3J0ZWQgZm9yIGJyb3dzZXIgcG9wdXAgYW5kIHJlZGlyZWN0XHJcbiAgICAgICAgLy8gb3BlcmF0aW9ucyB0byB3b3JrLlxyXG4gICAgICAgIF9pc1dlYlN0b3JhZ2VTdXBwb3J0ZWQoKSAmJlxyXG4gICAgICAgIC8vIERPTSwgcG9wdXBzIGFuZCByZWRpcmVjdHMgYXJlIG5vdCBzdXBwb3J0ZWQgd2l0aGluIGEgd29ya2VyLlxyXG4gICAgICAgICFfaXNXb3JrZXIoKSk7XHJcbn1cclxuLyoqIFF1aWNrIGNoZWNrIHRoYXQgaW5kaWNhdGVzIHRoZSBwbGF0Zm9ybSAqbWF5KiBiZSBDb3Jkb3ZhICovXHJcbmZ1bmN0aW9uIF9pc0xpa2VseUNvcmRvdmEoKSB7XHJcbiAgICByZXR1cm4gX2lzQW5kcm9pZE9ySW9zQ29yZG92YVNjaGVtZSgpICYmIHR5cGVvZiBkb2N1bWVudCAhPT0gJ3VuZGVmaW5lZCc7XHJcbn1cclxuYXN5bmMgZnVuY3Rpb24gX2lzQ29yZG92YSgpIHtcclxuICAgIGlmICghX2lzTGlrZWx5Q29yZG92YSgpKSB7XHJcbiAgICAgICAgcmV0dXJuIGZhbHNlO1xyXG4gICAgfVxyXG4gICAgcmV0dXJuIG5ldyBQcm9taXNlKHJlc29sdmUgPT4ge1xyXG4gICAgICAgIGNvbnN0IHRpbWVvdXRJZCA9IHNldFRpbWVvdXQoKCkgPT4ge1xyXG4gICAgICAgICAgICAvLyBXZSd2ZSB3YWl0ZWQgbG9uZyBlbm91Z2g7IHRoZSB0ZWxsdGFsZSBDb3Jkb3ZhIGV2ZW50IGRpZG4ndCBoYXBwZW5cclxuICAgICAgICAgICAgcmVzb2x2ZShmYWxzZSk7XHJcbiAgICAgICAgfSwgQ09SRE9WQV9PTkRFVklDRVJFQURZX1RJTUVPVVRfTVMpO1xyXG4gICAgICAgIGRvY3VtZW50LmFkZEV2ZW50TGlzdGVuZXIoJ2RldmljZXJlYWR5JywgKCkgPT4ge1xyXG4gICAgICAgICAgICBjbGVhclRpbWVvdXQodGltZW91dElkKTtcclxuICAgICAgICAgICAgcmVzb2x2ZSh0cnVlKTtcclxuICAgICAgICB9KTtcclxuICAgIH0pO1xyXG59XHJcbmZ1bmN0aW9uIF9nZXRTZWxmV2luZG93KCkge1xyXG4gICAgcmV0dXJuIHR5cGVvZiB3aW5kb3cgIT09ICd1bmRlZmluZWQnID8gd2luZG93IDogbnVsbDtcclxufVxuXG4vKipcclxuICogQGxpY2Vuc2VcclxuICogQ29weXJpZ2h0IDIwMjAgR29vZ2xlIExMQ1xyXG4gKlxyXG4gKiBMaWNlbnNlZCB1bmRlciB0aGUgQXBhY2hlIExpY2Vuc2UsIFZlcnNpb24gMi4wICh0aGUgXCJMaWNlbnNlXCIpO1xyXG4gKiB5b3UgbWF5IG5vdCB1c2UgdGhpcyBmaWxlIGV4Y2VwdCBpbiBjb21wbGlhbmNlIHdpdGggdGhlIExpY2Vuc2UuXHJcbiAqIFlvdSBtYXkgb2J0YWluIGEgY29weSBvZiB0aGUgTGljZW5zZSBhdFxyXG4gKlxyXG4gKiAgIGh0dHA6Ly93d3cuYXBhY2hlLm9yZy9saWNlbnNlcy9MSUNFTlNFLTIuMFxyXG4gKlxyXG4gKiBVbmxlc3MgcmVxdWlyZWQgYnkgYXBwbGljYWJsZSBsYXcgb3IgYWdyZWVkIHRvIGluIHdyaXRpbmcsIHNvZnR3YXJlXHJcbiAqIGRpc3RyaWJ1dGVkIHVuZGVyIHRoZSBMaWNlbnNlIGlzIGRpc3RyaWJ1dGVkIG9uIGFuIFwiQVMgSVNcIiBCQVNJUyxcclxuICogV0lUSE9VVCBXQVJSQU5USUVTIE9SIENPTkRJVElPTlMgT0YgQU5ZIEtJTkQsIGVpdGhlciBleHByZXNzIG9yIGltcGxpZWQuXHJcbiAqIFNlZSB0aGUgTGljZW5zZSBmb3IgdGhlIHNwZWNpZmljIGxhbmd1YWdlIGdvdmVybmluZyBwZXJtaXNzaW9ucyBhbmRcclxuICogbGltaXRhdGlvbnMgdW5kZXIgdGhlIExpY2Vuc2UuXHJcbiAqL1xyXG5jb25zdCBQZXJzaXN0ZW5jZSA9IHtcclxuICAgIExPQ0FMOiAnbG9jYWwnLFxyXG4gICAgTk9ORTogJ25vbmUnLFxyXG4gICAgU0VTU0lPTjogJ3Nlc3Npb24nXHJcbn07XHJcbmNvbnN0IF9hc3NlcnQkMyA9IGV4cC5fYXNzZXJ0O1xyXG5jb25zdCBQRVJTSVNURU5DRV9LRVkgPSAncGVyc2lzdGVuY2UnO1xyXG4vKipcclxuICogVmFsaWRhdGVzIHRoYXQgYW4gYXJndW1lbnQgaXMgYSB2YWxpZCBwZXJzaXN0ZW5jZSB2YWx1ZS4gSWYgYW4gaW52YWxpZCB0eXBlXHJcbiAqIGlzIHNwZWNpZmllZCwgYW4gZXJyb3IgaXMgdGhyb3duIHN5bmNocm9ub3VzbHkuXHJcbiAqL1xyXG5mdW5jdGlvbiBfdmFsaWRhdGVQZXJzaXN0ZW5jZUFyZ3VtZW50KGF1dGgsIHBlcnNpc3RlbmNlKSB7XHJcbiAgICBfYXNzZXJ0JDMoT2JqZWN0LnZhbHVlcyhQZXJzaXN0ZW5jZSkuaW5jbHVkZXMocGVyc2lzdGVuY2UpLCBhdXRoLCBcImludmFsaWQtcGVyc2lzdGVuY2UtdHlwZVwiIC8qIElOVkFMSURfUEVSU0lTVEVOQ0UgKi8pO1xyXG4gICAgLy8gVmFsaWRhdGUgaWYgdGhlIHNwZWNpZmllZCB0eXBlIGlzIHN1cHBvcnRlZCBpbiB0aGUgY3VycmVudCBlbnZpcm9ubWVudC5cclxuICAgIGlmIChpc1JlYWN0TmF0aXZlKCkpIHtcclxuICAgICAgICAvLyBUaGlzIGlzIG9ubHkgc3VwcG9ydGVkIGluIGEgYnJvd3Nlci5cclxuICAgICAgICBfYXNzZXJ0JDMocGVyc2lzdGVuY2UgIT09IFBlcnNpc3RlbmNlLlNFU1NJT04sIGF1dGgsIFwidW5zdXBwb3J0ZWQtcGVyc2lzdGVuY2UtdHlwZVwiIC8qIFVOU1VQUE9SVEVEX1BFUlNJU1RFTkNFICovKTtcclxuICAgICAgICByZXR1cm47XHJcbiAgICB9XHJcbiAgICBpZiAoaXNOb2RlKCkpIHtcclxuICAgICAgICAvLyBPbmx5IG5vbmUgaXMgc3VwcG9ydGVkIGluIE5vZGUuanMuXHJcbiAgICAgICAgX2Fzc2VydCQzKHBlcnNpc3RlbmNlID09PSBQZXJzaXN0ZW5jZS5OT05FLCBhdXRoLCBcInVuc3VwcG9ydGVkLXBlcnNpc3RlbmNlLXR5cGVcIiAvKiBVTlNVUFBPUlRFRF9QRVJTSVNURU5DRSAqLyk7XHJcbiAgICAgICAgcmV0dXJuO1xyXG4gICAgfVxyXG4gICAgaWYgKF9pc1dvcmtlcigpKSB7XHJcbiAgICAgICAgLy8gSW4gYSB3b3JrZXIgZW52aXJvbm1lbnQsIGVpdGhlciBMT0NBTCBvciBOT05FIGFyZSBzdXBwb3J0ZWQuXHJcbiAgICAgICAgLy8gSWYgaW5kZXhlZERCIG5vdCBzdXBwb3J0ZWQgYW5kIExPQ0FMIHByb3ZpZGVkLCB0aHJvdyBhbiBlcnJvclxyXG4gICAgICAgIF9hc3NlcnQkMyhwZXJzaXN0ZW5jZSA9PT0gUGVyc2lzdGVuY2UuTk9ORSB8fFxyXG4gICAgICAgICAgICAocGVyc2lzdGVuY2UgPT09IFBlcnNpc3RlbmNlLkxPQ0FMICYmIGlzSW5kZXhlZERCQXZhaWxhYmxlKCkpLCBhdXRoLCBcInVuc3VwcG9ydGVkLXBlcnNpc3RlbmNlLXR5cGVcIiAvKiBVTlNVUFBPUlRFRF9QRVJTSVNURU5DRSAqLyk7XHJcbiAgICAgICAgcmV0dXJuO1xyXG4gICAgfVxyXG4gICAgLy8gVGhpcyBpcyByZXN0cmljdGVkIGJ5IHdoYXQgdGhlIGJyb3dzZXIgc3VwcG9ydHMuXHJcbiAgICBfYXNzZXJ0JDMocGVyc2lzdGVuY2UgPT09IFBlcnNpc3RlbmNlLk5PTkUgfHwgX2lzV2ViU3RvcmFnZVN1cHBvcnRlZCgpLCBhdXRoLCBcInVuc3VwcG9ydGVkLXBlcnNpc3RlbmNlLXR5cGVcIiAvKiBVTlNVUFBPUlRFRF9QRVJTSVNURU5DRSAqLyk7XHJcbn1cclxuYXN5bmMgZnVuY3Rpb24gX3NhdmVQZXJzaXN0ZW5jZUZvclJlZGlyZWN0KGF1dGgpIHtcclxuICAgIGF3YWl0IGF1dGguX2luaXRpYWxpemF0aW9uUHJvbWlzZTtcclxuICAgIGNvbnN0IHNlc3Npb24gPSBnZXRTZXNzaW9uU3RvcmFnZUlmQXZhaWxhYmxlKCk7XHJcbiAgICBjb25zdCBrZXkgPSBleHAuX3BlcnNpc3RlbmNlS2V5TmFtZShQRVJTSVNURU5DRV9LRVksIGF1dGguY29uZmlnLmFwaUtleSwgYXV0aC5uYW1lKTtcclxuICAgIGlmIChzZXNzaW9uKSB7XHJcbiAgICAgICAgc2Vzc2lvbi5zZXRJdGVtKGtleSwgYXV0aC5fZ2V0UGVyc2lzdGVuY2UoKSk7XHJcbiAgICB9XHJcbn1cclxuZnVuY3Rpb24gX2dldFBlcnNpc3RlbmNlc0Zyb21SZWRpcmVjdChhcGlLZXksIGFwcE5hbWUpIHtcclxuICAgIGNvbnN0IHNlc3Npb24gPSBnZXRTZXNzaW9uU3RvcmFnZUlmQXZhaWxhYmxlKCk7XHJcbiAgICBpZiAoIXNlc3Npb24pIHtcclxuICAgICAgICByZXR1cm4gW107XHJcbiAgICB9XHJcbiAgICBjb25zdCBrZXkgPSBleHAuX3BlcnNpc3RlbmNlS2V5TmFtZShQRVJTSVNURU5DRV9LRVksIGFwaUtleSwgYXBwTmFtZSk7XHJcbiAgICBjb25zdCBwZXJzaXN0ZW5jZSA9IHNlc3Npb24uZ2V0SXRlbShrZXkpO1xyXG4gICAgc3dpdGNoIChwZXJzaXN0ZW5jZSkge1xyXG4gICAgICAgIGNhc2UgUGVyc2lzdGVuY2UuTk9ORTpcclxuICAgICAgICAgICAgcmV0dXJuIFtleHAuaW5NZW1vcnlQZXJzaXN0ZW5jZV07XHJcbiAgICAgICAgY2FzZSBQZXJzaXN0ZW5jZS5MT0NBTDpcclxuICAgICAgICAgICAgcmV0dXJuIFtleHAuaW5kZXhlZERCTG9jYWxQZXJzaXN0ZW5jZSwgZXhwLmJyb3dzZXJTZXNzaW9uUGVyc2lzdGVuY2VdO1xyXG4gICAgICAgIGNhc2UgUGVyc2lzdGVuY2UuU0VTU0lPTjpcclxuICAgICAgICAgICAgcmV0dXJuIFtleHAuYnJvd3NlclNlc3Npb25QZXJzaXN0ZW5jZV07XHJcbiAgICAgICAgZGVmYXVsdDpcclxuICAgICAgICAgICAgcmV0dXJuIFtdO1xyXG4gICAgfVxyXG59XHJcbi8qKiBSZXR1cm5zIHNlc3Npb24gc3RvcmFnZSwgb3IgbnVsbCBpZiB0aGUgcHJvcGVydHkgYWNjZXNzIGVycm9ycyAqL1xyXG5mdW5jdGlvbiBnZXRTZXNzaW9uU3RvcmFnZUlmQXZhaWxhYmxlKCkge1xyXG4gICAgdmFyIF9hO1xyXG4gICAgdHJ5IHtcclxuICAgICAgICByZXR1cm4gKChfYSA9IF9nZXRTZWxmV2luZG93KCkpID09PSBudWxsIHx8IF9hID09PSB2b2lkIDAgPyB2b2lkIDAgOiBfYS5zZXNzaW9uU3RvcmFnZSkgfHwgbnVsbDtcclxuICAgIH1cclxuICAgIGNhdGNoIChlKSB7XHJcbiAgICAgICAgcmV0dXJuIG51bGw7XHJcbiAgICB9XHJcbn1cblxuLyoqXHJcbiAqIEBsaWNlbnNlXHJcbiAqIENvcHlyaWdodCAyMDIwIEdvb2dsZSBMTENcclxuICpcclxuICogTGljZW5zZWQgdW5kZXIgdGhlIEFwYWNoZSBMaWNlbnNlLCBWZXJzaW9uIDIuMCAodGhlIFwiTGljZW5zZVwiKTtcclxuICogeW91IG1heSBub3QgdXNlIHRoaXMgZmlsZSBleGNlcHQgaW4gY29tcGxpYW5jZSB3aXRoIHRoZSBMaWNlbnNlLlxyXG4gKiBZb3UgbWF5IG9idGFpbiBhIGNvcHkgb2YgdGhlIExpY2Vuc2UgYXRcclxuICpcclxuICogICBodHRwOi8vd3d3LmFwYWNoZS5vcmcvbGljZW5zZXMvTElDRU5TRS0yLjBcclxuICpcclxuICogVW5sZXNzIHJlcXVpcmVkIGJ5IGFwcGxpY2FibGUgbGF3IG9yIGFncmVlZCB0byBpbiB3cml0aW5nLCBzb2Z0d2FyZVxyXG4gKiBkaXN0cmlidXRlZCB1bmRlciB0aGUgTGljZW5zZSBpcyBkaXN0cmlidXRlZCBvbiBhbiBcIkFTIElTXCIgQkFTSVMsXHJcbiAqIFdJVEhPVVQgV0FSUkFOVElFUyBPUiBDT05ESVRJT05TIE9GIEFOWSBLSU5ELCBlaXRoZXIgZXhwcmVzcyBvciBpbXBsaWVkLlxyXG4gKiBTZWUgdGhlIExpY2Vuc2UgZm9yIHRoZSBzcGVjaWZpYyBsYW5ndWFnZSBnb3Zlcm5pbmcgcGVybWlzc2lvbnMgYW5kXHJcbiAqIGxpbWl0YXRpb25zIHVuZGVyIHRoZSBMaWNlbnNlLlxyXG4gKi9cclxuY29uc3QgX2Fzc2VydCQyID0gZXhwLl9hc3NlcnQ7XHJcbi8qKiBQbGF0Zm9ybS1hZ25vc3RpYyBwb3B1cC1yZWRpcmVjdCByZXNvbHZlciAqL1xyXG5jbGFzcyBDb21wYXRQb3B1cFJlZGlyZWN0UmVzb2x2ZXIge1xyXG4gICAgY29uc3RydWN0b3IoKSB7XHJcbiAgICAgICAgLy8gQ3JlYXRlIGJvdGggcmVzb2x2ZXJzIGZvciBkeW5hbWljIHJlc29sdXRpb24gbGF0ZXJcclxuICAgICAgICB0aGlzLmJyb3dzZXJSZXNvbHZlciA9IGV4cC5fZ2V0SW5zdGFuY2UoZXhwLmJyb3dzZXJQb3B1cFJlZGlyZWN0UmVzb2x2ZXIpO1xyXG4gICAgICAgIHRoaXMuY29yZG92YVJlc29sdmVyID0gZXhwLl9nZXRJbnN0YW5jZShleHAuY29yZG92YVBvcHVwUmVkaXJlY3RSZXNvbHZlcik7XHJcbiAgICAgICAgLy8gVGhlIGFjdHVhbCByZXNvbHZlciBpbiB1c2U6IGVpdGhlciBicm93c2VyUmVzb2x2ZXIgb3IgY29yZG92YVJlc29sdmVyLlxyXG4gICAgICAgIHRoaXMudW5kZXJseWluZ1Jlc29sdmVyID0gbnVsbDtcclxuICAgICAgICB0aGlzLl9yZWRpcmVjdFBlcnNpc3RlbmNlID0gZXhwLmJyb3dzZXJTZXNzaW9uUGVyc2lzdGVuY2U7XHJcbiAgICAgICAgdGhpcy5fY29tcGxldGVSZWRpcmVjdEZuID0gZXhwLl9nZXRSZWRpcmVjdFJlc3VsdDtcclxuICAgICAgICB0aGlzLl9vdmVycmlkZVJlZGlyZWN0UmVzdWx0ID0gZXhwLl9vdmVycmlkZVJlZGlyZWN0UmVzdWx0O1xyXG4gICAgfVxyXG4gICAgYXN5bmMgX2luaXRpYWxpemUoYXV0aCkge1xyXG4gICAgICAgIGF3YWl0IHRoaXMuc2VsZWN0VW5kZXJseWluZ1Jlc29sdmVyKCk7XHJcbiAgICAgICAgcmV0dXJuIHRoaXMuYXNzZXJ0ZWRVbmRlcmx5aW5nUmVzb2x2ZXIuX2luaXRpYWxpemUoYXV0aCk7XHJcbiAgICB9XHJcbiAgICBhc3luYyBfb3BlblBvcHVwKGF1dGgsIHByb3ZpZGVyLCBhdXRoVHlwZSwgZXZlbnRJZCkge1xyXG4gICAgICAgIGF3YWl0IHRoaXMuc2VsZWN0VW5kZXJseWluZ1Jlc29sdmVyKCk7XHJcbiAgICAgICAgcmV0dXJuIHRoaXMuYXNzZXJ0ZWRVbmRlcmx5aW5nUmVzb2x2ZXIuX29wZW5Qb3B1cChhdXRoLCBwcm92aWRlciwgYXV0aFR5cGUsIGV2ZW50SWQpO1xyXG4gICAgfVxyXG4gICAgYXN5bmMgX29wZW5SZWRpcmVjdChhdXRoLCBwcm92aWRlciwgYXV0aFR5cGUsIGV2ZW50SWQpIHtcclxuICAgICAgICBhd2FpdCB0aGlzLnNlbGVjdFVuZGVybHlpbmdSZXNvbHZlcigpO1xyXG4gICAgICAgIHJldHVybiB0aGlzLmFzc2VydGVkVW5kZXJseWluZ1Jlc29sdmVyLl9vcGVuUmVkaXJlY3QoYXV0aCwgcHJvdmlkZXIsIGF1dGhUeXBlLCBldmVudElkKTtcclxuICAgIH1cclxuICAgIF9pc0lmcmFtZVdlYlN0b3JhZ2VTdXBwb3J0ZWQoYXV0aCwgY2IpIHtcclxuICAgICAgICB0aGlzLmFzc2VydGVkVW5kZXJseWluZ1Jlc29sdmVyLl9pc0lmcmFtZVdlYlN0b3JhZ2VTdXBwb3J0ZWQoYXV0aCwgY2IpO1xyXG4gICAgfVxyXG4gICAgX29yaWdpblZhbGlkYXRpb24oYXV0aCkge1xyXG4gICAgICAgIHJldHVybiB0aGlzLmFzc2VydGVkVW5kZXJseWluZ1Jlc29sdmVyLl9vcmlnaW5WYWxpZGF0aW9uKGF1dGgpO1xyXG4gICAgfVxyXG4gICAgZ2V0IF9zaG91bGRJbml0UHJvYWN0aXZlbHkoKSB7XHJcbiAgICAgICAgcmV0dXJuIF9pc0xpa2VseUNvcmRvdmEoKSB8fCB0aGlzLmJyb3dzZXJSZXNvbHZlci5fc2hvdWxkSW5pdFByb2FjdGl2ZWx5O1xyXG4gICAgfVxyXG4gICAgZ2V0IGFzc2VydGVkVW5kZXJseWluZ1Jlc29sdmVyKCkge1xyXG4gICAgICAgIF9hc3NlcnQkMih0aGlzLnVuZGVybHlpbmdSZXNvbHZlciwgXCJpbnRlcm5hbC1lcnJvclwiIC8qIElOVEVSTkFMX0VSUk9SICovKTtcclxuICAgICAgICByZXR1cm4gdGhpcy51bmRlcmx5aW5nUmVzb2x2ZXI7XHJcbiAgICB9XHJcbiAgICBhc3luYyBzZWxlY3RVbmRlcmx5aW5nUmVzb2x2ZXIoKSB7XHJcbiAgICAgICAgaWYgKHRoaXMudW5kZXJseWluZ1Jlc29sdmVyKSB7XHJcbiAgICAgICAgICAgIHJldHVybjtcclxuICAgICAgICB9XHJcbiAgICAgICAgLy8gV2UgaGF2ZW4ndCB5ZXQgZGV0ZXJtaW5lZCB3aGV0aGVyIG9yIG5vdCB3ZSdyZSBpbiBDb3Jkb3ZhOyBnbyBhaGVhZFxyXG4gICAgICAgIC8vIGFuZCBkZXRlcm1pbmUgdGhhdCBzdGF0ZSBub3cuXHJcbiAgICAgICAgY29uc3QgaXNDb3Jkb3ZhID0gYXdhaXQgX2lzQ29yZG92YSgpO1xyXG4gICAgICAgIHRoaXMudW5kZXJseWluZ1Jlc29sdmVyID0gaXNDb3Jkb3ZhXHJcbiAgICAgICAgICAgID8gdGhpcy5jb3Jkb3ZhUmVzb2x2ZXJcclxuICAgICAgICAgICAgOiB0aGlzLmJyb3dzZXJSZXNvbHZlcjtcclxuICAgIH1cclxufVxuXG4vKipcclxuICogQGxpY2Vuc2VcclxuICogQ29weXJpZ2h0IDIwMjAgR29vZ2xlIExMQ1xyXG4gKlxyXG4gKiBMaWNlbnNlZCB1bmRlciB0aGUgQXBhY2hlIExpY2Vuc2UsIFZlcnNpb24gMi4wICh0aGUgXCJMaWNlbnNlXCIpO1xyXG4gKiB5b3UgbWF5IG5vdCB1c2UgdGhpcyBmaWxlIGV4Y2VwdCBpbiBjb21wbGlhbmNlIHdpdGggdGhlIExpY2Vuc2UuXHJcbiAqIFlvdSBtYXkgb2J0YWluIGEgY29weSBvZiB0aGUgTGljZW5zZSBhdFxyXG4gKlxyXG4gKiAgIGh0dHA6Ly93d3cuYXBhY2hlLm9yZy9saWNlbnNlcy9MSUNFTlNFLTIuMFxyXG4gKlxyXG4gKiBVbmxlc3MgcmVxdWlyZWQgYnkgYXBwbGljYWJsZSBsYXcgb3IgYWdyZWVkIHRvIGluIHdyaXRpbmcsIHNvZnR3YXJlXHJcbiAqIGRpc3RyaWJ1dGVkIHVuZGVyIHRoZSBMaWNlbnNlIGlzIGRpc3RyaWJ1dGVkIG9uIGFuIFwiQVMgSVNcIiBCQVNJUyxcclxuICogV0lUSE9VVCBXQVJSQU5USUVTIE9SIENPTkRJVElPTlMgT0YgQU5ZIEtJTkQsIGVpdGhlciBleHByZXNzIG9yIGltcGxpZWQuXHJcbiAqIFNlZSB0aGUgTGljZW5zZSBmb3IgdGhlIHNwZWNpZmljIGxhbmd1YWdlIGdvdmVybmluZyBwZXJtaXNzaW9ucyBhbmRcclxuICogbGltaXRhdGlvbnMgdW5kZXIgdGhlIExpY2Vuc2UuXHJcbiAqL1xyXG5mdW5jdGlvbiB1bndyYXAob2JqZWN0KSB7XHJcbiAgICByZXR1cm4gb2JqZWN0LnVud3JhcCgpO1xyXG59XHJcbmZ1bmN0aW9uIHdyYXBwZWQob2JqZWN0KSB7XHJcbiAgICByZXR1cm4gb2JqZWN0LndyYXBwZWQoKTtcclxufVxuXG4vKipcclxuICogQGxpY2Vuc2VcclxuICogQ29weXJpZ2h0IDIwMjAgR29vZ2xlIExMQ1xyXG4gKlxyXG4gKiBMaWNlbnNlZCB1bmRlciB0aGUgQXBhY2hlIExpY2Vuc2UsIFZlcnNpb24gMi4wICh0aGUgXCJMaWNlbnNlXCIpO1xyXG4gKiB5b3UgbWF5IG5vdCB1c2UgdGhpcyBmaWxlIGV4Y2VwdCBpbiBjb21wbGlhbmNlIHdpdGggdGhlIExpY2Vuc2UuXHJcbiAqIFlvdSBtYXkgb2J0YWluIGEgY29weSBvZiB0aGUgTGljZW5zZSBhdFxyXG4gKlxyXG4gKiAgIGh0dHA6Ly93d3cuYXBhY2hlLm9yZy9saWNlbnNlcy9MSUNFTlNFLTIuMFxyXG4gKlxyXG4gKiBVbmxlc3MgcmVxdWlyZWQgYnkgYXBwbGljYWJsZSBsYXcgb3IgYWdyZWVkIHRvIGluIHdyaXRpbmcsIHNvZnR3YXJlXHJcbiAqIGRpc3RyaWJ1dGVkIHVuZGVyIHRoZSBMaWNlbnNlIGlzIGRpc3RyaWJ1dGVkIG9uIGFuIFwiQVMgSVNcIiBCQVNJUyxcclxuICogV0lUSE9VVCBXQVJSQU5USUVTIE9SIENPTkRJVElPTlMgT0YgQU5ZIEtJTkQsIGVpdGhlciBleHByZXNzIG9yIGltcGxpZWQuXHJcbiAqIFNlZSB0aGUgTGljZW5zZSBmb3IgdGhlIHNwZWNpZmljIGxhbmd1YWdlIGdvdmVybmluZyBwZXJtaXNzaW9ucyBhbmRcclxuICogbGltaXRhdGlvbnMgdW5kZXIgdGhlIExpY2Vuc2UuXHJcbiAqL1xyXG5mdW5jdGlvbiBjcmVkZW50aWFsRnJvbVJlc3BvbnNlKHVzZXJDcmVkZW50aWFsKSB7XHJcbiAgICByZXR1cm4gY3JlZGVudGlhbEZyb21PYmplY3QodXNlckNyZWRlbnRpYWwpO1xyXG59XHJcbmZ1bmN0aW9uIGF0dGFjaEV4dHJhRXJyb3JGaWVsZHMoYXV0aCwgZSkge1xyXG4gICAgdmFyIF9hO1xyXG4gICAgLy8gVGhlIHJlc3BvbnNlIGNvbnRhaW5zIGFsbCBmaWVsZHMgZnJvbSB0aGUgc2VydmVyIHdoaWNoIG1heSBvciBtYXkgbm90XHJcbiAgICAvLyBhY3R1YWxseSBtYXRjaCB0aGUgdW5kZXJseWluZyB0eXBlXHJcbiAgICBjb25zdCByZXNwb25zZSA9IChfYSA9IGUuY3VzdG9tRGF0YSkgPT09IG51bGwgfHwgX2EgPT09IHZvaWQgMCA/IHZvaWQgMCA6IF9hLl90b2tlblJlc3BvbnNlO1xyXG4gICAgaWYgKGUuY29kZSA9PT0gJ2F1dGgvbXVsdGktZmFjdG9yLWF1dGgtcmVxdWlyZWQnKSB7XHJcbiAgICAgICAgY29uc3QgbWZhRXJyID0gZTtcclxuICAgICAgICBtZmFFcnIucmVzb2x2ZXIgPSBuZXcgTXVsdGlGYWN0b3JSZXNvbHZlcihhdXRoLCBleHAuZ2V0TXVsdGlGYWN0b3JSZXNvbHZlcihhdXRoLCBlKSk7XHJcbiAgICB9XHJcbiAgICBlbHNlIGlmIChyZXNwb25zZSkge1xyXG4gICAgICAgIGNvbnN0IGNyZWRlbnRpYWwgPSBjcmVkZW50aWFsRnJvbU9iamVjdChlKTtcclxuICAgICAgICBjb25zdCBjcmVkRXJyID0gZTtcclxuICAgICAgICBpZiAoY3JlZGVudGlhbCkge1xyXG4gICAgICAgICAgICBjcmVkRXJyLmNyZWRlbnRpYWwgPSBjcmVkZW50aWFsO1xyXG4gICAgICAgICAgICBjcmVkRXJyLnRlbmFudElkID0gcmVzcG9uc2UudGVuYW50SWQgfHwgdW5kZWZpbmVkO1xyXG4gICAgICAgICAgICBjcmVkRXJyLmVtYWlsID0gcmVzcG9uc2UuZW1haWwgfHwgdW5kZWZpbmVkO1xyXG4gICAgICAgICAgICBjcmVkRXJyLnBob25lTnVtYmVyID0gcmVzcG9uc2UucGhvbmVOdW1iZXIgfHwgdW5kZWZpbmVkO1xyXG4gICAgICAgIH1cclxuICAgIH1cclxufVxyXG5mdW5jdGlvbiBjcmVkZW50aWFsRnJvbU9iamVjdChvYmplY3QpIHtcclxuICAgIGNvbnN0IHsgX3Rva2VuUmVzcG9uc2UgfSA9IChvYmplY3QgaW5zdGFuY2VvZiBGaXJlYmFzZUVycm9yID8gb2JqZWN0LmN1c3RvbURhdGEgOiBvYmplY3QpO1xyXG4gICAgaWYgKCFfdG9rZW5SZXNwb25zZSkge1xyXG4gICAgICAgIHJldHVybiBudWxsO1xyXG4gICAgfVxyXG4gICAgLy8gSGFuZGxlIHBob25lIEF1dGggY3JlZGVudGlhbCByZXNwb25zZXMsIGFzIHRoZXkgaGF2ZSBhIGRpZmZlcmVudCBmb3JtYXRcclxuICAgIC8vIGZyb20gb3RoZXIgYmFja2VuZCByZXNwb25zZXMgKGkuZS4gbm8gcHJvdmlkZXJJZCkuIFRoaXMgaXMgYWxzbyBvbmx5IHRoZVxyXG4gICAgLy8gY2FzZSBmb3IgdXNlciBjcmVkZW50aWFscyAoZG9lcyBub3Qgd29yayBmb3IgZXJyb3JzKS5cclxuICAgIGlmICghKG9iamVjdCBpbnN0YW5jZW9mIEZpcmViYXNlRXJyb3IpKSB7XHJcbiAgICAgICAgaWYgKCd0ZW1wb3JhcnlQcm9vZicgaW4gX3Rva2VuUmVzcG9uc2UgJiYgJ3Bob25lTnVtYmVyJyBpbiBfdG9rZW5SZXNwb25zZSkge1xyXG4gICAgICAgICAgICByZXR1cm4gZXhwLlBob25lQXV0aFByb3ZpZGVyLmNyZWRlbnRpYWxGcm9tUmVzdWx0KG9iamVjdCk7XHJcbiAgICAgICAgfVxyXG4gICAgfVxyXG4gICAgY29uc3QgcHJvdmlkZXJJZCA9IF90b2tlblJlc3BvbnNlLnByb3ZpZGVySWQ7XHJcbiAgICAvLyBFbWFpbCBhbmQgcGFzc3dvcmQgaXMgbm90IHN1cHBvcnRlZCBhcyB0aGVyZSBpcyBubyBzaXR1YXRpb24gd2hlcmUgdGhlXHJcbiAgICAvLyBzZXJ2ZXIgd291bGQgcmV0dXJuIHRoZSBwYXNzd29yZCB0byB0aGUgY2xpZW50LlxyXG4gICAgaWYgKCFwcm92aWRlcklkIHx8IHByb3ZpZGVySWQgPT09IGV4cC5Qcm92aWRlcklkLlBBU1NXT1JEKSB7XHJcbiAgICAgICAgcmV0dXJuIG51bGw7XHJcbiAgICB9XHJcbiAgICBsZXQgcHJvdmlkZXI7XHJcbiAgICBzd2l0Y2ggKHByb3ZpZGVySWQpIHtcclxuICAgICAgICBjYXNlIGV4cC5Qcm92aWRlcklkLkdPT0dMRTpcclxuICAgICAgICAgICAgcHJvdmlkZXIgPSBleHAuR29vZ2xlQXV0aFByb3ZpZGVyO1xyXG4gICAgICAgICAgICBicmVhaztcclxuICAgICAgICBjYXNlIGV4cC5Qcm92aWRlcklkLkZBQ0VCT09LOlxyXG4gICAgICAgICAgICBwcm92aWRlciA9IGV4cC5GYWNlYm9va0F1dGhQcm92aWRlcjtcclxuICAgICAgICAgICAgYnJlYWs7XHJcbiAgICAgICAgY2FzZSBleHAuUHJvdmlkZXJJZC5HSVRIVUI6XHJcbiAgICAgICAgICAgIHByb3ZpZGVyID0gZXhwLkdpdGh1YkF1dGhQcm92aWRlcjtcclxuICAgICAgICAgICAgYnJlYWs7XHJcbiAgICAgICAgY2FzZSBleHAuUHJvdmlkZXJJZC5UV0lUVEVSOlxyXG4gICAgICAgICAgICBwcm92aWRlciA9IGV4cC5Ud2l0dGVyQXV0aFByb3ZpZGVyO1xyXG4gICAgICAgICAgICBicmVhaztcclxuICAgICAgICBkZWZhdWx0OlxyXG4gICAgICAgICAgICBjb25zdCB7IG9hdXRoSWRUb2tlbiwgb2F1dGhBY2Nlc3NUb2tlbiwgb2F1dGhUb2tlblNlY3JldCwgcGVuZGluZ1Rva2VuLCBub25jZSB9ID0gX3Rva2VuUmVzcG9uc2U7XHJcbiAgICAgICAgICAgIGlmICghb2F1dGhBY2Nlc3NUb2tlbiAmJlxyXG4gICAgICAgICAgICAgICAgIW9hdXRoVG9rZW5TZWNyZXQgJiZcclxuICAgICAgICAgICAgICAgICFvYXV0aElkVG9rZW4gJiZcclxuICAgICAgICAgICAgICAgICFwZW5kaW5nVG9rZW4pIHtcclxuICAgICAgICAgICAgICAgIHJldHVybiBudWxsO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIC8vIFRPRE8oYXZvbGtvdmkpOiB1bmNvbW1lbnQgdGhpcyBhbmQgZ2V0IGl0IHdvcmtpbmcgd2l0aCBTQU1MICYgT0lEQ1xyXG4gICAgICAgICAgICBpZiAocGVuZGluZ1Rva2VuKSB7XHJcbiAgICAgICAgICAgICAgICBpZiAocHJvdmlkZXJJZC5zdGFydHNXaXRoKCdzYW1sLicpKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgcmV0dXJuIGV4cC5TQU1MQXV0aENyZWRlbnRpYWwuX2NyZWF0ZShwcm92aWRlcklkLCBwZW5kaW5nVG9rZW4pO1xyXG4gICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgZWxzZSB7XHJcbiAgICAgICAgICAgICAgICAgICAgLy8gT0lEQyBhbmQgbm9uLWRlZmF1bHQgcHJvdmlkZXJzIGV4Y2x1ZGluZyBUd2l0dGVyLlxyXG4gICAgICAgICAgICAgICAgICAgIHJldHVybiBleHAuT0F1dGhDcmVkZW50aWFsLl9mcm9tUGFyYW1zKHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgcHJvdmlkZXJJZCxcclxuICAgICAgICAgICAgICAgICAgICAgICAgc2lnbkluTWV0aG9kOiBwcm92aWRlcklkLFxyXG4gICAgICAgICAgICAgICAgICAgICAgICBwZW5kaW5nVG9rZW4sXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGlkVG9rZW46IG9hdXRoSWRUb2tlbixcclxuICAgICAgICAgICAgICAgICAgICAgICAgYWNjZXNzVG9rZW46IG9hdXRoQWNjZXNzVG9rZW5cclxuICAgICAgICAgICAgICAgICAgICB9KTtcclxuICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICByZXR1cm4gbmV3IGV4cC5PQXV0aFByb3ZpZGVyKHByb3ZpZGVySWQpLmNyZWRlbnRpYWwoe1xyXG4gICAgICAgICAgICAgICAgaWRUb2tlbjogb2F1dGhJZFRva2VuLFxyXG4gICAgICAgICAgICAgICAgYWNjZXNzVG9rZW46IG9hdXRoQWNjZXNzVG9rZW4sXHJcbiAgICAgICAgICAgICAgICByYXdOb25jZTogbm9uY2VcclxuICAgICAgICAgICAgfSk7XHJcbiAgICB9XHJcbiAgICByZXR1cm4gb2JqZWN0IGluc3RhbmNlb2YgRmlyZWJhc2VFcnJvclxyXG4gICAgICAgID8gcHJvdmlkZXIuY3JlZGVudGlhbEZyb21FcnJvcihvYmplY3QpXHJcbiAgICAgICAgOiBwcm92aWRlci5jcmVkZW50aWFsRnJvbVJlc3VsdChvYmplY3QpO1xyXG59XHJcbmZ1bmN0aW9uIGNvbnZlcnRDcmVkZW50aWFsKGF1dGgsIGNyZWRlbnRpYWxQcm9taXNlKSB7XHJcbiAgICByZXR1cm4gY3JlZGVudGlhbFByb21pc2VcclxuICAgICAgICAuY2F0Y2goZSA9PiB7XHJcbiAgICAgICAgaWYgKGUgaW5zdGFuY2VvZiBGaXJlYmFzZUVycm9yKSB7XHJcbiAgICAgICAgICAgIGF0dGFjaEV4dHJhRXJyb3JGaWVsZHMoYXV0aCwgZSk7XHJcbiAgICAgICAgfVxyXG4gICAgICAgIHRocm93IGU7XHJcbiAgICB9KVxyXG4gICAgICAgIC50aGVuKGNyZWRlbnRpYWwgPT4ge1xyXG4gICAgICAgIGNvbnN0IG9wZXJhdGlvblR5cGUgPSBjcmVkZW50aWFsLm9wZXJhdGlvblR5cGU7XHJcbiAgICAgICAgY29uc3QgdXNlciA9IGNyZWRlbnRpYWwudXNlcjtcclxuICAgICAgICByZXR1cm4ge1xyXG4gICAgICAgICAgICBvcGVyYXRpb25UeXBlLFxyXG4gICAgICAgICAgICBjcmVkZW50aWFsOiBjcmVkZW50aWFsRnJvbVJlc3BvbnNlKGNyZWRlbnRpYWwpLFxyXG4gICAgICAgICAgICBhZGRpdGlvbmFsVXNlckluZm86IGV4cC5nZXRBZGRpdGlvbmFsVXNlckluZm8oY3JlZGVudGlhbCksXHJcbiAgICAgICAgICAgIHVzZXI6IFVzZXIuZ2V0T3JDcmVhdGUodXNlcilcclxuICAgICAgICB9O1xyXG4gICAgfSk7XHJcbn1cclxuYXN5bmMgZnVuY3Rpb24gY29udmVydENvbmZpcm1hdGlvblJlc3VsdChhdXRoLCBjb25maXJtYXRpb25SZXN1bHRQcm9taXNlKSB7XHJcbiAgICBjb25zdCBjb25maXJtYXRpb25SZXN1bHRFeHAgPSBhd2FpdCBjb25maXJtYXRpb25SZXN1bHRQcm9taXNlO1xyXG4gICAgcmV0dXJuIHtcclxuICAgICAgICB2ZXJpZmljYXRpb25JZDogY29uZmlybWF0aW9uUmVzdWx0RXhwLnZlcmlmaWNhdGlvbklkLFxyXG4gICAgICAgIGNvbmZpcm06ICh2ZXJpZmljYXRpb25Db2RlKSA9PiBjb252ZXJ0Q3JlZGVudGlhbChhdXRoLCBjb25maXJtYXRpb25SZXN1bHRFeHAuY29uZmlybSh2ZXJpZmljYXRpb25Db2RlKSlcclxuICAgIH07XHJcbn1cclxuY2xhc3MgTXVsdGlGYWN0b3JSZXNvbHZlciB7XHJcbiAgICBjb25zdHJ1Y3RvcihhdXRoLCByZXNvbHZlcikge1xyXG4gICAgICAgIHRoaXMucmVzb2x2ZXIgPSByZXNvbHZlcjtcclxuICAgICAgICB0aGlzLmF1dGggPSB3cmFwcGVkKGF1dGgpO1xyXG4gICAgfVxyXG4gICAgZ2V0IHNlc3Npb24oKSB7XHJcbiAgICAgICAgcmV0dXJuIHRoaXMucmVzb2x2ZXIuc2Vzc2lvbjtcclxuICAgIH1cclxuICAgIGdldCBoaW50cygpIHtcclxuICAgICAgICByZXR1cm4gdGhpcy5yZXNvbHZlci5oaW50cztcclxuICAgIH1cclxuICAgIHJlc29sdmVTaWduSW4oYXNzZXJ0aW9uKSB7XHJcbiAgICAgICAgcmV0dXJuIGNvbnZlcnRDcmVkZW50aWFsKHVud3JhcCh0aGlzLmF1dGgpLCB0aGlzLnJlc29sdmVyLnJlc29sdmVTaWduSW4oYXNzZXJ0aW9uKSk7XHJcbiAgICB9XHJcbn1cblxuLyoqXHJcbiAqIEBsaWNlbnNlXHJcbiAqIENvcHlyaWdodCAyMDIwIEdvb2dsZSBMTENcclxuICpcclxuICogTGljZW5zZWQgdW5kZXIgdGhlIEFwYWNoZSBMaWNlbnNlLCBWZXJzaW9uIDIuMCAodGhlIFwiTGljZW5zZVwiKTtcclxuICogeW91IG1heSBub3QgdXNlIHRoaXMgZmlsZSBleGNlcHQgaW4gY29tcGxpYW5jZSB3aXRoIHRoZSBMaWNlbnNlLlxyXG4gKiBZb3UgbWF5IG9idGFpbiBhIGNvcHkgb2YgdGhlIExpY2Vuc2UgYXRcclxuICpcclxuICogICBodHRwOi8vd3d3LmFwYWNoZS5vcmcvbGljZW5zZXMvTElDRU5TRS0yLjBcclxuICpcclxuICogVW5sZXNzIHJlcXVpcmVkIGJ5IGFwcGxpY2FibGUgbGF3IG9yIGFncmVlZCB0byBpbiB3cml0aW5nLCBzb2Z0d2FyZVxyXG4gKiBkaXN0cmlidXRlZCB1bmRlciB0aGUgTGljZW5zZSBpcyBkaXN0cmlidXRlZCBvbiBhbiBcIkFTIElTXCIgQkFTSVMsXHJcbiAqIFdJVEhPVVQgV0FSUkFOVElFUyBPUiBDT05ESVRJT05TIE9GIEFOWSBLSU5ELCBlaXRoZXIgZXhwcmVzcyBvciBpbXBsaWVkLlxyXG4gKiBTZWUgdGhlIExpY2Vuc2UgZm9yIHRoZSBzcGVjaWZpYyBsYW5ndWFnZSBnb3Zlcm5pbmcgcGVybWlzc2lvbnMgYW5kXHJcbiAqIGxpbWl0YXRpb25zIHVuZGVyIHRoZSBMaWNlbnNlLlxyXG4gKi9cclxuY2xhc3MgVXNlciB7XHJcbiAgICBjb25zdHJ1Y3RvcihfZGVsZWdhdGUpIHtcclxuICAgICAgICB0aGlzLl9kZWxlZ2F0ZSA9IF9kZWxlZ2F0ZTtcclxuICAgICAgICB0aGlzLm11bHRpRmFjdG9yID0gZXhwLm11bHRpRmFjdG9yKF9kZWxlZ2F0ZSk7XHJcbiAgICB9XHJcbiAgICBzdGF0aWMgZ2V0T3JDcmVhdGUodXNlcikge1xyXG4gICAgICAgIGlmICghVXNlci5VU0VSX01BUC5oYXModXNlcikpIHtcclxuICAgICAgICAgICAgVXNlci5VU0VSX01BUC5zZXQodXNlciwgbmV3IFVzZXIodXNlcikpO1xyXG4gICAgICAgIH1cclxuICAgICAgICByZXR1cm4gVXNlci5VU0VSX01BUC5nZXQodXNlcik7XHJcbiAgICB9XHJcbiAgICBkZWxldGUoKSB7XHJcbiAgICAgICAgcmV0dXJuIHRoaXMuX2RlbGVnYXRlLmRlbGV0ZSgpO1xyXG4gICAgfVxyXG4gICAgcmVsb2FkKCkge1xyXG4gICAgICAgIHJldHVybiB0aGlzLl9kZWxlZ2F0ZS5yZWxvYWQoKTtcclxuICAgIH1cclxuICAgIHRvSlNPTigpIHtcclxuICAgICAgICByZXR1cm4gdGhpcy5fZGVsZWdhdGUudG9KU09OKCk7XHJcbiAgICB9XHJcbiAgICBnZXRJZFRva2VuUmVzdWx0KGZvcmNlUmVmcmVzaCkge1xyXG4gICAgICAgIHJldHVybiB0aGlzLl9kZWxlZ2F0ZS5nZXRJZFRva2VuUmVzdWx0KGZvcmNlUmVmcmVzaCk7XHJcbiAgICB9XHJcbiAgICBnZXRJZFRva2VuKGZvcmNlUmVmcmVzaCkge1xyXG4gICAgICAgIHJldHVybiB0aGlzLl9kZWxlZ2F0ZS5nZXRJZFRva2VuKGZvcmNlUmVmcmVzaCk7XHJcbiAgICB9XHJcbiAgICBsaW5rQW5kUmV0cmlldmVEYXRhV2l0aENyZWRlbnRpYWwoY3JlZGVudGlhbCkge1xyXG4gICAgICAgIHJldHVybiB0aGlzLmxpbmtXaXRoQ3JlZGVudGlhbChjcmVkZW50aWFsKTtcclxuICAgIH1cclxuICAgIGFzeW5jIGxpbmtXaXRoQ3JlZGVudGlhbChjcmVkZW50aWFsKSB7XHJcbiAgICAgICAgcmV0dXJuIGNvbnZlcnRDcmVkZW50aWFsKHRoaXMuYXV0aCwgZXhwLmxpbmtXaXRoQ3JlZGVudGlhbCh0aGlzLl9kZWxlZ2F0ZSwgY3JlZGVudGlhbCkpO1xyXG4gICAgfVxyXG4gICAgYXN5bmMgbGlua1dpdGhQaG9uZU51bWJlcihwaG9uZU51bWJlciwgYXBwbGljYXRpb25WZXJpZmllcikge1xyXG4gICAgICAgIHJldHVybiBjb252ZXJ0Q29uZmlybWF0aW9uUmVzdWx0KHRoaXMuYXV0aCwgZXhwLmxpbmtXaXRoUGhvbmVOdW1iZXIodGhpcy5fZGVsZWdhdGUsIHBob25lTnVtYmVyLCBhcHBsaWNhdGlvblZlcmlmaWVyKSk7XHJcbiAgICB9XHJcbiAgICBhc3luYyBsaW5rV2l0aFBvcHVwKHByb3ZpZGVyKSB7XHJcbiAgICAgICAgcmV0dXJuIGNvbnZlcnRDcmVkZW50aWFsKHRoaXMuYXV0aCwgZXhwLmxpbmtXaXRoUG9wdXAodGhpcy5fZGVsZWdhdGUsIHByb3ZpZGVyLCBDb21wYXRQb3B1cFJlZGlyZWN0UmVzb2x2ZXIpKTtcclxuICAgIH1cclxuICAgIGFzeW5jIGxpbmtXaXRoUmVkaXJlY3QocHJvdmlkZXIpIHtcclxuICAgICAgICBhd2FpdCBfc2F2ZVBlcnNpc3RlbmNlRm9yUmVkaXJlY3QoZXhwLl9jYXN0QXV0aCh0aGlzLmF1dGgpKTtcclxuICAgICAgICByZXR1cm4gZXhwLmxpbmtXaXRoUmVkaXJlY3QodGhpcy5fZGVsZWdhdGUsIHByb3ZpZGVyLCBDb21wYXRQb3B1cFJlZGlyZWN0UmVzb2x2ZXIpO1xyXG4gICAgfVxyXG4gICAgcmVhdXRoZW50aWNhdGVBbmRSZXRyaWV2ZURhdGFXaXRoQ3JlZGVudGlhbChjcmVkZW50aWFsKSB7XHJcbiAgICAgICAgcmV0dXJuIHRoaXMucmVhdXRoZW50aWNhdGVXaXRoQ3JlZGVudGlhbChjcmVkZW50aWFsKTtcclxuICAgIH1cclxuICAgIGFzeW5jIHJlYXV0aGVudGljYXRlV2l0aENyZWRlbnRpYWwoY3JlZGVudGlhbCkge1xyXG4gICAgICAgIHJldHVybiBjb252ZXJ0Q3JlZGVudGlhbCh0aGlzLmF1dGgsIGV4cC5yZWF1dGhlbnRpY2F0ZVdpdGhDcmVkZW50aWFsKHRoaXMuX2RlbGVnYXRlLCBjcmVkZW50aWFsKSk7XHJcbiAgICB9XHJcbiAgICByZWF1dGhlbnRpY2F0ZVdpdGhQaG9uZU51bWJlcihwaG9uZU51bWJlciwgYXBwbGljYXRpb25WZXJpZmllcikge1xyXG4gICAgICAgIHJldHVybiBjb252ZXJ0Q29uZmlybWF0aW9uUmVzdWx0KHRoaXMuYXV0aCwgZXhwLnJlYXV0aGVudGljYXRlV2l0aFBob25lTnVtYmVyKHRoaXMuX2RlbGVnYXRlLCBwaG9uZU51bWJlciwgYXBwbGljYXRpb25WZXJpZmllcikpO1xyXG4gICAgfVxyXG4gICAgcmVhdXRoZW50aWNhdGVXaXRoUG9wdXAocHJvdmlkZXIpIHtcclxuICAgICAgICByZXR1cm4gY29udmVydENyZWRlbnRpYWwodGhpcy5hdXRoLCBleHAucmVhdXRoZW50aWNhdGVXaXRoUG9wdXAodGhpcy5fZGVsZWdhdGUsIHByb3ZpZGVyLCBDb21wYXRQb3B1cFJlZGlyZWN0UmVzb2x2ZXIpKTtcclxuICAgIH1cclxuICAgIGFzeW5jIHJlYXV0aGVudGljYXRlV2l0aFJlZGlyZWN0KHByb3ZpZGVyKSB7XHJcbiAgICAgICAgYXdhaXQgX3NhdmVQZXJzaXN0ZW5jZUZvclJlZGlyZWN0KGV4cC5fY2FzdEF1dGgodGhpcy5hdXRoKSk7XHJcbiAgICAgICAgcmV0dXJuIGV4cC5yZWF1dGhlbnRpY2F0ZVdpdGhSZWRpcmVjdCh0aGlzLl9kZWxlZ2F0ZSwgcHJvdmlkZXIsIENvbXBhdFBvcHVwUmVkaXJlY3RSZXNvbHZlcik7XHJcbiAgICB9XHJcbiAgICBzZW5kRW1haWxWZXJpZmljYXRpb24oYWN0aW9uQ29kZVNldHRpbmdzKSB7XHJcbiAgICAgICAgcmV0dXJuIGV4cC5zZW5kRW1haWxWZXJpZmljYXRpb24odGhpcy5fZGVsZWdhdGUsIGFjdGlvbkNvZGVTZXR0aW5ncyk7XHJcbiAgICB9XHJcbiAgICBhc3luYyB1bmxpbmsocHJvdmlkZXJJZCkge1xyXG4gICAgICAgIGF3YWl0IGV4cC51bmxpbmsodGhpcy5fZGVsZWdhdGUsIHByb3ZpZGVySWQpO1xyXG4gICAgICAgIHJldHVybiB0aGlzO1xyXG4gICAgfVxyXG4gICAgdXBkYXRlRW1haWwobmV3RW1haWwpIHtcclxuICAgICAgICByZXR1cm4gZXhwLnVwZGF0ZUVtYWlsKHRoaXMuX2RlbGVnYXRlLCBuZXdFbWFpbCk7XHJcbiAgICB9XHJcbiAgICB1cGRhdGVQYXNzd29yZChuZXdQYXNzd29yZCkge1xyXG4gICAgICAgIHJldHVybiBleHAudXBkYXRlUGFzc3dvcmQodGhpcy5fZGVsZWdhdGUsIG5ld1Bhc3N3b3JkKTtcclxuICAgIH1cclxuICAgIHVwZGF0ZVBob25lTnVtYmVyKHBob25lQ3JlZGVudGlhbCkge1xyXG4gICAgICAgIHJldHVybiBleHAudXBkYXRlUGhvbmVOdW1iZXIodGhpcy5fZGVsZWdhdGUsIHBob25lQ3JlZGVudGlhbCk7XHJcbiAgICB9XHJcbiAgICB1cGRhdGVQcm9maWxlKHByb2ZpbGUpIHtcclxuICAgICAgICByZXR1cm4gZXhwLnVwZGF0ZVByb2ZpbGUodGhpcy5fZGVsZWdhdGUsIHByb2ZpbGUpO1xyXG4gICAgfVxyXG4gICAgdmVyaWZ5QmVmb3JlVXBkYXRlRW1haWwobmV3RW1haWwsIGFjdGlvbkNvZGVTZXR0aW5ncykge1xyXG4gICAgICAgIHJldHVybiBleHAudmVyaWZ5QmVmb3JlVXBkYXRlRW1haWwodGhpcy5fZGVsZWdhdGUsIG5ld0VtYWlsLCBhY3Rpb25Db2RlU2V0dGluZ3MpO1xyXG4gICAgfVxyXG4gICAgZ2V0IGVtYWlsVmVyaWZpZWQoKSB7XHJcbiAgICAgICAgcmV0dXJuIHRoaXMuX2RlbGVnYXRlLmVtYWlsVmVyaWZpZWQ7XHJcbiAgICB9XHJcbiAgICBnZXQgaXNBbm9ueW1vdXMoKSB7XHJcbiAgICAgICAgcmV0dXJuIHRoaXMuX2RlbGVnYXRlLmlzQW5vbnltb3VzO1xyXG4gICAgfVxyXG4gICAgZ2V0IG1ldGFkYXRhKCkge1xyXG4gICAgICAgIHJldHVybiB0aGlzLl9kZWxlZ2F0ZS5tZXRhZGF0YTtcclxuICAgIH1cclxuICAgIGdldCBwaG9uZU51bWJlcigpIHtcclxuICAgICAgICByZXR1cm4gdGhpcy5fZGVsZWdhdGUucGhvbmVOdW1iZXI7XHJcbiAgICB9XHJcbiAgICBnZXQgcHJvdmlkZXJEYXRhKCkge1xyXG4gICAgICAgIHJldHVybiB0aGlzLl9kZWxlZ2F0ZS5wcm92aWRlckRhdGE7XHJcbiAgICB9XHJcbiAgICBnZXQgcmVmcmVzaFRva2VuKCkge1xyXG4gICAgICAgIHJldHVybiB0aGlzLl9kZWxlZ2F0ZS5yZWZyZXNoVG9rZW47XHJcbiAgICB9XHJcbiAgICBnZXQgdGVuYW50SWQoKSB7XHJcbiAgICAgICAgcmV0dXJuIHRoaXMuX2RlbGVnYXRlLnRlbmFudElkO1xyXG4gICAgfVxyXG4gICAgZ2V0IGRpc3BsYXlOYW1lKCkge1xyXG4gICAgICAgIHJldHVybiB0aGlzLl9kZWxlZ2F0ZS5kaXNwbGF5TmFtZTtcclxuICAgIH1cclxuICAgIGdldCBlbWFpbCgpIHtcclxuICAgICAgICByZXR1cm4gdGhpcy5fZGVsZWdhdGUuZW1haWw7XHJcbiAgICB9XHJcbiAgICBnZXQgcGhvdG9VUkwoKSB7XHJcbiAgICAgICAgcmV0dXJuIHRoaXMuX2RlbGVnYXRlLnBob3RvVVJMO1xyXG4gICAgfVxyXG4gICAgZ2V0IHByb3ZpZGVySWQoKSB7XHJcbiAgICAgICAgcmV0dXJuIHRoaXMuX2RlbGVnYXRlLnByb3ZpZGVySWQ7XHJcbiAgICB9XHJcbiAgICBnZXQgdWlkKCkge1xyXG4gICAgICAgIHJldHVybiB0aGlzLl9kZWxlZ2F0ZS51aWQ7XHJcbiAgICB9XHJcbiAgICBnZXQgYXV0aCgpIHtcclxuICAgICAgICByZXR1cm4gdGhpcy5fZGVsZWdhdGUuYXV0aDtcclxuICAgIH1cclxufVxyXG4vLyBNYWludGFpbiBhIG1hcCBzbyB0aGF0IHRoZXJlJ3MgYWx3YXlzIGEgMToxIG1hcHBpbmcgYmV0d2VlbiBuZXcgVXNlciBhbmRcclxuLy8gbGVnYWN5IGNvbXBhdCB1c2Vyc1xyXG5Vc2VyLlVTRVJfTUFQID0gbmV3IFdlYWtNYXAoKTtcblxuLyoqXHJcbiAqIEBsaWNlbnNlXHJcbiAqIENvcHlyaWdodCAyMDIwIEdvb2dsZSBMTENcclxuICpcclxuICogTGljZW5zZWQgdW5kZXIgdGhlIEFwYWNoZSBMaWNlbnNlLCBWZXJzaW9uIDIuMCAodGhlIFwiTGljZW5zZVwiKTtcclxuICogeW91IG1heSBub3QgdXNlIHRoaXMgZmlsZSBleGNlcHQgaW4gY29tcGxpYW5jZSB3aXRoIHRoZSBMaWNlbnNlLlxyXG4gKiBZb3UgbWF5IG9idGFpbiBhIGNvcHkgb2YgdGhlIExpY2Vuc2UgYXRcclxuICpcclxuICogICBodHRwOi8vd3d3LmFwYWNoZS5vcmcvbGljZW5zZXMvTElDRU5TRS0yLjBcclxuICpcclxuICogVW5sZXNzIHJlcXVpcmVkIGJ5IGFwcGxpY2FibGUgbGF3IG9yIGFncmVlZCB0byBpbiB3cml0aW5nLCBzb2Z0d2FyZVxyXG4gKiBkaXN0cmlidXRlZCB1bmRlciB0aGUgTGljZW5zZSBpcyBkaXN0cmlidXRlZCBvbiBhbiBcIkFTIElTXCIgQkFTSVMsXHJcbiAqIFdJVEhPVVQgV0FSUkFOVElFUyBPUiBDT05ESVRJT05TIE9GIEFOWSBLSU5ELCBlaXRoZXIgZXhwcmVzcyBvciBpbXBsaWVkLlxyXG4gKiBTZWUgdGhlIExpY2Vuc2UgZm9yIHRoZSBzcGVjaWZpYyBsYW5ndWFnZSBnb3Zlcm5pbmcgcGVybWlzc2lvbnMgYW5kXHJcbiAqIGxpbWl0YXRpb25zIHVuZGVyIHRoZSBMaWNlbnNlLlxyXG4gKi9cclxuY29uc3QgX2Fzc2VydCQxID0gZXhwLl9hc3NlcnQ7XHJcbmNsYXNzIEF1dGgge1xyXG4gICAgY29uc3RydWN0b3IoYXBwLCBwcm92aWRlcikge1xyXG4gICAgICAgIHRoaXMuYXBwID0gYXBwO1xyXG4gICAgICAgIGlmIChwcm92aWRlci5pc0luaXRpYWxpemVkKCkpIHtcclxuICAgICAgICAgICAgdGhpcy5fZGVsZWdhdGUgPSBwcm92aWRlci5nZXRJbW1lZGlhdGUoKTtcclxuICAgICAgICAgICAgdGhpcy5saW5rVW5kZXJseWluZ0F1dGgoKTtcclxuICAgICAgICAgICAgcmV0dXJuO1xyXG4gICAgICAgIH1cclxuICAgICAgICBjb25zdCB7IGFwaUtleSB9ID0gYXBwLm9wdGlvbnM7XHJcbiAgICAgICAgLy8gVE9ETzogcGxhdGZvcm0gbmVlZHMgdG8gYmUgZGV0ZXJtaW5lZCB1c2luZyBoZXVyaXN0aWNzXHJcbiAgICAgICAgX2Fzc2VydCQxKGFwaUtleSwgXCJpbnZhbGlkLWFwaS1rZXlcIiAvKiBJTlZBTElEX0FQSV9LRVkgKi8sIHtcclxuICAgICAgICAgICAgYXBwTmFtZTogYXBwLm5hbWVcclxuICAgICAgICB9KTtcclxuICAgICAgICAvLyBUT0RPOiBwbGF0Zm9ybSBuZWVkcyB0byBiZSBkZXRlcm1pbmVkIHVzaW5nIGhldXJpc3RpY3NcclxuICAgICAgICBfYXNzZXJ0JDEoYXBpS2V5LCBcImludmFsaWQtYXBpLWtleVwiIC8qIElOVkFMSURfQVBJX0tFWSAqLywge1xyXG4gICAgICAgICAgICBhcHBOYW1lOiBhcHAubmFtZVxyXG4gICAgICAgIH0pO1xyXG4gICAgICAgIC8vIE9ubHkgdXNlIGEgcG9wdXAvcmVkaXJlY3QgcmVzb2x2ZXIgaW4gYnJvd3NlciBlbnZpcm9ubWVudHNcclxuICAgICAgICBjb25zdCByZXNvbHZlciA9IHR5cGVvZiB3aW5kb3cgIT09ICd1bmRlZmluZWQnID8gQ29tcGF0UG9wdXBSZWRpcmVjdFJlc29sdmVyIDogdW5kZWZpbmVkO1xyXG4gICAgICAgIHRoaXMuX2RlbGVnYXRlID0gcHJvdmlkZXIuaW5pdGlhbGl6ZSh7XHJcbiAgICAgICAgICAgIG9wdGlvbnM6IHtcclxuICAgICAgICAgICAgICAgIHBlcnNpc3RlbmNlOiBidWlsZFBlcnNpc3RlbmNlSGllcmFyY2h5KGFwaUtleSwgYXBwLm5hbWUpLFxyXG4gICAgICAgICAgICAgICAgcG9wdXBSZWRpcmVjdFJlc29sdmVyOiByZXNvbHZlclxyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgfSk7XHJcbiAgICAgICAgdGhpcy5fZGVsZWdhdGUuX3VwZGF0ZUVycm9yTWFwKGV4cC5kZWJ1Z0Vycm9yTWFwKTtcclxuICAgICAgICB0aGlzLmxpbmtVbmRlcmx5aW5nQXV0aCgpO1xyXG4gICAgfVxyXG4gICAgZ2V0IGVtdWxhdG9yQ29uZmlnKCkge1xyXG4gICAgICAgIHJldHVybiB0aGlzLl9kZWxlZ2F0ZS5lbXVsYXRvckNvbmZpZztcclxuICAgIH1cclxuICAgIGdldCBjdXJyZW50VXNlcigpIHtcclxuICAgICAgICBpZiAoIXRoaXMuX2RlbGVnYXRlLmN1cnJlbnRVc2VyKSB7XHJcbiAgICAgICAgICAgIHJldHVybiBudWxsO1xyXG4gICAgICAgIH1cclxuICAgICAgICByZXR1cm4gVXNlci5nZXRPckNyZWF0ZSh0aGlzLl9kZWxlZ2F0ZS5jdXJyZW50VXNlcik7XHJcbiAgICB9XHJcbiAgICBnZXQgbGFuZ3VhZ2VDb2RlKCkge1xyXG4gICAgICAgIHJldHVybiB0aGlzLl9kZWxlZ2F0ZS5sYW5ndWFnZUNvZGU7XHJcbiAgICB9XHJcbiAgICBzZXQgbGFuZ3VhZ2VDb2RlKGxhbmd1YWdlQ29kZSkge1xyXG4gICAgICAgIHRoaXMuX2RlbGVnYXRlLmxhbmd1YWdlQ29kZSA9IGxhbmd1YWdlQ29kZTtcclxuICAgIH1cclxuICAgIGdldCBzZXR0aW5ncygpIHtcclxuICAgICAgICByZXR1cm4gdGhpcy5fZGVsZWdhdGUuc2V0dGluZ3M7XHJcbiAgICB9XHJcbiAgICBnZXQgdGVuYW50SWQoKSB7XHJcbiAgICAgICAgcmV0dXJuIHRoaXMuX2RlbGVnYXRlLnRlbmFudElkO1xyXG4gICAgfVxyXG4gICAgc2V0IHRlbmFudElkKHRpZCkge1xyXG4gICAgICAgIHRoaXMuX2RlbGVnYXRlLnRlbmFudElkID0gdGlkO1xyXG4gICAgfVxyXG4gICAgdXNlRGV2aWNlTGFuZ3VhZ2UoKSB7XHJcbiAgICAgICAgdGhpcy5fZGVsZWdhdGUudXNlRGV2aWNlTGFuZ3VhZ2UoKTtcclxuICAgIH1cclxuICAgIHNpZ25PdXQoKSB7XHJcbiAgICAgICAgcmV0dXJuIHRoaXMuX2RlbGVnYXRlLnNpZ25PdXQoKTtcclxuICAgIH1cclxuICAgIHVzZUVtdWxhdG9yKHVybCwgb3B0aW9ucykge1xyXG4gICAgICAgIGV4cC5jb25uZWN0QXV0aEVtdWxhdG9yKHRoaXMuX2RlbGVnYXRlLCB1cmwsIG9wdGlvbnMpO1xyXG4gICAgfVxyXG4gICAgYXBwbHlBY3Rpb25Db2RlKGNvZGUpIHtcclxuICAgICAgICByZXR1cm4gZXhwLmFwcGx5QWN0aW9uQ29kZSh0aGlzLl9kZWxlZ2F0ZSwgY29kZSk7XHJcbiAgICB9XHJcbiAgICBjaGVja0FjdGlvbkNvZGUoY29kZSkge1xyXG4gICAgICAgIHJldHVybiBleHAuY2hlY2tBY3Rpb25Db2RlKHRoaXMuX2RlbGVnYXRlLCBjb2RlKTtcclxuICAgIH1cclxuICAgIGNvbmZpcm1QYXNzd29yZFJlc2V0KGNvZGUsIG5ld1Bhc3N3b3JkKSB7XHJcbiAgICAgICAgcmV0dXJuIGV4cC5jb25maXJtUGFzc3dvcmRSZXNldCh0aGlzLl9kZWxlZ2F0ZSwgY29kZSwgbmV3UGFzc3dvcmQpO1xyXG4gICAgfVxyXG4gICAgYXN5bmMgY3JlYXRlVXNlcldpdGhFbWFpbEFuZFBhc3N3b3JkKGVtYWlsLCBwYXNzd29yZCkge1xyXG4gICAgICAgIHJldHVybiBjb252ZXJ0Q3JlZGVudGlhbCh0aGlzLl9kZWxlZ2F0ZSwgZXhwLmNyZWF0ZVVzZXJXaXRoRW1haWxBbmRQYXNzd29yZCh0aGlzLl9kZWxlZ2F0ZSwgZW1haWwsIHBhc3N3b3JkKSk7XHJcbiAgICB9XHJcbiAgICBmZXRjaFByb3ZpZGVyc0ZvckVtYWlsKGVtYWlsKSB7XHJcbiAgICAgICAgcmV0dXJuIHRoaXMuZmV0Y2hTaWduSW5NZXRob2RzRm9yRW1haWwoZW1haWwpO1xyXG4gICAgfVxyXG4gICAgZmV0Y2hTaWduSW5NZXRob2RzRm9yRW1haWwoZW1haWwpIHtcclxuICAgICAgICByZXR1cm4gZXhwLmZldGNoU2lnbkluTWV0aG9kc0ZvckVtYWlsKHRoaXMuX2RlbGVnYXRlLCBlbWFpbCk7XHJcbiAgICB9XHJcbiAgICBpc1NpZ25JbldpdGhFbWFpbExpbmsoZW1haWxMaW5rKSB7XHJcbiAgICAgICAgcmV0dXJuIGV4cC5pc1NpZ25JbldpdGhFbWFpbExpbmsodGhpcy5fZGVsZWdhdGUsIGVtYWlsTGluayk7XHJcbiAgICB9XHJcbiAgICBhc3luYyBnZXRSZWRpcmVjdFJlc3VsdCgpIHtcclxuICAgICAgICBfYXNzZXJ0JDEoX2lzUG9wdXBSZWRpcmVjdFN1cHBvcnRlZCgpLCB0aGlzLl9kZWxlZ2F0ZSwgXCJvcGVyYXRpb24tbm90LXN1cHBvcnRlZC1pbi10aGlzLWVudmlyb25tZW50XCIgLyogT1BFUkFUSU9OX05PVF9TVVBQT1JURUQgKi8pO1xyXG4gICAgICAgIGNvbnN0IGNyZWRlbnRpYWwgPSBhd2FpdCBleHAuZ2V0UmVkaXJlY3RSZXN1bHQodGhpcy5fZGVsZWdhdGUsIENvbXBhdFBvcHVwUmVkaXJlY3RSZXNvbHZlcik7XHJcbiAgICAgICAgaWYgKCFjcmVkZW50aWFsKSB7XHJcbiAgICAgICAgICAgIHJldHVybiB7XHJcbiAgICAgICAgICAgICAgICBjcmVkZW50aWFsOiBudWxsLFxyXG4gICAgICAgICAgICAgICAgdXNlcjogbnVsbFxyXG4gICAgICAgICAgICB9O1xyXG4gICAgICAgIH1cclxuICAgICAgICByZXR1cm4gY29udmVydENyZWRlbnRpYWwodGhpcy5fZGVsZWdhdGUsIFByb21pc2UucmVzb2x2ZShjcmVkZW50aWFsKSk7XHJcbiAgICB9XHJcbiAgICAvLyBUaGlzIGZ1bmN0aW9uIHNob3VsZCBvbmx5IGJlIGNhbGxlZCBieSBmcmFtZXdvcmtzIChlLmcuIEZpcmViYXNlVUktd2ViKSB0byBsb2cgdGhlaXIgdXNhZ2UuXHJcbiAgICAvLyBJdCBpcyBub3QgaW50ZW5kZWQgZm9yIGRpcmVjdCB1c2UgYnkgZGV2ZWxvcGVyIGFwcHMuIE5PIGpzZG9jIGhlcmUgdG8gaW50ZW50aW9uYWxseSBsZWF2ZSBpdFxyXG4gICAgLy8gb3V0IG9mIGF1dG9nZW5lcmF0ZWQgZG9jdW1lbnRhdGlvbiBwYWdlcyB0byByZWR1Y2UgYWNjaWRlbnRhbCBtaXN1c2UuXHJcbiAgICBhZGRGcmFtZXdvcmtGb3JMb2dnaW5nKGZyYW1ld29yaykge1xyXG4gICAgICAgIGV4cC5hZGRGcmFtZXdvcmtGb3JMb2dnaW5nKHRoaXMuX2RlbGVnYXRlLCBmcmFtZXdvcmspO1xyXG4gICAgfVxyXG4gICAgb25BdXRoU3RhdGVDaGFuZ2VkKG5leHRPck9ic2VydmVyLCBlcnJvckZuLCBjb21wbGV0ZWQpIHtcclxuICAgICAgICBjb25zdCB7IG5leHQsIGVycm9yLCBjb21wbGV0ZSB9ID0gd3JhcE9ic2VydmVycyhuZXh0T3JPYnNlcnZlciwgZXJyb3JGbiwgY29tcGxldGVkKTtcclxuICAgICAgICByZXR1cm4gdGhpcy5fZGVsZWdhdGUub25BdXRoU3RhdGVDaGFuZ2VkKG5leHQsIGVycm9yLCBjb21wbGV0ZSk7XHJcbiAgICB9XHJcbiAgICBvbklkVG9rZW5DaGFuZ2VkKG5leHRPck9ic2VydmVyLCBlcnJvckZuLCBjb21wbGV0ZWQpIHtcclxuICAgICAgICBjb25zdCB7IG5leHQsIGVycm9yLCBjb21wbGV0ZSB9ID0gd3JhcE9ic2VydmVycyhuZXh0T3JPYnNlcnZlciwgZXJyb3JGbiwgY29tcGxldGVkKTtcclxuICAgICAgICByZXR1cm4gdGhpcy5fZGVsZWdhdGUub25JZFRva2VuQ2hhbmdlZChuZXh0LCBlcnJvciwgY29tcGxldGUpO1xyXG4gICAgfVxyXG4gICAgc2VuZFNpZ25JbkxpbmtUb0VtYWlsKGVtYWlsLCBhY3Rpb25Db2RlU2V0dGluZ3MpIHtcclxuICAgICAgICByZXR1cm4gZXhwLnNlbmRTaWduSW5MaW5rVG9FbWFpbCh0aGlzLl9kZWxlZ2F0ZSwgZW1haWwsIGFjdGlvbkNvZGVTZXR0aW5ncyk7XHJcbiAgICB9XHJcbiAgICBzZW5kUGFzc3dvcmRSZXNldEVtYWlsKGVtYWlsLCBhY3Rpb25Db2RlU2V0dGluZ3MpIHtcclxuICAgICAgICByZXR1cm4gZXhwLnNlbmRQYXNzd29yZFJlc2V0RW1haWwodGhpcy5fZGVsZWdhdGUsIGVtYWlsLCBhY3Rpb25Db2RlU2V0dGluZ3MgfHwgdW5kZWZpbmVkKTtcclxuICAgIH1cclxuICAgIGFzeW5jIHNldFBlcnNpc3RlbmNlKHBlcnNpc3RlbmNlKSB7XHJcbiAgICAgICAgX3ZhbGlkYXRlUGVyc2lzdGVuY2VBcmd1bWVudCh0aGlzLl9kZWxlZ2F0ZSwgcGVyc2lzdGVuY2UpO1xyXG4gICAgICAgIGxldCBjb252ZXJ0ZWQ7XHJcbiAgICAgICAgc3dpdGNoIChwZXJzaXN0ZW5jZSkge1xyXG4gICAgICAgICAgICBjYXNlIFBlcnNpc3RlbmNlLlNFU1NJT046XHJcbiAgICAgICAgICAgICAgICBjb252ZXJ0ZWQgPSBleHAuYnJvd3NlclNlc3Npb25QZXJzaXN0ZW5jZTtcclxuICAgICAgICAgICAgICAgIGJyZWFrO1xyXG4gICAgICAgICAgICBjYXNlIFBlcnNpc3RlbmNlLkxPQ0FMOlxyXG4gICAgICAgICAgICAgICAgLy8gTm90IHVzaW5nIGlzSW5kZXhlZERCQXZhaWxhYmxlKCkgc2luY2UgaXQgb25seSBjaGVja3MgaWYgaW5kZXhlZERCIGlzIGRlZmluZWQuXHJcbiAgICAgICAgICAgICAgICBjb25zdCBpc0luZGV4ZWREQkZ1bGx5U3VwcG9ydGVkID0gYXdhaXQgZXhwXHJcbiAgICAgICAgICAgICAgICAgICAgLl9nZXRJbnN0YW5jZShleHAuaW5kZXhlZERCTG9jYWxQZXJzaXN0ZW5jZSlcclxuICAgICAgICAgICAgICAgICAgICAuX2lzQXZhaWxhYmxlKCk7XHJcbiAgICAgICAgICAgICAgICBjb252ZXJ0ZWQgPSBpc0luZGV4ZWREQkZ1bGx5U3VwcG9ydGVkXHJcbiAgICAgICAgICAgICAgICAgICAgPyBleHAuaW5kZXhlZERCTG9jYWxQZXJzaXN0ZW5jZVxyXG4gICAgICAgICAgICAgICAgICAgIDogZXhwLmJyb3dzZXJMb2NhbFBlcnNpc3RlbmNlO1xyXG4gICAgICAgICAgICAgICAgYnJlYWs7XHJcbiAgICAgICAgICAgIGNhc2UgUGVyc2lzdGVuY2UuTk9ORTpcclxuICAgICAgICAgICAgICAgIGNvbnZlcnRlZCA9IGV4cC5pbk1lbW9yeVBlcnNpc3RlbmNlO1xyXG4gICAgICAgICAgICAgICAgYnJlYWs7XHJcbiAgICAgICAgICAgIGRlZmF1bHQ6XHJcbiAgICAgICAgICAgICAgICByZXR1cm4gZXhwLl9mYWlsKFwiYXJndW1lbnQtZXJyb3JcIiAvKiBBUkdVTUVOVF9FUlJPUiAqLywge1xyXG4gICAgICAgICAgICAgICAgICAgIGFwcE5hbWU6IHRoaXMuX2RlbGVnYXRlLm5hbWVcclxuICAgICAgICAgICAgICAgIH0pO1xyXG4gICAgICAgIH1cclxuICAgICAgICByZXR1cm4gdGhpcy5fZGVsZWdhdGUuc2V0UGVyc2lzdGVuY2UoY29udmVydGVkKTtcclxuICAgIH1cclxuICAgIHNpZ25JbkFuZFJldHJpZXZlRGF0YVdpdGhDcmVkZW50aWFsKGNyZWRlbnRpYWwpIHtcclxuICAgICAgICByZXR1cm4gdGhpcy5zaWduSW5XaXRoQ3JlZGVudGlhbChjcmVkZW50aWFsKTtcclxuICAgIH1cclxuICAgIHNpZ25JbkFub255bW91c2x5KCkge1xyXG4gICAgICAgIHJldHVybiBjb252ZXJ0Q3JlZGVudGlhbCh0aGlzLl9kZWxlZ2F0ZSwgZXhwLnNpZ25JbkFub255bW91c2x5KHRoaXMuX2RlbGVnYXRlKSk7XHJcbiAgICB9XHJcbiAgICBzaWduSW5XaXRoQ3JlZGVudGlhbChjcmVkZW50aWFsKSB7XHJcbiAgICAgICAgcmV0dXJuIGNvbnZlcnRDcmVkZW50aWFsKHRoaXMuX2RlbGVnYXRlLCBleHAuc2lnbkluV2l0aENyZWRlbnRpYWwodGhpcy5fZGVsZWdhdGUsIGNyZWRlbnRpYWwpKTtcclxuICAgIH1cclxuICAgIHNpZ25JbldpdGhDdXN0b21Ub2tlbih0b2tlbikge1xyXG4gICAgICAgIHJldHVybiBjb252ZXJ0Q3JlZGVudGlhbCh0aGlzLl9kZWxlZ2F0ZSwgZXhwLnNpZ25JbldpdGhDdXN0b21Ub2tlbih0aGlzLl9kZWxlZ2F0ZSwgdG9rZW4pKTtcclxuICAgIH1cclxuICAgIHNpZ25JbldpdGhFbWFpbEFuZFBhc3N3b3JkKGVtYWlsLCBwYXNzd29yZCkge1xyXG4gICAgICAgIHJldHVybiBjb252ZXJ0Q3JlZGVudGlhbCh0aGlzLl9kZWxlZ2F0ZSwgZXhwLnNpZ25JbldpdGhFbWFpbEFuZFBhc3N3b3JkKHRoaXMuX2RlbGVnYXRlLCBlbWFpbCwgcGFzc3dvcmQpKTtcclxuICAgIH1cclxuICAgIHNpZ25JbldpdGhFbWFpbExpbmsoZW1haWwsIGVtYWlsTGluaykge1xyXG4gICAgICAgIHJldHVybiBjb252ZXJ0Q3JlZGVudGlhbCh0aGlzLl9kZWxlZ2F0ZSwgZXhwLnNpZ25JbldpdGhFbWFpbExpbmsodGhpcy5fZGVsZWdhdGUsIGVtYWlsLCBlbWFpbExpbmspKTtcclxuICAgIH1cclxuICAgIHNpZ25JbldpdGhQaG9uZU51bWJlcihwaG9uZU51bWJlciwgYXBwbGljYXRpb25WZXJpZmllcikge1xyXG4gICAgICAgIHJldHVybiBjb252ZXJ0Q29uZmlybWF0aW9uUmVzdWx0KHRoaXMuX2RlbGVnYXRlLCBleHAuc2lnbkluV2l0aFBob25lTnVtYmVyKHRoaXMuX2RlbGVnYXRlLCBwaG9uZU51bWJlciwgYXBwbGljYXRpb25WZXJpZmllcikpO1xyXG4gICAgfVxyXG4gICAgYXN5bmMgc2lnbkluV2l0aFBvcHVwKHByb3ZpZGVyKSB7XHJcbiAgICAgICAgX2Fzc2VydCQxKF9pc1BvcHVwUmVkaXJlY3RTdXBwb3J0ZWQoKSwgdGhpcy5fZGVsZWdhdGUsIFwib3BlcmF0aW9uLW5vdC1zdXBwb3J0ZWQtaW4tdGhpcy1lbnZpcm9ubWVudFwiIC8qIE9QRVJBVElPTl9OT1RfU1VQUE9SVEVEICovKTtcclxuICAgICAgICByZXR1cm4gY29udmVydENyZWRlbnRpYWwodGhpcy5fZGVsZWdhdGUsIGV4cC5zaWduSW5XaXRoUG9wdXAodGhpcy5fZGVsZWdhdGUsIHByb3ZpZGVyLCBDb21wYXRQb3B1cFJlZGlyZWN0UmVzb2x2ZXIpKTtcclxuICAgIH1cclxuICAgIGFzeW5jIHNpZ25JbldpdGhSZWRpcmVjdChwcm92aWRlcikge1xyXG4gICAgICAgIF9hc3NlcnQkMShfaXNQb3B1cFJlZGlyZWN0U3VwcG9ydGVkKCksIHRoaXMuX2RlbGVnYXRlLCBcIm9wZXJhdGlvbi1ub3Qtc3VwcG9ydGVkLWluLXRoaXMtZW52aXJvbm1lbnRcIiAvKiBPUEVSQVRJT05fTk9UX1NVUFBPUlRFRCAqLyk7XHJcbiAgICAgICAgYXdhaXQgX3NhdmVQZXJzaXN0ZW5jZUZvclJlZGlyZWN0KHRoaXMuX2RlbGVnYXRlKTtcclxuICAgICAgICByZXR1cm4gZXhwLnNpZ25JbldpdGhSZWRpcmVjdCh0aGlzLl9kZWxlZ2F0ZSwgcHJvdmlkZXIsIENvbXBhdFBvcHVwUmVkaXJlY3RSZXNvbHZlcik7XHJcbiAgICB9XHJcbiAgICB1cGRhdGVDdXJyZW50VXNlcih1c2VyKSB7XHJcbiAgICAgICAgLy8gcmVtb3ZlIHRzLWlnbm9yZSBvbmNlIG92ZXJsb2FkcyBhcmUgZGVmaW5lZCBmb3IgZXhwIGZ1bmN0aW9ucyB0byBhY2NlcHQgY29tcGF0IG9iamVjdHNcclxuICAgICAgICAvLyBAdHMtaWdub3JlXHJcbiAgICAgICAgcmV0dXJuIHRoaXMuX2RlbGVnYXRlLnVwZGF0ZUN1cnJlbnRVc2VyKHVzZXIpO1xyXG4gICAgfVxyXG4gICAgdmVyaWZ5UGFzc3dvcmRSZXNldENvZGUoY29kZSkge1xyXG4gICAgICAgIHJldHVybiBleHAudmVyaWZ5UGFzc3dvcmRSZXNldENvZGUodGhpcy5fZGVsZWdhdGUsIGNvZGUpO1xyXG4gICAgfVxyXG4gICAgdW53cmFwKCkge1xyXG4gICAgICAgIHJldHVybiB0aGlzLl9kZWxlZ2F0ZTtcclxuICAgIH1cclxuICAgIF9kZWxldGUoKSB7XHJcbiAgICAgICAgcmV0dXJuIHRoaXMuX2RlbGVnYXRlLl9kZWxldGUoKTtcclxuICAgIH1cclxuICAgIGxpbmtVbmRlcmx5aW5nQXV0aCgpIHtcclxuICAgICAgICB0aGlzLl9kZWxlZ2F0ZS53cmFwcGVkID0gKCkgPT4gdGhpcztcclxuICAgIH1cclxufVxyXG5BdXRoLlBlcnNpc3RlbmNlID0gUGVyc2lzdGVuY2U7XHJcbmZ1bmN0aW9uIHdyYXBPYnNlcnZlcnMobmV4dE9yT2JzZXJ2ZXIsIGVycm9yLCBjb21wbGV0ZSkge1xyXG4gICAgbGV0IG5leHQgPSBuZXh0T3JPYnNlcnZlcjtcclxuICAgIGlmICh0eXBlb2YgbmV4dE9yT2JzZXJ2ZXIgIT09ICdmdW5jdGlvbicpIHtcclxuICAgICAgICAoeyBuZXh0LCBlcnJvciwgY29tcGxldGUgfSA9IG5leHRPck9ic2VydmVyKTtcclxuICAgIH1cclxuICAgIC8vIFdlIGtub3cgJ25leHQnIGlzIG5vdyBhIGZ1bmN0aW9uXHJcbiAgICBjb25zdCBvbGROZXh0ID0gbmV4dDtcclxuICAgIGNvbnN0IG5ld05leHQgPSAodXNlcikgPT4gb2xkTmV4dCh1c2VyICYmIFVzZXIuZ2V0T3JDcmVhdGUodXNlcikpO1xyXG4gICAgcmV0dXJuIHtcclxuICAgICAgICBuZXh0OiBuZXdOZXh0LFxyXG4gICAgICAgIGVycm9yOiBlcnJvcixcclxuICAgICAgICBjb21wbGV0ZVxyXG4gICAgfTtcclxufVxyXG5mdW5jdGlvbiBidWlsZFBlcnNpc3RlbmNlSGllcmFyY2h5KGFwaUtleSwgYXBwTmFtZSkge1xyXG4gICAgLy8gTm90ZSB0aGlzIGlzIHNsaWdodGx5IGRpZmZlcmVudCBiZWhhdmlvcjogaW4gdGhpcyBjYXNlLCB0aGUgc3RvcmVkXHJcbiAgICAvLyBwZXJzaXN0ZW5jZSBpcyBjaGVja2VkICpmaXJzdCogcmF0aGVyIHRoYW4gbGFzdC4gVGhpcyBpcyBiZWNhdXNlIHdlIHdhbnRcclxuICAgIC8vIHRvIHByZWZlciBzdG9yZWQgcGVyc2lzdGVuY2UgdHlwZSBpbiB0aGUgaGllcmFyY2h5LiBUaGlzIGlzIGFuIGVtcHR5XHJcbiAgICAvLyBhcnJheSBpZiB3aW5kb3cgaXMgbm90IGF2YWlsYWJsZSBvciB0aGVyZSBpcyBubyBwZW5kaW5nIHJlZGlyZWN0XHJcbiAgICBjb25zdCBwZXJzaXN0ZW5jZXMgPSBfZ2V0UGVyc2lzdGVuY2VzRnJvbVJlZGlyZWN0KGFwaUtleSwgYXBwTmFtZSk7XHJcbiAgICAvLyBJZiBcInNlbGZcIiBpcyBhdmFpbGFibGUsIGFkZCBpbmRleGVkREJcclxuICAgIGlmICh0eXBlb2Ygc2VsZiAhPT0gJ3VuZGVmaW5lZCcgJiZcclxuICAgICAgICAhcGVyc2lzdGVuY2VzLmluY2x1ZGVzKGV4cC5pbmRleGVkREJMb2NhbFBlcnNpc3RlbmNlKSkge1xyXG4gICAgICAgIHBlcnNpc3RlbmNlcy5wdXNoKGV4cC5pbmRleGVkREJMb2NhbFBlcnNpc3RlbmNlKTtcclxuICAgIH1cclxuICAgIC8vIElmIFwid2luZG93XCIgaXMgYXZhaWxhYmxlLCBhZGQgSFRNTCBTdG9yYWdlIHBlcnNpc3RlbmNlc1xyXG4gICAgaWYgKHR5cGVvZiB3aW5kb3cgIT09ICd1bmRlZmluZWQnKSB7XHJcbiAgICAgICAgZm9yIChjb25zdCBwZXJzaXN0ZW5jZSBvZiBbXHJcbiAgICAgICAgICAgIGV4cC5icm93c2VyTG9jYWxQZXJzaXN0ZW5jZSxcclxuICAgICAgICAgICAgZXhwLmJyb3dzZXJTZXNzaW9uUGVyc2lzdGVuY2VcclxuICAgICAgICBdKSB7XHJcbiAgICAgICAgICAgIGlmICghcGVyc2lzdGVuY2VzLmluY2x1ZGVzKHBlcnNpc3RlbmNlKSkge1xyXG4gICAgICAgICAgICAgICAgcGVyc2lzdGVuY2VzLnB1c2gocGVyc2lzdGVuY2UpO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgfVxyXG4gICAgfVxyXG4gICAgLy8gQWRkIGluLW1lbW9yeSBhcyBhIGZpbmFsIGZhbGxiYWNrXHJcbiAgICBpZiAoIXBlcnNpc3RlbmNlcy5pbmNsdWRlcyhleHAuaW5NZW1vcnlQZXJzaXN0ZW5jZSkpIHtcclxuICAgICAgICBwZXJzaXN0ZW5jZXMucHVzaChleHAuaW5NZW1vcnlQZXJzaXN0ZW5jZSk7XHJcbiAgICB9XHJcbiAgICByZXR1cm4gcGVyc2lzdGVuY2VzO1xyXG59XG5cbi8qKlxyXG4gKiBAbGljZW5zZVxyXG4gKiBDb3B5cmlnaHQgMjAyMCBHb29nbGUgTExDXHJcbiAqXHJcbiAqIExpY2Vuc2VkIHVuZGVyIHRoZSBBcGFjaGUgTGljZW5zZSwgVmVyc2lvbiAyLjAgKHRoZSBcIkxpY2Vuc2VcIik7XHJcbiAqIHlvdSBtYXkgbm90IHVzZSB0aGlzIGZpbGUgZXhjZXB0IGluIGNvbXBsaWFuY2Ugd2l0aCB0aGUgTGljZW5zZS5cclxuICogWW91IG1heSBvYnRhaW4gYSBjb3B5IG9mIHRoZSBMaWNlbnNlIGF0XHJcbiAqXHJcbiAqICAgaHR0cDovL3d3dy5hcGFjaGUub3JnL2xpY2Vuc2VzL0xJQ0VOU0UtMi4wXHJcbiAqXHJcbiAqIFVubGVzcyByZXF1aXJlZCBieSBhcHBsaWNhYmxlIGxhdyBvciBhZ3JlZWQgdG8gaW4gd3JpdGluZywgc29mdHdhcmVcclxuICogZGlzdHJpYnV0ZWQgdW5kZXIgdGhlIExpY2Vuc2UgaXMgZGlzdHJpYnV0ZWQgb24gYW4gXCJBUyBJU1wiIEJBU0lTLFxyXG4gKiBXSVRIT1VUIFdBUlJBTlRJRVMgT1IgQ09ORElUSU9OUyBPRiBBTlkgS0lORCwgZWl0aGVyIGV4cHJlc3Mgb3IgaW1wbGllZC5cclxuICogU2VlIHRoZSBMaWNlbnNlIGZvciB0aGUgc3BlY2lmaWMgbGFuZ3VhZ2UgZ292ZXJuaW5nIHBlcm1pc3Npb25zIGFuZFxyXG4gKiBsaW1pdGF0aW9ucyB1bmRlciB0aGUgTGljZW5zZS5cclxuICovXHJcbmNsYXNzIFBob25lQXV0aFByb3ZpZGVyIHtcclxuICAgIGNvbnN0cnVjdG9yKCkge1xyXG4gICAgICAgIHRoaXMucHJvdmlkZXJJZCA9ICdwaG9uZSc7XHJcbiAgICAgICAgLy8gVE9ETzogcmVtb3ZlIHRzLWlnbm9yZSB3aGVuIG1vdmluZyB0eXBlcyBmcm9tIGF1dGgtdHlwZXMgdG8gYXV0aC1jb21wYXRcclxuICAgICAgICAvLyBAdHMtaWdub3JlXHJcbiAgICAgICAgdGhpcy5fZGVsZWdhdGUgPSBuZXcgZXhwLlBob25lQXV0aFByb3ZpZGVyKHVud3JhcChmaXJlYmFzZS5hdXRoKCkpKTtcclxuICAgIH1cclxuICAgIHN0YXRpYyBjcmVkZW50aWFsKHZlcmlmaWNhdGlvbklkLCB2ZXJpZmljYXRpb25Db2RlKSB7XHJcbiAgICAgICAgcmV0dXJuIGV4cC5QaG9uZUF1dGhQcm92aWRlci5jcmVkZW50aWFsKHZlcmlmaWNhdGlvbklkLCB2ZXJpZmljYXRpb25Db2RlKTtcclxuICAgIH1cclxuICAgIHZlcmlmeVBob25lTnVtYmVyKHBob25lSW5mb09wdGlvbnMsIGFwcGxpY2F0aW9uVmVyaWZpZXIpIHtcclxuICAgICAgICByZXR1cm4gdGhpcy5fZGVsZWdhdGUudmVyaWZ5UGhvbmVOdW1iZXIoXHJcbiAgICAgICAgLy8gVGhlIGltcGxlbWVudGF0aW9uIG1hdGNoZXMgYnV0IHRoZSB0eXBlcyBhcmUgc3VidGx5IGluY29tcGF0aWJsZVxyXG4gICAgICAgIC8vIGVzbGludC1kaXNhYmxlLW5leHQtbGluZSBAdHlwZXNjcmlwdC1lc2xpbnQvbm8tZXhwbGljaXQtYW55XHJcbiAgICAgICAgcGhvbmVJbmZvT3B0aW9ucywgYXBwbGljYXRpb25WZXJpZmllcik7XHJcbiAgICB9XHJcbiAgICB1bndyYXAoKSB7XHJcbiAgICAgICAgcmV0dXJuIHRoaXMuX2RlbGVnYXRlO1xyXG4gICAgfVxyXG59XHJcblBob25lQXV0aFByb3ZpZGVyLlBIT05FX1NJR05fSU5fTUVUSE9EID0gZXhwLlBob25lQXV0aFByb3ZpZGVyLlBIT05FX1NJR05fSU5fTUVUSE9EO1xyXG5QaG9uZUF1dGhQcm92aWRlci5QUk9WSURFUl9JRCA9IGV4cC5QaG9uZUF1dGhQcm92aWRlci5QUk9WSURFUl9JRDtcblxuLyoqXHJcbiAqIEBsaWNlbnNlXHJcbiAqIENvcHlyaWdodCAyMDIwIEdvb2dsZSBMTENcclxuICpcclxuICogTGljZW5zZWQgdW5kZXIgdGhlIEFwYWNoZSBMaWNlbnNlLCBWZXJzaW9uIDIuMCAodGhlIFwiTGljZW5zZVwiKTtcclxuICogeW91IG1heSBub3QgdXNlIHRoaXMgZmlsZSBleGNlcHQgaW4gY29tcGxpYW5jZSB3aXRoIHRoZSBMaWNlbnNlLlxyXG4gKiBZb3UgbWF5IG9idGFpbiBhIGNvcHkgb2YgdGhlIExpY2Vuc2UgYXRcclxuICpcclxuICogICBodHRwOi8vd3d3LmFwYWNoZS5vcmcvbGljZW5zZXMvTElDRU5TRS0yLjBcclxuICpcclxuICogVW5sZXNzIHJlcXVpcmVkIGJ5IGFwcGxpY2FibGUgbGF3IG9yIGFncmVlZCB0byBpbiB3cml0aW5nLCBzb2Z0d2FyZVxyXG4gKiBkaXN0cmlidXRlZCB1bmRlciB0aGUgTGljZW5zZSBpcyBkaXN0cmlidXRlZCBvbiBhbiBcIkFTIElTXCIgQkFTSVMsXHJcbiAqIFdJVEhPVVQgV0FSUkFOVElFUyBPUiBDT05ESVRJT05TIE9GIEFOWSBLSU5ELCBlaXRoZXIgZXhwcmVzcyBvciBpbXBsaWVkLlxyXG4gKiBTZWUgdGhlIExpY2Vuc2UgZm9yIHRoZSBzcGVjaWZpYyBsYW5ndWFnZSBnb3Zlcm5pbmcgcGVybWlzc2lvbnMgYW5kXHJcbiAqIGxpbWl0YXRpb25zIHVuZGVyIHRoZSBMaWNlbnNlLlxyXG4gKi9cclxuY29uc3QgX2Fzc2VydCA9IGV4cC5fYXNzZXJ0O1xyXG5jbGFzcyBSZWNhcHRjaGFWZXJpZmllciB7XHJcbiAgICBjb25zdHJ1Y3Rvcihjb250YWluZXIsIHBhcmFtZXRlcnMsIGFwcCA9IGZpcmViYXNlLmFwcCgpKSB7XHJcbiAgICAgICAgdmFyIF9hO1xyXG4gICAgICAgIC8vIEFQSSBrZXkgaXMgcmVxdWlyZWQgZm9yIHdlYiBjbGllbnQgUlBDIGNhbGxzLlxyXG4gICAgICAgIF9hc3NlcnQoKF9hID0gYXBwLm9wdGlvbnMpID09PSBudWxsIHx8IF9hID09PSB2b2lkIDAgPyB2b2lkIDAgOiBfYS5hcGlLZXksIFwiaW52YWxpZC1hcGkta2V5XCIgLyogSU5WQUxJRF9BUElfS0VZICovLCB7XHJcbiAgICAgICAgICAgIGFwcE5hbWU6IGFwcC5uYW1lXHJcbiAgICAgICAgfSk7XHJcbiAgICAgICAgdGhpcy5fZGVsZWdhdGUgPSBuZXcgZXhwLlJlY2FwdGNoYVZlcmlmaWVyKGNvbnRhaW5lciwgXHJcbiAgICAgICAgLy8gZXNsaW50LWRpc2FibGUtbmV4dC1saW5lIEB0eXBlc2NyaXB0LWVzbGludC9uby1leHBsaWNpdC1hbnlcclxuICAgICAgICBwYXJhbWV0ZXJzLCBcclxuICAgICAgICAvLyBUT0RPOiByZW1vdmUgdHMtaWdub3JlIHdoZW4gbW92aW5nIHR5cGVzIGZyb20gYXV0aC10eXBlcyB0byBhdXRoLWNvbXBhdFxyXG4gICAgICAgIC8vIEB0cy1pZ25vcmVcclxuICAgICAgICBhcHAuYXV0aCgpKTtcclxuICAgICAgICB0aGlzLnR5cGUgPSB0aGlzLl9kZWxlZ2F0ZS50eXBlO1xyXG4gICAgfVxyXG4gICAgY2xlYXIoKSB7XHJcbiAgICAgICAgdGhpcy5fZGVsZWdhdGUuY2xlYXIoKTtcclxuICAgIH1cclxuICAgIHJlbmRlcigpIHtcclxuICAgICAgICByZXR1cm4gdGhpcy5fZGVsZWdhdGUucmVuZGVyKCk7XHJcbiAgICB9XHJcbiAgICB2ZXJpZnkoKSB7XHJcbiAgICAgICAgcmV0dXJuIHRoaXMuX2RlbGVnYXRlLnZlcmlmeSgpO1xyXG4gICAgfVxyXG59XG5cbi8qKlxyXG4gKiBAbGljZW5zZVxyXG4gKiBDb3B5cmlnaHQgMjAyMCBHb29nbGUgTExDXHJcbiAqXHJcbiAqIExpY2Vuc2VkIHVuZGVyIHRoZSBBcGFjaGUgTGljZW5zZSwgVmVyc2lvbiAyLjAgKHRoZSBcIkxpY2Vuc2VcIik7XHJcbiAqIHlvdSBtYXkgbm90IHVzZSB0aGlzIGZpbGUgZXhjZXB0IGluIGNvbXBsaWFuY2Ugd2l0aCB0aGUgTGljZW5zZS5cclxuICogWW91IG1heSBvYnRhaW4gYSBjb3B5IG9mIHRoZSBMaWNlbnNlIGF0XHJcbiAqXHJcbiAqICAgaHR0cDovL3d3dy5hcGFjaGUub3JnL2xpY2Vuc2VzL0xJQ0VOU0UtMi4wXHJcbiAqXHJcbiAqIFVubGVzcyByZXF1aXJlZCBieSBhcHBsaWNhYmxlIGxhdyBvciBhZ3JlZWQgdG8gaW4gd3JpdGluZywgc29mdHdhcmVcclxuICogZGlzdHJpYnV0ZWQgdW5kZXIgdGhlIExpY2Vuc2UgaXMgZGlzdHJpYnV0ZWQgb24gYW4gXCJBUyBJU1wiIEJBU0lTLFxyXG4gKiBXSVRIT1VUIFdBUlJBTlRJRVMgT1IgQ09ORElUSU9OUyBPRiBBTlkgS0lORCwgZWl0aGVyIGV4cHJlc3Mgb3IgaW1wbGllZC5cclxuICogU2VlIHRoZSBMaWNlbnNlIGZvciB0aGUgc3BlY2lmaWMgbGFuZ3VhZ2UgZ292ZXJuaW5nIHBlcm1pc3Npb25zIGFuZFxyXG4gKiBsaW1pdGF0aW9ucyB1bmRlciB0aGUgTGljZW5zZS5cclxuICovXHJcbmNvbnN0IEFVVEhfVFlQRSA9ICdhdXRoLWNvbXBhdCc7XHJcbi8vIENyZWF0ZSBhdXRoIGNvbXBvbmVudHMgdG8gcmVnaXN0ZXIgd2l0aCBmaXJlYmFzZS5cclxuLy8gUHJvdmlkZXMgQXV0aCBwdWJsaWMgQVBJcy5cclxuZnVuY3Rpb24gcmVnaXN0ZXJBdXRoQ29tcGF0KGluc3RhbmNlKSB7XHJcbiAgICBpbnN0YW5jZS5JTlRFUk5BTC5yZWdpc3RlckNvbXBvbmVudChuZXcgQ29tcG9uZW50KEFVVEhfVFlQRSwgY29udGFpbmVyID0+IHtcclxuICAgICAgICAvLyBnZXRJbW1lZGlhdGUgZm9yIEZpcmViYXNlQXBwIHdpbGwgYWx3YXlzIHN1Y2NlZWRcclxuICAgICAgICBjb25zdCBhcHAgPSBjb250YWluZXIuZ2V0UHJvdmlkZXIoJ2FwcC1jb21wYXQnKS5nZXRJbW1lZGlhdGUoKTtcclxuICAgICAgICBjb25zdCBhdXRoUHJvdmlkZXIgPSBjb250YWluZXIuZ2V0UHJvdmlkZXIoJ2F1dGgnKTtcclxuICAgICAgICByZXR1cm4gbmV3IEF1dGgoYXBwLCBhdXRoUHJvdmlkZXIpO1xyXG4gICAgfSwgXCJQVUJMSUNcIiAvKiBQVUJMSUMgKi8pXHJcbiAgICAgICAgLnNldFNlcnZpY2VQcm9wcyh7XHJcbiAgICAgICAgQWN0aW9uQ29kZUluZm86IHtcclxuICAgICAgICAgICAgT3BlcmF0aW9uOiB7XHJcbiAgICAgICAgICAgICAgICBFTUFJTF9TSUdOSU46IGV4cC5BY3Rpb25Db2RlT3BlcmF0aW9uLkVNQUlMX1NJR05JTixcclxuICAgICAgICAgICAgICAgIFBBU1NXT1JEX1JFU0VUOiBleHAuQWN0aW9uQ29kZU9wZXJhdGlvbi5QQVNTV09SRF9SRVNFVCxcclxuICAgICAgICAgICAgICAgIFJFQ09WRVJfRU1BSUw6IGV4cC5BY3Rpb25Db2RlT3BlcmF0aW9uLlJFQ09WRVJfRU1BSUwsXHJcbiAgICAgICAgICAgICAgICBSRVZFUlRfU0VDT05EX0ZBQ1RPUl9BRERJVElPTjogZXhwLkFjdGlvbkNvZGVPcGVyYXRpb24uUkVWRVJUX1NFQ09ORF9GQUNUT1JfQURESVRJT04sXHJcbiAgICAgICAgICAgICAgICBWRVJJRllfQU5EX0NIQU5HRV9FTUFJTDogZXhwLkFjdGlvbkNvZGVPcGVyYXRpb24uVkVSSUZZX0FORF9DSEFOR0VfRU1BSUwsXHJcbiAgICAgICAgICAgICAgICBWRVJJRllfRU1BSUw6IGV4cC5BY3Rpb25Db2RlT3BlcmF0aW9uLlZFUklGWV9FTUFJTFxyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgfSxcclxuICAgICAgICBFbWFpbEF1dGhQcm92aWRlcjogZXhwLkVtYWlsQXV0aFByb3ZpZGVyLFxyXG4gICAgICAgIEZhY2Vib29rQXV0aFByb3ZpZGVyOiBleHAuRmFjZWJvb2tBdXRoUHJvdmlkZXIsXHJcbiAgICAgICAgR2l0aHViQXV0aFByb3ZpZGVyOiBleHAuR2l0aHViQXV0aFByb3ZpZGVyLFxyXG4gICAgICAgIEdvb2dsZUF1dGhQcm92aWRlcjogZXhwLkdvb2dsZUF1dGhQcm92aWRlcixcclxuICAgICAgICBPQXV0aFByb3ZpZGVyOiBleHAuT0F1dGhQcm92aWRlcixcclxuICAgICAgICBTQU1MQXV0aFByb3ZpZGVyOiBleHAuU0FNTEF1dGhQcm92aWRlcixcclxuICAgICAgICBQaG9uZUF1dGhQcm92aWRlcjogUGhvbmVBdXRoUHJvdmlkZXIsXHJcbiAgICAgICAgUGhvbmVNdWx0aUZhY3RvckdlbmVyYXRvcjogZXhwLlBob25lTXVsdGlGYWN0b3JHZW5lcmF0b3IsXHJcbiAgICAgICAgUmVjYXB0Y2hhVmVyaWZpZXI6IFJlY2FwdGNoYVZlcmlmaWVyLFxyXG4gICAgICAgIFR3aXR0ZXJBdXRoUHJvdmlkZXI6IGV4cC5Ud2l0dGVyQXV0aFByb3ZpZGVyLFxyXG4gICAgICAgIEF1dGgsXHJcbiAgICAgICAgQXV0aENyZWRlbnRpYWw6IGV4cC5BdXRoQ3JlZGVudGlhbCxcclxuICAgICAgICBFcnJvcjogRmlyZWJhc2VFcnJvclxyXG4gICAgfSlcclxuICAgICAgICAuc2V0SW5zdGFudGlhdGlvbk1vZGUoXCJMQVpZXCIgLyogTEFaWSAqLylcclxuICAgICAgICAuc2V0TXVsdGlwbGVJbnN0YW5jZXMoZmFsc2UpKTtcclxuICAgIGluc3RhbmNlLnJlZ2lzdGVyVmVyc2lvbihuYW1lLCB2ZXJzaW9uKTtcclxufVxyXG5yZWdpc3RlckF1dGhDb21wYXQoZmlyZWJhc2UpO1xuLy8jIHNvdXJjZU1hcHBpbmdVUkw9aW5kZXguZXNtMjAxNy5qcy5tYXBcbiJdLCJuYW1lcyI6W10sInNvdXJjZVJvb3QiOiIifQ==\n//# sourceURL=webpack-internal:///./node_modules/@firebase/auth-compat/dist/index.esm2017.js\n");

/***/ }),

/***/ "./node_modules/@firebase/auth/dist/esm2017/internal.js":
/*!**************************************************************!*\
  !*** ./node_modules/@firebase/auth/dist/esm2017/internal.js ***!
  \**************************************************************/
/***/ (function(__unused_webpack_module, __webpack_exports__, __webpack_require__) {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   \"ActionCodeOperation\": function() { return /* reexport safe */ _index_69ab4e3a_js__WEBPACK_IMPORTED_MODULE_0__.A; },\n/* harmony export */   \"ActionCodeURL\": function() { return /* reexport safe */ _index_69ab4e3a_js__WEBPACK_IMPORTED_MODULE_0__.ad; },\n/* harmony export */   \"AuthCredential\": function() { return /* reexport safe */ _index_69ab4e3a_js__WEBPACK_IMPORTED_MODULE_0__.H; },\n/* harmony export */   \"AuthErrorCodes\": function() { return /* reexport safe */ _index_69ab4e3a_js__WEBPACK_IMPORTED_MODULE_0__.D; },\n/* harmony export */   \"AuthImpl\": function() { return /* reexport safe */ _index_69ab4e3a_js__WEBPACK_IMPORTED_MODULE_0__.aG; },\n/* harmony export */   \"AuthPopup\": function() { return /* reexport safe */ _index_69ab4e3a_js__WEBPACK_IMPORTED_MODULE_0__.aJ; },\n/* harmony export */   \"EmailAuthCredential\": function() { return /* reexport safe */ _index_69ab4e3a_js__WEBPACK_IMPORTED_MODULE_0__.I; },\n/* harmony export */   \"EmailAuthProvider\": function() { return /* reexport safe */ _index_69ab4e3a_js__WEBPACK_IMPORTED_MODULE_0__.M; },\n/* harmony export */   \"FacebookAuthProvider\": function() { return /* reexport safe */ _index_69ab4e3a_js__WEBPACK_IMPORTED_MODULE_0__.N; },\n/* harmony export */   \"FactorId\": function() { return /* reexport safe */ _index_69ab4e3a_js__WEBPACK_IMPORTED_MODULE_0__.F; },\n/* harmony export */   \"FetchProvider\": function() { return /* reexport safe */ _index_69ab4e3a_js__WEBPACK_IMPORTED_MODULE_0__.aK; },\n/* harmony export */   \"GithubAuthProvider\": function() { return /* reexport safe */ _index_69ab4e3a_js__WEBPACK_IMPORTED_MODULE_0__.T; },\n/* harmony export */   \"GoogleAuthProvider\": function() { return /* reexport safe */ _index_69ab4e3a_js__WEBPACK_IMPORTED_MODULE_0__.Q; },\n/* harmony export */   \"OAuthCredential\": function() { return /* reexport safe */ _index_69ab4e3a_js__WEBPACK_IMPORTED_MODULE_0__.J; },\n/* harmony export */   \"OAuthProvider\": function() { return /* reexport safe */ _index_69ab4e3a_js__WEBPACK_IMPORTED_MODULE_0__.U; },\n/* harmony export */   \"OperationType\": function() { return /* reexport safe */ _index_69ab4e3a_js__WEBPACK_IMPORTED_MODULE_0__.O; },\n/* harmony export */   \"PhoneAuthCredential\": function() { return /* reexport safe */ _index_69ab4e3a_js__WEBPACK_IMPORTED_MODULE_0__.K; },\n/* harmony export */   \"PhoneAuthProvider\": function() { return /* reexport safe */ _index_69ab4e3a_js__WEBPACK_IMPORTED_MODULE_0__.P; },\n/* harmony export */   \"PhoneMultiFactorGenerator\": function() { return /* reexport safe */ _index_69ab4e3a_js__WEBPACK_IMPORTED_MODULE_0__.m; },\n/* harmony export */   \"ProviderId\": function() { return /* reexport safe */ _index_69ab4e3a_js__WEBPACK_IMPORTED_MODULE_0__.o; },\n/* harmony export */   \"RecaptchaVerifier\": function() { return /* reexport safe */ _index_69ab4e3a_js__WEBPACK_IMPORTED_MODULE_0__.R; },\n/* harmony export */   \"SAMLAuthCredential\": function() { return /* reexport safe */ _index_69ab4e3a_js__WEBPACK_IMPORTED_MODULE_0__.aL; },\n/* harmony export */   \"SAMLAuthProvider\": function() { return /* reexport safe */ _index_69ab4e3a_js__WEBPACK_IMPORTED_MODULE_0__.V; },\n/* harmony export */   \"SignInMethod\": function() { return /* reexport safe */ _index_69ab4e3a_js__WEBPACK_IMPORTED_MODULE_0__.S; },\n/* harmony export */   \"TwitterAuthProvider\": function() { return /* reexport safe */ _index_69ab4e3a_js__WEBPACK_IMPORTED_MODULE_0__.W; },\n/* harmony export */   \"UserImpl\": function() { return /* reexport safe */ _index_69ab4e3a_js__WEBPACK_IMPORTED_MODULE_0__.aF; },\n/* harmony export */   \"_assert\": function() { return /* reexport safe */ _index_69ab4e3a_js__WEBPACK_IMPORTED_MODULE_0__.ax; },\n/* harmony export */   \"_castAuth\": function() { return /* reexport safe */ _index_69ab4e3a_js__WEBPACK_IMPORTED_MODULE_0__.aE; },\n/* harmony export */   \"_fail\": function() { return /* reexport safe */ _index_69ab4e3a_js__WEBPACK_IMPORTED_MODULE_0__.at; },\n/* harmony export */   \"_generateEventId\": function() { return /* reexport safe */ _index_69ab4e3a_js__WEBPACK_IMPORTED_MODULE_0__.aI; },\n/* harmony export */   \"_getClientVersion\": function() { return /* reexport safe */ _index_69ab4e3a_js__WEBPACK_IMPORTED_MODULE_0__.aH; },\n/* harmony export */   \"_getInstance\": function() { return /* reexport safe */ _index_69ab4e3a_js__WEBPACK_IMPORTED_MODULE_0__.ay; },\n/* harmony export */   \"_getRedirectResult\": function() { return /* reexport safe */ _index_69ab4e3a_js__WEBPACK_IMPORTED_MODULE_0__.aB; },\n/* harmony export */   \"_overrideRedirectResult\": function() { return /* reexport safe */ _index_69ab4e3a_js__WEBPACK_IMPORTED_MODULE_0__.aC; },\n/* harmony export */   \"_persistenceKeyName\": function() { return /* reexport safe */ _index_69ab4e3a_js__WEBPACK_IMPORTED_MODULE_0__.az; },\n/* harmony export */   \"addFrameworkForLogging\": function() { return /* binding */ addFrameworkForLogging; },\n/* harmony export */   \"applyActionCode\": function() { return /* reexport safe */ _index_69ab4e3a_js__WEBPACK_IMPORTED_MODULE_0__.a2; },\n/* harmony export */   \"beforeAuthStateChanged\": function() { return /* reexport safe */ _index_69ab4e3a_js__WEBPACK_IMPORTED_MODULE_0__.t; },\n/* harmony export */   \"browserLocalPersistence\": function() { return /* reexport safe */ _index_69ab4e3a_js__WEBPACK_IMPORTED_MODULE_0__.b; },\n/* harmony export */   \"browserPopupRedirectResolver\": function() { return /* reexport safe */ _index_69ab4e3a_js__WEBPACK_IMPORTED_MODULE_0__.k; },\n/* harmony export */   \"browserSessionPersistence\": function() { return /* reexport safe */ _index_69ab4e3a_js__WEBPACK_IMPORTED_MODULE_0__.a; },\n/* harmony export */   \"checkActionCode\": function() { return /* reexport safe */ _index_69ab4e3a_js__WEBPACK_IMPORTED_MODULE_0__.a3; },\n/* harmony export */   \"confirmPasswordReset\": function() { return /* reexport safe */ _index_69ab4e3a_js__WEBPACK_IMPORTED_MODULE_0__.a1; },\n/* harmony export */   \"connectAuthEmulator\": function() { return /* reexport safe */ _index_69ab4e3a_js__WEBPACK_IMPORTED_MODULE_0__.G; },\n/* harmony export */   \"cordovaPopupRedirectResolver\": function() { return /* binding */ cordovaPopupRedirectResolver; },\n/* harmony export */   \"createUserWithEmailAndPassword\": function() { return /* reexport safe */ _index_69ab4e3a_js__WEBPACK_IMPORTED_MODULE_0__.a5; },\n/* harmony export */   \"debugErrorMap\": function() { return /* reexport safe */ _index_69ab4e3a_js__WEBPACK_IMPORTED_MODULE_0__.B; },\n/* harmony export */   \"deleteUser\": function() { return /* reexport safe */ _index_69ab4e3a_js__WEBPACK_IMPORTED_MODULE_0__.z; },\n/* harmony export */   \"fetchSignInMethodsForEmail\": function() { return /* reexport safe */ _index_69ab4e3a_js__WEBPACK_IMPORTED_MODULE_0__.aa; },\n/* harmony export */   \"getAdditionalUserInfo\": function() { return /* reexport safe */ _index_69ab4e3a_js__WEBPACK_IMPORTED_MODULE_0__.al; },\n/* harmony export */   \"getAuth\": function() { return /* reexport safe */ _index_69ab4e3a_js__WEBPACK_IMPORTED_MODULE_0__.n; },\n/* harmony export */   \"getIdToken\": function() { return /* reexport safe */ _index_69ab4e3a_js__WEBPACK_IMPORTED_MODULE_0__.ai; },\n/* harmony export */   \"getIdTokenResult\": function() { return /* reexport safe */ _index_69ab4e3a_js__WEBPACK_IMPORTED_MODULE_0__.aj; },\n/* harmony export */   \"getMultiFactorResolver\": function() { return /* reexport safe */ _index_69ab4e3a_js__WEBPACK_IMPORTED_MODULE_0__.an; },\n/* harmony export */   \"getRedirectResult\": function() { return /* reexport safe */ _index_69ab4e3a_js__WEBPACK_IMPORTED_MODULE_0__.j; },\n/* harmony export */   \"inMemoryPersistence\": function() { return /* reexport safe */ _index_69ab4e3a_js__WEBPACK_IMPORTED_MODULE_0__.L; },\n/* harmony export */   \"indexedDBLocalPersistence\": function() { return /* reexport safe */ _index_69ab4e3a_js__WEBPACK_IMPORTED_MODULE_0__.i; },\n/* harmony export */   \"initializeAuth\": function() { return /* reexport safe */ _index_69ab4e3a_js__WEBPACK_IMPORTED_MODULE_0__.E; },\n/* harmony export */   \"isSignInWithEmailLink\": function() { return /* reexport safe */ _index_69ab4e3a_js__WEBPACK_IMPORTED_MODULE_0__.a8; },\n/* harmony export */   \"linkWithCredential\": function() { return /* reexport safe */ _index_69ab4e3a_js__WEBPACK_IMPORTED_MODULE_0__.Z; },\n/* harmony export */   \"linkWithPhoneNumber\": function() { return /* reexport safe */ _index_69ab4e3a_js__WEBPACK_IMPORTED_MODULE_0__.l; },\n/* harmony export */   \"linkWithPopup\": function() { return /* reexport safe */ _index_69ab4e3a_js__WEBPACK_IMPORTED_MODULE_0__.d; },\n/* harmony export */   \"linkWithRedirect\": function() { return /* reexport safe */ _index_69ab4e3a_js__WEBPACK_IMPORTED_MODULE_0__.g; },\n/* harmony export */   \"multiFactor\": function() { return /* reexport safe */ _index_69ab4e3a_js__WEBPACK_IMPORTED_MODULE_0__.ao; },\n/* harmony export */   \"onAuthStateChanged\": function() { return /* reexport safe */ _index_69ab4e3a_js__WEBPACK_IMPORTED_MODULE_0__.v; },\n/* harmony export */   \"onIdTokenChanged\": function() { return /* reexport safe */ _index_69ab4e3a_js__WEBPACK_IMPORTED_MODULE_0__.q; },\n/* harmony export */   \"parseActionCodeURL\": function() { return /* reexport safe */ _index_69ab4e3a_js__WEBPACK_IMPORTED_MODULE_0__.ae; },\n/* harmony export */   \"prodErrorMap\": function() { return /* reexport safe */ _index_69ab4e3a_js__WEBPACK_IMPORTED_MODULE_0__.C; },\n/* harmony export */   \"reauthenticateWithCredential\": function() { return /* reexport safe */ _index_69ab4e3a_js__WEBPACK_IMPORTED_MODULE_0__._; },\n/* harmony export */   \"reauthenticateWithPhoneNumber\": function() { return /* reexport safe */ _index_69ab4e3a_js__WEBPACK_IMPORTED_MODULE_0__.r; },\n/* harmony export */   \"reauthenticateWithPopup\": function() { return /* reexport safe */ _index_69ab4e3a_js__WEBPACK_IMPORTED_MODULE_0__.e; },\n/* harmony export */   \"reauthenticateWithRedirect\": function() { return /* reexport safe */ _index_69ab4e3a_js__WEBPACK_IMPORTED_MODULE_0__.h; },\n/* harmony export */   \"reload\": function() { return /* reexport safe */ _index_69ab4e3a_js__WEBPACK_IMPORTED_MODULE_0__.am; },\n/* harmony export */   \"sendEmailVerification\": function() { return /* reexport safe */ _index_69ab4e3a_js__WEBPACK_IMPORTED_MODULE_0__.ab; },\n/* harmony export */   \"sendPasswordResetEmail\": function() { return /* reexport safe */ _index_69ab4e3a_js__WEBPACK_IMPORTED_MODULE_0__.a0; },\n/* harmony export */   \"sendSignInLinkToEmail\": function() { return /* reexport safe */ _index_69ab4e3a_js__WEBPACK_IMPORTED_MODULE_0__.a7; },\n/* harmony export */   \"setPersistence\": function() { return /* reexport safe */ _index_69ab4e3a_js__WEBPACK_IMPORTED_MODULE_0__.p; },\n/* harmony export */   \"signInAnonymously\": function() { return /* reexport safe */ _index_69ab4e3a_js__WEBPACK_IMPORTED_MODULE_0__.X; },\n/* harmony export */   \"signInWithCredential\": function() { return /* reexport safe */ _index_69ab4e3a_js__WEBPACK_IMPORTED_MODULE_0__.Y; },\n/* harmony export */   \"signInWithCustomToken\": function() { return /* reexport safe */ _index_69ab4e3a_js__WEBPACK_IMPORTED_MODULE_0__.$; },\n/* harmony export */   \"signInWithEmailAndPassword\": function() { return /* reexport safe */ _index_69ab4e3a_js__WEBPACK_IMPORTED_MODULE_0__.a6; },\n/* harmony export */   \"signInWithEmailLink\": function() { return /* reexport safe */ _index_69ab4e3a_js__WEBPACK_IMPORTED_MODULE_0__.a9; },\n/* harmony export */   \"signInWithPhoneNumber\": function() { return /* reexport safe */ _index_69ab4e3a_js__WEBPACK_IMPORTED_MODULE_0__.s; },\n/* harmony export */   \"signInWithPopup\": function() { return /* reexport safe */ _index_69ab4e3a_js__WEBPACK_IMPORTED_MODULE_0__.c; },\n/* harmony export */   \"signInWithRedirect\": function() { return /* reexport safe */ _index_69ab4e3a_js__WEBPACK_IMPORTED_MODULE_0__.f; },\n/* harmony export */   \"signOut\": function() { return /* reexport safe */ _index_69ab4e3a_js__WEBPACK_IMPORTED_MODULE_0__.y; },\n/* harmony export */   \"unlink\": function() { return /* reexport safe */ _index_69ab4e3a_js__WEBPACK_IMPORTED_MODULE_0__.ak; },\n/* harmony export */   \"updateCurrentUser\": function() { return /* reexport safe */ _index_69ab4e3a_js__WEBPACK_IMPORTED_MODULE_0__.x; },\n/* harmony export */   \"updateEmail\": function() { return /* reexport safe */ _index_69ab4e3a_js__WEBPACK_IMPORTED_MODULE_0__.ag; },\n/* harmony export */   \"updatePassword\": function() { return /* reexport safe */ _index_69ab4e3a_js__WEBPACK_IMPORTED_MODULE_0__.ah; },\n/* harmony export */   \"updatePhoneNumber\": function() { return /* reexport safe */ _index_69ab4e3a_js__WEBPACK_IMPORTED_MODULE_0__.u; },\n/* harmony export */   \"updateProfile\": function() { return /* reexport safe */ _index_69ab4e3a_js__WEBPACK_IMPORTED_MODULE_0__.af; },\n/* harmony export */   \"useDeviceLanguage\": function() { return /* reexport safe */ _index_69ab4e3a_js__WEBPACK_IMPORTED_MODULE_0__.w; },\n/* harmony export */   \"verifyBeforeUpdateEmail\": function() { return /* reexport safe */ _index_69ab4e3a_js__WEBPACK_IMPORTED_MODULE_0__.ac; },\n/* harmony export */   \"verifyPasswordResetCode\": function() { return /* reexport safe */ _index_69ab4e3a_js__WEBPACK_IMPORTED_MODULE_0__.a4; }\n/* harmony export */ });\n/* harmony import */ var _index_69ab4e3a_js__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ./index-69ab4e3a.js */ \"./node_modules/@firebase/auth/dist/esm2017/index-69ab4e3a.js\");\n/* harmony import */ var _firebase_util__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! @firebase/util */ \"./node_modules/@firebase/util/dist/index.esm2017.js\");\n/* harmony import */ var _firebase_app__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! @firebase/app */ \"./node_modules/@firebase/app/dist/esm/index.esm2017.js\");\n/* harmony import */ var _firebase_logger__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! @firebase/logger */ \"./node_modules/@firebase/logger/dist/esm/index.esm2017.js\");\n/* harmony import */ var _firebase_component__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! @firebase/component */ \"./node_modules/@firebase/component/dist/esm/index.esm2017.js\");\n\n\n\n\n\n\n\n\n/**\r\n * @license\r\n * Copyright 2021 Google LLC\r\n *\r\n * Licensed under the Apache License, Version 2.0 (the \"License\");\r\n * you may not use this file except in compliance with the License.\r\n * You may obtain a copy of the License at\r\n *\r\n *   http://www.apache.org/licenses/LICENSE-2.0\r\n *\r\n * Unless required by applicable law or agreed to in writing, software\r\n * distributed under the License is distributed on an \"AS IS\" BASIS,\r\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\r\n * See the License for the specific language governing permissions and\r\n * limitations under the License.\r\n */\r\nfunction _cordovaWindow() {\r\n    return window;\r\n}\n\n/**\r\n * @license\r\n * Copyright 2020 Google LLC\r\n *\r\n * Licensed under the Apache License, Version 2.0 (the \"License\");\r\n * you may not use this file except in compliance with the License.\r\n * You may obtain a copy of the License at\r\n *\r\n *   http://www.apache.org/licenses/LICENSE-2.0\r\n *\r\n * Unless required by applicable law or agreed to in writing, software\r\n * distributed under the License is distributed on an \"AS IS\" BASIS,\r\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\r\n * See the License for the specific language governing permissions and\r\n * limitations under the License.\r\n */\r\n/**\r\n * How long to wait after the app comes back into focus before concluding that\r\n * the user closed the sign in tab.\r\n */\r\nconst REDIRECT_TIMEOUT_MS = 2000;\r\n/**\r\n * Generates the URL for the OAuth handler.\r\n */\r\nasync function _generateHandlerUrl(auth, event, provider) {\r\n    var _a;\r\n    // Get the cordova plugins\r\n    const { BuildInfo } = _cordovaWindow();\r\n    (0,_index_69ab4e3a_js__WEBPACK_IMPORTED_MODULE_0__.aq)(event.sessionId, 'AuthEvent did not contain a session ID');\r\n    const sessionDigest = await computeSha256(event.sessionId);\r\n    const additionalParams = {};\r\n    if ((0,_index_69ab4e3a_js__WEBPACK_IMPORTED_MODULE_0__.ar)()) {\r\n        // iOS app identifier\r\n        additionalParams['ibi'] = BuildInfo.packageName;\r\n    }\r\n    else if ((0,_index_69ab4e3a_js__WEBPACK_IMPORTED_MODULE_0__.as)()) {\r\n        // Android app identifier\r\n        additionalParams['apn'] = BuildInfo.packageName;\r\n    }\r\n    else {\r\n        (0,_index_69ab4e3a_js__WEBPACK_IMPORTED_MODULE_0__.at)(auth, \"operation-not-supported-in-this-environment\" /* OPERATION_NOT_SUPPORTED */);\r\n    }\r\n    // Add the display name if available\r\n    if (BuildInfo.displayName) {\r\n        additionalParams['appDisplayName'] = BuildInfo.displayName;\r\n    }\r\n    // Attached the hashed session ID\r\n    additionalParams['sessionId'] = sessionDigest;\r\n    return (0,_index_69ab4e3a_js__WEBPACK_IMPORTED_MODULE_0__.au)(auth, provider, event.type, undefined, (_a = event.eventId) !== null && _a !== void 0 ? _a : undefined, additionalParams);\r\n}\r\n/**\r\n * Validates that this app is valid for this project configuration\r\n */\r\nasync function _validateOrigin(auth) {\r\n    const { BuildInfo } = _cordovaWindow();\r\n    const request = {};\r\n    if ((0,_index_69ab4e3a_js__WEBPACK_IMPORTED_MODULE_0__.ar)()) {\r\n        request.iosBundleId = BuildInfo.packageName;\r\n    }\r\n    else if ((0,_index_69ab4e3a_js__WEBPACK_IMPORTED_MODULE_0__.as)()) {\r\n        request.androidPackageName = BuildInfo.packageName;\r\n    }\r\n    else {\r\n        (0,_index_69ab4e3a_js__WEBPACK_IMPORTED_MODULE_0__.at)(auth, \"operation-not-supported-in-this-environment\" /* OPERATION_NOT_SUPPORTED */);\r\n    }\r\n    // Will fail automatically if package name is not authorized\r\n    await (0,_index_69ab4e3a_js__WEBPACK_IMPORTED_MODULE_0__.av)(auth, request);\r\n}\r\nfunction _performRedirect(handlerUrl) {\r\n    // Get the cordova plugins\r\n    const { cordova } = _cordovaWindow();\r\n    return new Promise(resolve => {\r\n        cordova.plugins.browsertab.isAvailable(browserTabIsAvailable => {\r\n            let iabRef = null;\r\n            if (browserTabIsAvailable) {\r\n                cordova.plugins.browsertab.openUrl(handlerUrl);\r\n            }\r\n            else {\r\n                // TODO: Return the inappbrowser ref that's returned from the open call\r\n                iabRef = cordova.InAppBrowser.open(handlerUrl, (0,_index_69ab4e3a_js__WEBPACK_IMPORTED_MODULE_0__.ap)() ? '_blank' : '_system', 'location=yes');\r\n            }\r\n            resolve(iabRef);\r\n        });\r\n    });\r\n}\r\n/**\r\n * This function waits for app activity to be seen before resolving. It does\r\n * this by attaching listeners to various dom events. Once the app is determined\r\n * to be visible, this promise resolves. AFTER that resolution, the listeners\r\n * are detached and any browser tabs left open will be closed.\r\n */\r\nasync function _waitForAppResume(auth, eventListener, iabRef) {\r\n    // Get the cordova plugins\r\n    const { cordova } = _cordovaWindow();\r\n    let cleanup = () => { };\r\n    try {\r\n        await new Promise((resolve, reject) => {\r\n            let onCloseTimer = null;\r\n            // DEFINE ALL THE CALLBACKS =====\r\n            function authEventSeen() {\r\n                var _a;\r\n                // Auth event was detected. Resolve this promise and close the extra\r\n                // window if it's still open.\r\n                resolve();\r\n                const closeBrowserTab = (_a = cordova.plugins.browsertab) === null || _a === void 0 ? void 0 : _a.close;\r\n                if (typeof closeBrowserTab === 'function') {\r\n                    closeBrowserTab();\r\n                }\r\n                // Close inappbrowser emebedded webview in iOS7 and 8 case if still\r\n                // open.\r\n                if (typeof (iabRef === null || iabRef === void 0 ? void 0 : iabRef.close) === 'function') {\r\n                    iabRef.close();\r\n                }\r\n            }\r\n            function resumed() {\r\n                if (onCloseTimer) {\r\n                    // This code already ran; do not rerun.\r\n                    return;\r\n                }\r\n                onCloseTimer = window.setTimeout(() => {\r\n                    // Wait two seeconds after resume then reject.\r\n                    reject((0,_index_69ab4e3a_js__WEBPACK_IMPORTED_MODULE_0__.aw)(auth, \"redirect-cancelled-by-user\" /* REDIRECT_CANCELLED_BY_USER */));\r\n                }, REDIRECT_TIMEOUT_MS);\r\n            }\r\n            function visibilityChanged() {\r\n                if ((document === null || document === void 0 ? void 0 : document.visibilityState) === 'visible') {\r\n                    resumed();\r\n                }\r\n            }\r\n            // ATTACH ALL THE LISTENERS =====\r\n            // Listen for the auth event\r\n            eventListener.addPassiveListener(authEventSeen);\r\n            // Listen for resume and visibility events\r\n            document.addEventListener('resume', resumed, false);\r\n            if ((0,_index_69ab4e3a_js__WEBPACK_IMPORTED_MODULE_0__.as)()) {\r\n                document.addEventListener('visibilitychange', visibilityChanged, false);\r\n            }\r\n            // SETUP THE CLEANUP FUNCTION =====\r\n            cleanup = () => {\r\n                eventListener.removePassiveListener(authEventSeen);\r\n                document.removeEventListener('resume', resumed, false);\r\n                document.removeEventListener('visibilitychange', visibilityChanged, false);\r\n                if (onCloseTimer) {\r\n                    window.clearTimeout(onCloseTimer);\r\n                }\r\n            };\r\n        });\r\n    }\r\n    finally {\r\n        cleanup();\r\n    }\r\n}\r\n/**\r\n * Checks the configuration of the Cordova environment. This has no side effect\r\n * if the configuration is correct; otherwise it throws an error with the\r\n * missing plugin.\r\n */\r\nfunction _checkCordovaConfiguration(auth) {\r\n    var _a, _b, _c, _d, _e, _f, _g, _h, _j, _k;\r\n    const win = _cordovaWindow();\r\n    // Check all dependencies installed.\r\n    // https://github.com/nordnet/cordova-universal-links-plugin\r\n    // Note that cordova-universal-links-plugin has been abandoned.\r\n    // A fork with latest fixes is available at:\r\n    // https://www.npmjs.com/package/cordova-universal-links-plugin-fix\r\n    (0,_index_69ab4e3a_js__WEBPACK_IMPORTED_MODULE_0__.ax)(typeof ((_a = win === null || win === void 0 ? void 0 : win.universalLinks) === null || _a === void 0 ? void 0 : _a.subscribe) === 'function', auth, \"invalid-cordova-configuration\" /* INVALID_CORDOVA_CONFIGURATION */, {\r\n        missingPlugin: 'cordova-universal-links-plugin-fix'\r\n    });\r\n    // https://www.npmjs.com/package/cordova-plugin-buildinfo\r\n    (0,_index_69ab4e3a_js__WEBPACK_IMPORTED_MODULE_0__.ax)(typeof ((_b = win === null || win === void 0 ? void 0 : win.BuildInfo) === null || _b === void 0 ? void 0 : _b.packageName) !== 'undefined', auth, \"invalid-cordova-configuration\" /* INVALID_CORDOVA_CONFIGURATION */, {\r\n        missingPlugin: 'cordova-plugin-buildInfo'\r\n    });\r\n    // https://github.com/google/cordova-plugin-browsertab\r\n    (0,_index_69ab4e3a_js__WEBPACK_IMPORTED_MODULE_0__.ax)(typeof ((_e = (_d = (_c = win === null || win === void 0 ? void 0 : win.cordova) === null || _c === void 0 ? void 0 : _c.plugins) === null || _d === void 0 ? void 0 : _d.browsertab) === null || _e === void 0 ? void 0 : _e.openUrl) === 'function', auth, \"invalid-cordova-configuration\" /* INVALID_CORDOVA_CONFIGURATION */, {\r\n        missingPlugin: 'cordova-plugin-browsertab'\r\n    });\r\n    (0,_index_69ab4e3a_js__WEBPACK_IMPORTED_MODULE_0__.ax)(typeof ((_h = (_g = (_f = win === null || win === void 0 ? void 0 : win.cordova) === null || _f === void 0 ? void 0 : _f.plugins) === null || _g === void 0 ? void 0 : _g.browsertab) === null || _h === void 0 ? void 0 : _h.isAvailable) === 'function', auth, \"invalid-cordova-configuration\" /* INVALID_CORDOVA_CONFIGURATION */, {\r\n        missingPlugin: 'cordova-plugin-browsertab'\r\n    });\r\n    // https://cordova.apache.org/docs/en/latest/reference/cordova-plugin-inappbrowser/\r\n    (0,_index_69ab4e3a_js__WEBPACK_IMPORTED_MODULE_0__.ax)(typeof ((_k = (_j = win === null || win === void 0 ? void 0 : win.cordova) === null || _j === void 0 ? void 0 : _j.InAppBrowser) === null || _k === void 0 ? void 0 : _k.open) === 'function', auth, \"invalid-cordova-configuration\" /* INVALID_CORDOVA_CONFIGURATION */, {\r\n        missingPlugin: 'cordova-plugin-inappbrowser'\r\n    });\r\n}\r\n/**\r\n * Computes the SHA-256 of a session ID. The SubtleCrypto interface is only\r\n * available in \"secure\" contexts, which covers Cordova (which is served on a file\r\n * protocol).\r\n */\r\nasync function computeSha256(sessionId) {\r\n    const bytes = stringToArrayBuffer(sessionId);\r\n    // TODO: For IE11 crypto has a different name and this operation comes back\r\n    //       as an object, not a promise. This is the old proposed standard that\r\n    //       is used by IE11:\r\n    // https://www.w3.org/TR/2013/WD-WebCryptoAPI-20130108/#cryptooperation-interface\r\n    const buf = await crypto.subtle.digest('SHA-256', bytes);\r\n    const arr = Array.from(new Uint8Array(buf));\r\n    return arr.map(num => num.toString(16).padStart(2, '0')).join('');\r\n}\r\nfunction stringToArrayBuffer(str) {\r\n    // This function is only meant to deal with an ASCII charset and makes\r\n    // certain simplifying assumptions.\r\n    (0,_index_69ab4e3a_js__WEBPACK_IMPORTED_MODULE_0__.aq)(/[0-9a-zA-Z]+/.test(str), 'Can only convert alpha-numeric strings');\r\n    if (typeof TextEncoder !== 'undefined') {\r\n        return new TextEncoder().encode(str);\r\n    }\r\n    const buff = new ArrayBuffer(str.length);\r\n    const view = new Uint8Array(buff);\r\n    for (let i = 0; i < str.length; i++) {\r\n        view[i] = str.charCodeAt(i);\r\n    }\r\n    return view;\r\n}\n\n/**\r\n * @license\r\n * Copyright 2020 Google LLC\r\n *\r\n * Licensed under the Apache License, Version 2.0 (the \"License\");\r\n * you may not use this file except in compliance with the License.\r\n * You may obtain a copy of the License at\r\n *\r\n *   http://www.apache.org/licenses/LICENSE-2.0\r\n *\r\n * Unless required by applicable law or agreed to in writing, software\r\n * distributed under the License is distributed on an \"AS IS\" BASIS,\r\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\r\n * See the License for the specific language governing permissions and\r\n * limitations under the License.\r\n */\r\nconst SESSION_ID_LENGTH = 20;\r\n/** Custom AuthEventManager that adds passive listeners to events */\r\nclass CordovaAuthEventManager extends _index_69ab4e3a_js__WEBPACK_IMPORTED_MODULE_0__.aA {\r\n    constructor() {\r\n        super(...arguments);\r\n        this.passiveListeners = new Set();\r\n        this.initPromise = new Promise(resolve => {\r\n            this.resolveInialized = resolve;\r\n        });\r\n    }\r\n    addPassiveListener(cb) {\r\n        this.passiveListeners.add(cb);\r\n    }\r\n    removePassiveListener(cb) {\r\n        this.passiveListeners.delete(cb);\r\n    }\r\n    // In a Cordova environment, this manager can live through multiple redirect\r\n    // operations\r\n    resetRedirect() {\r\n        this.queuedRedirectEvent = null;\r\n        this.hasHandledPotentialRedirect = false;\r\n    }\r\n    /** Override the onEvent method */\r\n    onEvent(event) {\r\n        this.resolveInialized();\r\n        this.passiveListeners.forEach(cb => cb(event));\r\n        return super.onEvent(event);\r\n    }\r\n    async initialized() {\r\n        await this.initPromise;\r\n    }\r\n}\r\n/**\r\n * Generates a (partial) {@link AuthEvent}.\r\n */\r\nfunction _generateNewEvent(auth, type, eventId = null) {\r\n    return {\r\n        type,\r\n        eventId,\r\n        urlResponse: null,\r\n        sessionId: generateSessionId(),\r\n        postBody: null,\r\n        tenantId: auth.tenantId,\r\n        error: (0,_index_69ab4e3a_js__WEBPACK_IMPORTED_MODULE_0__.aw)(auth, \"no-auth-event\" /* NO_AUTH_EVENT */)\r\n    };\r\n}\r\nfunction _savePartialEvent(auth, event) {\r\n    return storage()._set(persistenceKey(auth), event);\r\n}\r\nasync function _getAndRemoveEvent(auth) {\r\n    const event = (await storage()._get(persistenceKey(auth)));\r\n    if (event) {\r\n        await storage()._remove(persistenceKey(auth));\r\n    }\r\n    return event;\r\n}\r\nfunction _eventFromPartialAndUrl(partialEvent, url) {\r\n    var _a, _b;\r\n    // Parse the deep link within the dynamic link URL.\r\n    const callbackUrl = _getDeepLinkFromCallback(url);\r\n    // Confirm it is actually a callback URL.\r\n    // Currently the universal link will be of this format:\r\n    // https://<AUTH_DOMAIN>/__/auth/callback<OAUTH_RESPONSE>\r\n    // This is a fake URL but is not intended to take the user anywhere\r\n    // and just redirect to the app.\r\n    if (callbackUrl.includes('/__/auth/callback')) {\r\n        // Check if there is an error in the URL.\r\n        // This mechanism is also used to pass errors back to the app:\r\n        // https://<AUTH_DOMAIN>/__/auth/callback?firebaseError=<STRINGIFIED_ERROR>\r\n        const params = searchParamsOrEmpty(callbackUrl);\r\n        // Get the error object corresponding to the stringified error if found.\r\n        const errorObject = params['firebaseError']\r\n            ? parseJsonOrNull(decodeURIComponent(params['firebaseError']))\r\n            : null;\r\n        const code = (_b = (_a = errorObject === null || errorObject === void 0 ? void 0 : errorObject['code']) === null || _a === void 0 ? void 0 : _a.split('auth/')) === null || _b === void 0 ? void 0 : _b[1];\r\n        const error = code ? (0,_index_69ab4e3a_js__WEBPACK_IMPORTED_MODULE_0__.aw)(code) : null;\r\n        if (error) {\r\n            return {\r\n                type: partialEvent.type,\r\n                eventId: partialEvent.eventId,\r\n                tenantId: partialEvent.tenantId,\r\n                error,\r\n                urlResponse: null,\r\n                sessionId: null,\r\n                postBody: null\r\n            };\r\n        }\r\n        else {\r\n            return {\r\n                type: partialEvent.type,\r\n                eventId: partialEvent.eventId,\r\n                tenantId: partialEvent.tenantId,\r\n                sessionId: partialEvent.sessionId,\r\n                urlResponse: callbackUrl,\r\n                postBody: null\r\n            };\r\n        }\r\n    }\r\n    return null;\r\n}\r\nfunction generateSessionId() {\r\n    const chars = [];\r\n    const allowedChars = '1234567890abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ';\r\n    for (let i = 0; i < SESSION_ID_LENGTH; i++) {\r\n        const idx = Math.floor(Math.random() * allowedChars.length);\r\n        chars.push(allowedChars.charAt(idx));\r\n    }\r\n    return chars.join('');\r\n}\r\nfunction storage() {\r\n    return (0,_index_69ab4e3a_js__WEBPACK_IMPORTED_MODULE_0__.ay)(_index_69ab4e3a_js__WEBPACK_IMPORTED_MODULE_0__.b);\r\n}\r\nfunction persistenceKey(auth) {\r\n    return (0,_index_69ab4e3a_js__WEBPACK_IMPORTED_MODULE_0__.az)(\"authEvent\" /* AUTH_EVENT */, auth.config.apiKey, auth.name);\r\n}\r\nfunction parseJsonOrNull(json) {\r\n    try {\r\n        return JSON.parse(json);\r\n    }\r\n    catch (e) {\r\n        return null;\r\n    }\r\n}\r\n// Exported for testing\r\nfunction _getDeepLinkFromCallback(url) {\r\n    const params = searchParamsOrEmpty(url);\r\n    const link = params['link'] ? decodeURIComponent(params['link']) : undefined;\r\n    // Double link case (automatic redirect)\r\n    const doubleDeepLink = searchParamsOrEmpty(link)['link'];\r\n    // iOS custom scheme links.\r\n    const iOSDeepLink = params['deep_link_id']\r\n        ? decodeURIComponent(params['deep_link_id'])\r\n        : undefined;\r\n    const iOSDoubleDeepLink = searchParamsOrEmpty(iOSDeepLink)['link'];\r\n    return iOSDoubleDeepLink || iOSDeepLink || doubleDeepLink || link || url;\r\n}\r\n/**\r\n * Optimistically tries to get search params from a string, or else returns an\r\n * empty search params object.\r\n */\r\nfunction searchParamsOrEmpty(url) {\r\n    if (!(url === null || url === void 0 ? void 0 : url.includes('?'))) {\r\n        return {};\r\n    }\r\n    const [_, ...rest] = url.split('?');\r\n    return (0,_firebase_util__WEBPACK_IMPORTED_MODULE_1__.querystringDecode)(rest.join('?'));\r\n}\n\n/**\r\n * @license\r\n * Copyright 2021 Google LLC\r\n *\r\n * Licensed under the Apache License, Version 2.0 (the \"License\");\r\n * you may not use this file except in compliance with the License.\r\n * You may obtain a copy of the License at\r\n *\r\n *   http://www.apache.org/licenses/LICENSE-2.0\r\n *\r\n * Unless required by applicable law or agreed to in writing, software\r\n * distributed under the License is distributed on an \"AS IS\" BASIS,\r\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\r\n * See the License for the specific language governing permissions and\r\n * limitations under the License.\r\n */\r\n/**\r\n * How long to wait for the initial auth event before concluding no\r\n * redirect pending\r\n */\r\nconst INITIAL_EVENT_TIMEOUT_MS = 500;\r\nclass CordovaPopupRedirectResolver {\r\n    constructor() {\r\n        this._redirectPersistence = _index_69ab4e3a_js__WEBPACK_IMPORTED_MODULE_0__.a;\r\n        this._shouldInitProactively = true; // This is lightweight for Cordova\r\n        this.eventManagers = new Map();\r\n        this.originValidationPromises = {};\r\n        this._completeRedirectFn = _index_69ab4e3a_js__WEBPACK_IMPORTED_MODULE_0__.aB;\r\n        this._overrideRedirectResult = _index_69ab4e3a_js__WEBPACK_IMPORTED_MODULE_0__.aC;\r\n    }\r\n    async _initialize(auth) {\r\n        const key = auth._key();\r\n        let manager = this.eventManagers.get(key);\r\n        if (!manager) {\r\n            manager = new CordovaAuthEventManager(auth);\r\n            this.eventManagers.set(key, manager);\r\n            this.attachCallbackListeners(auth, manager);\r\n        }\r\n        return manager;\r\n    }\r\n    _openPopup(auth) {\r\n        (0,_index_69ab4e3a_js__WEBPACK_IMPORTED_MODULE_0__.at)(auth, \"operation-not-supported-in-this-environment\" /* OPERATION_NOT_SUPPORTED */);\r\n    }\r\n    async _openRedirect(auth, provider, authType, eventId) {\r\n        _checkCordovaConfiguration(auth);\r\n        const manager = await this._initialize(auth);\r\n        await manager.initialized();\r\n        // Reset the persisted redirect states. This does not matter on Web where\r\n        // the redirect always blows away application state entirely. On Cordova,\r\n        // the app maintains control flow through the redirect.\r\n        manager.resetRedirect();\r\n        (0,_index_69ab4e3a_js__WEBPACK_IMPORTED_MODULE_0__.aD)();\r\n        await this._originValidation(auth);\r\n        const event = _generateNewEvent(auth, authType, eventId);\r\n        await _savePartialEvent(auth, event);\r\n        const url = await _generateHandlerUrl(auth, event, provider);\r\n        const iabRef = await _performRedirect(url);\r\n        return _waitForAppResume(auth, manager, iabRef);\r\n    }\r\n    _isIframeWebStorageSupported(_auth, _cb) {\r\n        throw new Error('Method not implemented.');\r\n    }\r\n    _originValidation(auth) {\r\n        const key = auth._key();\r\n        if (!this.originValidationPromises[key]) {\r\n            this.originValidationPromises[key] = _validateOrigin(auth);\r\n        }\r\n        return this.originValidationPromises[key];\r\n    }\r\n    attachCallbackListeners(auth, manager) {\r\n        // Get the global plugins\r\n        const { universalLinks, handleOpenURL, BuildInfo } = _cordovaWindow();\r\n        const noEventTimeout = setTimeout(async () => {\r\n            // We didn't see that initial event. Clear any pending object and\r\n            // dispatch no event\r\n            await _getAndRemoveEvent(auth);\r\n            manager.onEvent(generateNoEvent());\r\n        }, INITIAL_EVENT_TIMEOUT_MS);\r\n        const universalLinksCb = async (eventData) => {\r\n            // We have an event so we can clear the no event timeout\r\n            clearTimeout(noEventTimeout);\r\n            const partialEvent = await _getAndRemoveEvent(auth);\r\n            let finalEvent = null;\r\n            if (partialEvent && (eventData === null || eventData === void 0 ? void 0 : eventData['url'])) {\r\n                finalEvent = _eventFromPartialAndUrl(partialEvent, eventData['url']);\r\n            }\r\n            // If finalEvent is never filled, trigger with no event\r\n            manager.onEvent(finalEvent || generateNoEvent());\r\n        };\r\n        // Universal links subscriber doesn't exist for iOS, so we need to check\r\n        if (typeof universalLinks !== 'undefined' &&\r\n            typeof universalLinks.subscribe === 'function') {\r\n            universalLinks.subscribe(null, universalLinksCb);\r\n        }\r\n        // iOS 7 or 8 custom URL schemes.\r\n        // This is also the current default behavior for iOS 9+.\r\n        // For this to work, cordova-plugin-customurlscheme needs to be installed.\r\n        // https://github.com/EddyVerbruggen/Custom-URL-scheme\r\n        // Do not overwrite the existing developer's URL handler.\r\n        const existingHandleOpenURL = handleOpenURL;\r\n        const packagePrefix = `${BuildInfo.packageName.toLowerCase()}://`;\r\n        _cordovaWindow().handleOpenURL = async (url) => {\r\n            if (url.toLowerCase().startsWith(packagePrefix)) {\r\n                // We want this intentionally to float\r\n                // eslint-disable-next-line @typescript-eslint/no-floating-promises\r\n                universalLinksCb({ url });\r\n            }\r\n            // Call the developer's handler if it is present.\r\n            if (typeof existingHandleOpenURL === 'function') {\r\n                try {\r\n                    existingHandleOpenURL(url);\r\n                }\r\n                catch (e) {\r\n                    // This is a developer error. Don't stop the flow of the SDK.\r\n                    console.error(e);\r\n                }\r\n            }\r\n        };\r\n    }\r\n}\r\n/**\r\n * An implementation of {@link PopupRedirectResolver} suitable for Cordova\r\n * based applications.\r\n *\r\n * @public\r\n */\r\nconst cordovaPopupRedirectResolver = CordovaPopupRedirectResolver;\r\nfunction generateNoEvent() {\r\n    return {\r\n        type: \"unknown\" /* UNKNOWN */,\r\n        eventId: null,\r\n        sessionId: null,\r\n        urlResponse: null,\r\n        postBody: null,\r\n        tenantId: null,\r\n        error: (0,_index_69ab4e3a_js__WEBPACK_IMPORTED_MODULE_0__.aw)(\"no-auth-event\" /* NO_AUTH_EVENT */)\r\n    };\r\n}\n\n/**\r\n * @license\r\n * Copyright 2017 Google LLC\r\n *\r\n * Licensed under the Apache License, Version 2.0 (the \"License\");\r\n * you may not use this file except in compliance with the License.\r\n * You may obtain a copy of the License at\r\n *\r\n *   http://www.apache.org/licenses/LICENSE-2.0\r\n *\r\n * Unless required by applicable law or agreed to in writing, software\r\n * distributed under the License is distributed on an \"AS IS\" BASIS,\r\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\r\n * See the License for the specific language governing permissions and\r\n * limitations under the License.\r\n */\r\n// This function should only be called by frameworks (e.g. FirebaseUI-web) to log their usage.\r\n// It is not intended for direct use by developer apps. NO jsdoc here to intentionally leave it out\r\n// of autogenerated documentation pages to reduce accidental misuse.\r\nfunction addFrameworkForLogging(auth, framework) {\r\n    (0,_index_69ab4e3a_js__WEBPACK_IMPORTED_MODULE_0__.aE)(auth)._logFramework(framework);\r\n}\n\n\n//# sourceMappingURL=internal.js.map\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiLi9ub2RlX21vZHVsZXMvQGZpcmViYXNlL2F1dGgvZGlzdC9lc20yMDE3L2ludGVybmFsLmpzLmpzIiwibWFwcGluZ3MiOiI7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7QUFBdWI7QUFDbzBEO0FBQ3hzRTtBQUM1QjtBQUNSO0FBQ1c7QUFDRzs7QUFFN0I7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsWUFBWSxZQUFZO0FBQ3hCLElBQUksc0RBQVc7QUFDZjtBQUNBO0FBQ0EsUUFBUSxzREFBTTtBQUNkO0FBQ0E7QUFDQTtBQUNBLGFBQWEsc0RBQVU7QUFDdkI7QUFDQTtBQUNBO0FBQ0E7QUFDQSxRQUFRLHNEQUFLO0FBQ2I7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxXQUFXLHNEQUFlO0FBQzFCO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxZQUFZLFlBQVk7QUFDeEI7QUFDQSxRQUFRLHNEQUFNO0FBQ2Q7QUFDQTtBQUNBLGFBQWEsc0RBQVU7QUFDdkI7QUFDQTtBQUNBO0FBQ0EsUUFBUSxzREFBSztBQUNiO0FBQ0E7QUFDQSxVQUFVLHNEQUFpQjtBQUMzQjtBQUNBO0FBQ0E7QUFDQSxZQUFZLFVBQVU7QUFDdEI7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLCtEQUErRCxzREFBVTtBQUN6RTtBQUNBO0FBQ0Es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QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLElBQUksc0RBQVM7QUFDYjs7QUFFZ0U7QUFDaEUiLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly9fTl9FLy4vbm9kZV9tb2R1bGVzL0BmaXJlYmFzZS9hdXRoL2Rpc3QvZXNtMjAxNy9pbnRlcm5hbC5qcz9hYTZhIl0sInNvdXJjZXNDb250ZW50IjpbImltcG9ydCB7IGFwIGFzIF9pc0lPUzdPcjgsIGFxIGFzIGRlYnVnQXNzZXJ0LCBhciBhcyBfaXNJT1MsIGFzIGFzIF9pc0FuZHJvaWQsIGF0IGFzIF9mYWlsLCBhdSBhcyBfZ2V0UmVkaXJlY3RVcmwsIGF2IGFzIF9nZXRQcm9qZWN0Q29uZmlnLCBhdyBhcyBfY3JlYXRlRXJyb3IsIGF4IGFzIF9hc3NlcnQsIGF5IGFzIF9nZXRJbnN0YW5jZSwgYiBhcyBicm93c2VyTG9jYWxQZXJzaXN0ZW5jZSwgYXogYXMgX3BlcnNpc3RlbmNlS2V5TmFtZSwgYUEgYXMgQXV0aEV2ZW50TWFuYWdlciwgYSBhcyBicm93c2VyU2Vzc2lvblBlcnNpc3RlbmNlLCBhQiBhcyBfZ2V0UmVkaXJlY3RSZXN1bHQsIGFDIGFzIF9vdmVycmlkZVJlZGlyZWN0UmVzdWx0LCBhRCBhcyBfY2xlYXJSZWRpcmVjdE91dGNvbWVzLCBhRSBhcyBfY2FzdEF1dGggfSBmcm9tICcuL2luZGV4LTY5YWI0ZTNhLmpzJztcbmV4cG9ydCB7IEEgYXMgQWN0aW9uQ29kZU9wZXJhdGlvbiwgYWQgYXMgQWN0aW9uQ29kZVVSTCwgSCBhcyBBdXRoQ3JlZGVudGlhbCwgRCBhcyBBdXRoRXJyb3JDb2RlcywgYUcgYXMgQXV0aEltcGwsIGFKIGFzIEF1dGhQb3B1cCwgSSBhcyBFbWFpbEF1dGhDcmVkZW50aWFsLCBNIGFzIEVtYWlsQXV0aFByb3ZpZGVyLCBOIGFzIEZhY2Vib29rQXV0aFByb3ZpZGVyLCBGIGFzIEZhY3RvcklkLCBhSyBhcyBGZXRjaFByb3ZpZGVyLCBUIGFzIEdpdGh1YkF1dGhQcm92aWRlciwgUSBhcyBHb29nbGVBdXRoUHJvdmlkZXIsIEogYXMgT0F1dGhDcmVkZW50aWFsLCBVIGFzIE9BdXRoUHJvdmlkZXIsIE8gYXMgT3BlcmF0aW9uVHlwZSwgSyBhcyBQaG9uZUF1dGhDcmVkZW50aWFsLCBQIGFzIFBob25lQXV0aFByb3ZpZGVyLCBtIGFzIFBob25lTXVsdGlGYWN0b3JHZW5lcmF0b3IsIG8gYXMgUHJvdmlkZXJJZCwgUiBhcyBSZWNhcHRjaGFWZXJpZmllciwgYUwgYXMgU0FNTEF1dGhDcmVkZW50aWFsLCBWIGFzIFNBTUxBdXRoUHJvdmlkZXIsIFMgYXMgU2lnbkluTWV0aG9kLCBXIGFzIFR3aXR0ZXJBdXRoUHJvdmlkZXIsIGFGIGFzIFVzZXJJbXBsLCBheCBhcyBfYXNzZXJ0LCBhRSBhcyBfY2FzdEF1dGgsIGF0IGFzIF9mYWlsLCBhSSBhcyBfZ2VuZXJhdGVFdmVudElkLCBhSCBhcyBfZ2V0Q2xpZW50VmVyc2lvbiwgYXkgYXMgX2dldEluc3RhbmNlLCBhQiBhcyBfZ2V0UmVkaXJlY3RSZXN1bHQsIGFDIGFzIF9vdmVycmlkZVJlZGlyZWN0UmVzdWx0LCBheiBhcyBfcGVyc2lzdGVuY2VLZXlOYW1lLCBhMiBhcyBhcHBseUFjdGlvbkNvZGUsIHQgYXMgYmVmb3JlQXV0aFN0YXRlQ2hhbmdlZCwgYiBhcyBicm93c2VyTG9jYWxQZXJzaXN0ZW5jZSwgayBhcyBicm93c2VyUG9wdXBSZWRpcmVjdFJlc29sdmVyLCBhIGFzIGJyb3dzZXJTZXNzaW9uUGVyc2lzdGVuY2UsIGEzIGFzIGNoZWNrQWN0aW9uQ29kZSwgYTEgYXMgY29uZmlybVBhc3N3b3JkUmVzZXQsIEcgYXMgY29ubmVjdEF1dGhFbXVsYXRvciwgYTUgYXMgY3JlYXRlVXNlcldpdGhFbWFpbEFuZFBhc3N3b3JkLCBCIGFzIGRlYnVnRXJyb3JNYXAsIHogYXMgZGVsZXRlVXNlciwgYWEgYXMgZmV0Y2hTaWduSW5NZXRob2RzRm9yRW1haWwsIGFsIGFzIGdldEFkZGl0aW9uYWxVc2VySW5mbywgbiBhcyBnZXRBdXRoLCBhaSBhcyBnZXRJZFRva2VuLCBhaiBhcyBnZXRJZFRva2VuUmVzdWx0LCBhbiBhcyBnZXRNdWx0aUZhY3RvclJlc29sdmVyLCBqIGFzIGdldFJlZGlyZWN0UmVzdWx0LCBMIGFzIGluTWVtb3J5UGVyc2lzdGVuY2UsIGkgYXMgaW5kZXhlZERCTG9jYWxQZXJzaXN0ZW5jZSwgRSBhcyBpbml0aWFsaXplQXV0aCwgYTggYXMgaXNTaWduSW5XaXRoRW1haWxMaW5rLCBaIGFzIGxpbmtXaXRoQ3JlZGVudGlhbCwgbCBhcyBsaW5rV2l0aFBob25lTnVtYmVyLCBkIGFzIGxpbmtXaXRoUG9wdXAsIGcgYXMgbGlua1dpdGhSZWRpcmVjdCwgYW8gYXMgbXVsdGlGYWN0b3IsIHYgYXMgb25BdXRoU3RhdGVDaGFuZ2VkLCBxIGFzIG9uSWRUb2tlbkNoYW5nZWQsIGFlIGFzIHBhcnNlQWN0aW9uQ29kZVVSTCwgQyBhcyBwcm9kRXJyb3JNYXAsIF8gYXMgcmVhdXRoZW50aWNhdGVXaXRoQ3JlZGVudGlhbCwgciBhcyByZWF1dGhlbnRpY2F0ZVdpdGhQaG9uZU51bWJlciwgZSBhcyByZWF1dGhlbnRpY2F0ZVdpdGhQb3B1cCwgaCBhcyByZWF1dGhlbnRpY2F0ZVdpdGhSZWRpcmVjdCwgYW0gYXMgcmVsb2FkLCBhYiBhcyBzZW5kRW1haWxWZXJpZmljYXRpb24sIGEwIGFzIHNlbmRQYXNzd29yZFJlc2V0RW1haWwsIGE3IGFzIHNlbmRTaWduSW5MaW5rVG9FbWFpbCwgcCBhcyBzZXRQZXJzaXN0ZW5jZSwgWCBhcyBzaWduSW5Bbm9ueW1vdXNseSwgWSBhcyBzaWduSW5XaXRoQ3JlZGVudGlhbCwgJCBhcyBzaWduSW5XaXRoQ3VzdG9tVG9rZW4sIGE2IGFzIHNpZ25JbldpdGhFbWFpbEFuZFBhc3N3b3JkLCBhOSBhcyBzaWduSW5XaXRoRW1haWxMaW5rLCBzIGFzIHNpZ25JbldpdGhQaG9uZU51bWJlciwgYyBhcyBzaWduSW5XaXRoUG9wdXAsIGYgYXMgc2lnbkluV2l0aFJlZGlyZWN0LCB5IGFzIHNpZ25PdXQsIGFrIGFzIHVubGluaywgeCBhcyB1cGRhdGVDdXJyZW50VXNlciwgYWcgYXMgdXBkYXRlRW1haWwsIGFoIGFzIHVwZGF0ZVBhc3N3b3JkLCB1IGFzIHVwZGF0ZVBob25lTnVtYmVyLCBhZiBhcyB1cGRhdGVQcm9maWxlLCB3IGFzIHVzZURldmljZUxhbmd1YWdlLCBhYyBhcyB2ZXJpZnlCZWZvcmVVcGRhdGVFbWFpbCwgYTQgYXMgdmVyaWZ5UGFzc3dvcmRSZXNldENvZGUgfSBmcm9tICcuL2luZGV4LTY5YWI0ZTNhLmpzJztcbmltcG9ydCB7IHF1ZXJ5c3RyaW5nRGVjb2RlIH0gZnJvbSAnQGZpcmViYXNlL3V0aWwnO1xuaW1wb3J0ICdAZmlyZWJhc2UvYXBwJztcbmltcG9ydCAndHNsaWInO1xuaW1wb3J0ICdAZmlyZWJhc2UvbG9nZ2VyJztcbmltcG9ydCAnQGZpcmViYXNlL2NvbXBvbmVudCc7XG5cbi8qKlxyXG4gKiBAbGljZW5zZVxyXG4gKiBDb3B5cmlnaHQgMjAyMSBHb29nbGUgTExDXHJcbiAqXHJcbiAqIExpY2Vuc2VkIHVuZGVyIHRoZSBBcGFjaGUgTGljZW5zZSwgVmVyc2lvbiAyLjAgKHRoZSBcIkxpY2Vuc2VcIik7XHJcbiAqIHlvdSBtYXkgbm90IHVzZSB0aGlzIGZpbGUgZXhjZXB0IGluIGNvbXBsaWFuY2Ugd2l0aCB0aGUgTGljZW5zZS5cclxuICogWW91IG1heSBvYnRhaW4gYSBjb3B5IG9mIHRoZSBMaWNlbnNlIGF0XHJcbiAqXHJcbiAqICAgaHR0cDovL3d3dy5hcGFjaGUub3JnL2xpY2Vuc2VzL0xJQ0VOU0UtMi4wXHJcbiAqXHJcbiAqIFVubGVzcyByZXF1aXJlZCBieSBhcHBsaWNhYmxlIGxhdyBvciBhZ3JlZWQgdG8gaW4gd3JpdGluZywgc29mdHdhcmVcclxuICogZGlzdHJpYnV0ZWQgdW5kZXIgdGhlIExpY2Vuc2UgaXMgZGlzdHJpYnV0ZWQgb24gYW4gXCJBUyBJU1wiIEJBU0lTLFxyXG4gKiBXSVRIT1VUIFdBUlJBTlRJRVMgT1IgQ09ORElUSU9OUyBPRiBBTlkgS0lORCwgZWl0aGVyIGV4cHJlc3Mgb3IgaW1wbGllZC5cclxuICogU2VlIHRoZSBMaWNlbnNlIGZvciB0aGUgc3BlY2lmaWMgbGFuZ3VhZ2UgZ292ZXJuaW5nIHBlcm1pc3Npb25zIGFuZFxyXG4gKiBsaW1pdGF0aW9ucyB1bmRlciB0aGUgTGljZW5zZS5cclxuICovXHJcbmZ1bmN0aW9uIF9jb3Jkb3ZhV2luZG93KCkge1xyXG4gICAgcmV0dXJuIHdpbmRvdztcclxufVxuXG4vKipcclxuICogQGxpY2Vuc2VcclxuICogQ29weXJpZ2h0IDIwMjAgR29vZ2xlIExMQ1xyXG4gKlxyXG4gKiBMaWNlbnNlZCB1bmRlciB0aGUgQXBhY2hlIExpY2Vuc2UsIFZlcnNpb24gMi4wICh0aGUgXCJMaWNlbnNlXCIpO1xyXG4gKiB5b3UgbWF5IG5vdCB1c2UgdGhpcyBmaWxlIGV4Y2VwdCBpbiBjb21wbGlhbmNlIHdpdGggdGhlIExpY2Vuc2UuXHJcbiAqIFlvdSBtYXkgb2J0YWluIGEgY29weSBvZiB0aGUgTGljZW5zZSBhdFxyXG4gKlxyXG4gKiAgIGh0dHA6Ly93d3cuYXBhY2hlLm9yZy9saWNlbnNlcy9MSUNFTlNFLTIuMFxyXG4gKlxyXG4gKiBVbmxlc3MgcmVxdWlyZWQgYnkgYXBwbGljYWJsZSBsYXcgb3IgYWdyZWVkIHRvIGluIHdyaXRpbmcsIHNvZnR3YXJlXHJcbiAqIGRpc3RyaWJ1dGVkIHVuZGVyIHRoZSBMaWNlbnNlIGlzIGRpc3RyaWJ1dGVkIG9uIGFuIFwiQVMgSVNcIiBCQVNJUyxcclxuICogV0lUSE9VVCBXQVJSQU5USUVTIE9SIENPTkRJVElPTlMgT0YgQU5ZIEtJTkQsIGVpdGhlciBleHByZXNzIG9yIGltcGxpZWQuXHJcbiAqIFNlZSB0aGUgTGljZW5zZSBmb3IgdGhlIHNwZWNpZmljIGxhbmd1YWdlIGdvdmVybmluZyBwZXJtaXNzaW9ucyBhbmRcclxuICogbGltaXRhdGlvbnMgdW5kZXIgdGhlIExpY2Vuc2UuXHJcbiAqL1xyXG4vKipcclxuICogSG93IGxvbmcgdG8gd2FpdCBhZnRlciB0aGUgYXBwIGNvbWVzIGJhY2sgaW50byBmb2N1cyBiZWZvcmUgY29uY2x1ZGluZyB0aGF0XHJcbiAqIHRoZSB1c2VyIGNsb3NlZCB0aGUgc2lnbiBpbiB0YWIuXHJcbiAqL1xyXG5jb25zdCBSRURJUkVDVF9USU1FT1VUX01TID0gMjAwMDtcclxuLyoqXHJcbiAqIEdlbmVyYXRlcyB0aGUgVVJMIGZvciB0aGUgT0F1dGggaGFuZGxlci5cclxuICovXHJcbmFzeW5jIGZ1bmN0aW9uIF9nZW5lcmF0ZUhhbmRsZXJVcmwoYXV0aCwgZXZlbnQsIHByb3ZpZGVyKSB7XHJcbiAgICB2YXIgX2E7XHJcbiAgICAvLyBHZXQgdGhlIGNvcmRvdmEgcGx1Z2luc1xyXG4gICAgY29uc3QgeyBCdWlsZEluZm8gfSA9IF9jb3Jkb3ZhV2luZG93KCk7XHJcbiAgICBkZWJ1Z0Fzc2VydChldmVudC5zZXNzaW9uSWQsICdBdXRoRXZlbnQgZGlkIG5vdCBjb250YWluIGEgc2Vzc2lvbiBJRCcpO1xyXG4gICAgY29uc3Qgc2Vzc2lvbkRpZ2VzdCA9IGF3YWl0IGNvbXB1dGVTaGEyNTYoZXZlbnQuc2Vzc2lvbklkKTtcclxuICAgIGNvbnN0IGFkZGl0aW9uYWxQYXJhbXMgPSB7fTtcclxuICAgIGlmIChfaXNJT1MoKSkge1xyXG4gICAgICAgIC8vIGlPUyBhcHAgaWRlbnRpZmllclxyXG4gICAgICAgIGFkZGl0aW9uYWxQYXJhbXNbJ2liaSddID0gQnVpbGRJbmZvLnBhY2thZ2VOYW1lO1xyXG4gICAgfVxyXG4gICAgZWxzZSBpZiAoX2lzQW5kcm9pZCgpKSB7XHJcbiAgICAgICAgLy8gQW5kcm9pZCBhcHAgaWRlbnRpZmllclxyXG4gICAgICAgIGFkZGl0aW9uYWxQYXJhbXNbJ2FwbiddID0gQnVpbGRJbmZvLnBhY2thZ2VOYW1lO1xyXG4gICAgfVxyXG4gICAgZWxzZSB7XHJcbiAgICAgICAgX2ZhaWwoYXV0aCwgXCJvcGVyYXRpb24tbm90LXN1cHBvcnRlZC1pbi10aGlzLWVudmlyb25tZW50XCIgLyogT1BFUkFUSU9OX05PVF9TVVBQT1JURUQgKi8pO1xyXG4gICAgfVxyXG4gICAgLy8gQWRkIHRoZSBkaXNwbGF5IG5hbWUgaWYgYXZhaWxhYmxlXHJcbiAgICBpZiAoQnVpbGRJbmZvLmRpc3BsYXlOYW1lKSB7XHJcbiAgICAgICAgYWRkaXRpb25hbFBhcmFtc1snYXBwRGlzcGxheU5hbWUnXSA9IEJ1aWxkSW5mby5kaXNwbGF5TmFtZTtcclxuICAgIH1cclxuICAgIC8vIEF0dGFjaGVkIHRoZSBoYXNoZWQgc2Vzc2lvbiBJRFxyXG4gICAgYWRkaXRpb25hbFBhcmFtc1snc2Vzc2lvbklkJ10gPSBzZXNzaW9uRGlnZXN0O1xyXG4gICAgcmV0dXJuIF9nZXRSZWRpcmVjdFVybChhdXRoLCBwcm92aWRlciwgZXZlbnQudHlwZSwgdW5kZWZpbmVkLCAoX2EgPSBldmVudC5ldmVudElkKSAhPT0gbnVsbCAmJiBfYSAhPT0gdm9pZCAwID8gX2EgOiB1bmRlZmluZWQsIGFkZGl0aW9uYWxQYXJhbXMpO1xyXG59XHJcbi8qKlxyXG4gKiBWYWxpZGF0ZXMgdGhhdCB0aGlzIGFwcCBpcyB2YWxpZCBmb3IgdGhpcyBwcm9qZWN0IGNvbmZpZ3VyYXRpb25cclxuICovXHJcbmFzeW5jIGZ1bmN0aW9uIF92YWxpZGF0ZU9yaWdpbihhdXRoKSB7XHJcbiAgICBjb25zdCB7IEJ1aWxkSW5mbyB9ID0gX2NvcmRvdmFXaW5kb3coKTtcclxuICAgIGNvbnN0IHJlcXVlc3QgPSB7fTtcclxuICAgIGlmIChfaXNJT1MoKSkge1xyXG4gICAgICAgIHJlcXVlc3QuaW9zQnVuZGxlSWQgPSBCdWlsZEluZm8ucGFja2FnZU5hbWU7XHJcbiAgICB9XHJcbiAgICBlbHNlIGlmIChfaXNBbmRyb2lkKCkpIHtcclxuICAgICAgICByZXF1ZXN0LmFuZHJvaWRQYWNrYWdlTmFtZSA9IEJ1aWxkSW5mby5wYWNrYWdlTmFtZTtcclxuICAgIH1cclxuICAgIGVsc2Uge1xyXG4gICAgICAgIF9mYWlsKGF1dGgsIFwib3BlcmF0aW9uLW5vdC1zdXBwb3J0ZWQtaW4tdGhpcy1lbnZpcm9ubWVudFwiIC8qIE9QRVJBVElPTl9OT1RfU1VQUE9SVEVEICovKTtcclxuICAgIH1cclxuICAgIC8vIFdpbGwgZmFpbCBhdXRvbWF0aWNhbGx5IGlmIHBhY2thZ2UgbmFtZSBpcyBub3QgYXV0aG9yaXplZFxyXG4gICAgYXdhaXQgX2dldFByb2plY3RDb25maWcoYXV0aCwgcmVxdWVzdCk7XHJcbn1cclxuZnVuY3Rpb24gX3BlcmZvcm1SZWRpcmVjdChoYW5kbGVyVXJsKSB7XHJcbiAgICAvLyBHZXQgdGhlIGNvcmRvdmEgcGx1Z2luc1xyXG4gICAgY29uc3QgeyBjb3Jkb3ZhIH0gPSBfY29yZG92YVdpbmRvdygpO1xyXG4gICAgcmV0dXJuIG5ldyBQcm9taXNlKHJlc29sdmUgPT4ge1xyXG4gICAgICAgIGNvcmRvdmEucGx1Z2lucy5icm93c2VydGFiLmlzQXZhaWxhYmxlKGJyb3dzZXJUYWJJc0F2YWlsYWJsZSA9PiB7XHJcbiAgICAgICAgICAgIGxldCBpYWJSZWYgPSBudWxsO1xyXG4gICAgICAgICAgICBpZiAoYnJvd3NlclRhYklzQXZhaWxhYmxlKSB7XHJcbiAgICAgICAgICAgICAgICBjb3Jkb3ZhLnBsdWdpbnMuYnJvd3NlcnRhYi5vcGVuVXJsKGhhbmRsZXJVcmwpO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIGVsc2Uge1xyXG4gICAgICAgICAgICAgICAgLy8gVE9ETzogUmV0dXJuIHRoZSBpbmFwcGJyb3dzZXIgcmVmIHRoYXQncyByZXR1cm5lZCBmcm9tIHRoZSBvcGVuIGNhbGxcclxuICAgICAgICAgICAgICAgIGlhYlJlZiA9IGNvcmRvdmEuSW5BcHBCcm93c2VyLm9wZW4oaGFuZGxlclVybCwgX2lzSU9TN09yOCgpID8gJ19ibGFuaycgOiAnX3N5c3RlbScsICdsb2NhdGlvbj15ZXMnKTtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICByZXNvbHZlKGlhYlJlZik7XHJcbiAgICAgICAgfSk7XHJcbiAgICB9KTtcclxufVxyXG4vKipcclxuICogVGhpcyBmdW5jdGlvbiB3YWl0cyBmb3IgYXBwIGFjdGl2aXR5IHRvIGJlIHNlZW4gYmVmb3JlIHJlc29sdmluZy4gSXQgZG9lc1xyXG4gKiB0aGlzIGJ5IGF0dGFjaGluZyBsaXN0ZW5lcnMgdG8gdmFyaW91cyBkb20gZXZlbnRzLiBPbmNlIHRoZSBhcHAgaXMgZGV0ZXJtaW5lZFxyXG4gKiB0byBiZSB2aXNpYmxlLCB0aGlzIHByb21pc2UgcmVzb2x2ZXMuIEFGVEVSIHRoYXQgcmVzb2x1dGlvbiwgdGhlIGxpc3RlbmVyc1xyXG4gKiBhcmUgZGV0YWNoZWQgYW5kIGFueSBicm93c2VyIHRhYnMgbGVmdCBvcGVuIHdpbGwgYmUgY2xvc2VkLlxyXG4gKi9cclxuYXN5bmMgZnVuY3Rpb24gX3dhaXRGb3JBcHBSZXN1bWUoYXV0aCwgZXZlbnRMaXN0ZW5lciwgaWFiUmVmKSB7XHJcbiAgICAvLyBHZXQgdGhlIGNvcmRvdmEgcGx1Z2luc1xyXG4gICAgY29uc3QgeyBjb3Jkb3ZhIH0gPSBfY29yZG92YVdpbmRvdygpO1xyXG4gICAgbGV0IGNsZWFudXAgPSAoKSA9PiB7IH07XHJcbiAgICB0cnkge1xyXG4gICAgICAgIGF3YWl0IG5ldyBQcm9taXNlKChyZXNvbHZlLCByZWplY3QpID0+IHtcclxuICAgICAgICAgICAgbGV0IG9uQ2xvc2VUaW1lciA9IG51bGw7XHJcbiAgICAgICAgICAgIC8vIERFRklORSBBTEwgVEhFIENBTExCQUNLUyA9PT09PVxyXG4gICAgICAgICAgICBmdW5jdGlvbiBhdXRoRXZlbnRTZWVuKCkge1xyXG4gICAgICAgICAgICAgICAgdmFyIF9hO1xyXG4gICAgICAgICAgICAgICAgLy8gQXV0aCBldmVudCB3YXMgZGV0ZWN0ZWQuIFJlc29sdmUgdGhpcyBwcm9taXNlIGFuZCBjbG9zZSB0aGUgZXh0cmFcclxuICAgICAgICAgICAgICAgIC8vIHdpbmRvdyBpZiBpdCdzIHN0aWxsIG9wZW4uXHJcbiAgICAgICAgICAgICAgICByZXNvbHZlKCk7XHJcbiAgICAgICAgICAgICAgICBjb25zdCBjbG9zZUJyb3dzZXJUYWIgPSAoX2EgPSBjb3Jkb3ZhLnBsdWdpbnMuYnJvd3NlcnRhYikgPT09IG51bGwgfHwgX2EgPT09IHZvaWQgMCA/IHZvaWQgMCA6IF9hLmNsb3NlO1xyXG4gICAgICAgICAgICAgICAgaWYgKHR5cGVvZiBjbG9zZUJyb3dzZXJUYWIgPT09ICdmdW5jdGlvbicpIHtcclxuICAgICAgICAgICAgICAgICAgICBjbG9zZUJyb3dzZXJUYWIoKTtcclxuICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgIC8vIENsb3NlIGluYXBwYnJvd3NlciBlbWViZWRkZWQgd2VidmlldyBpbiBpT1M3IGFuZCA4IGNhc2UgaWYgc3RpbGxcclxuICAgICAgICAgICAgICAgIC8vIG9wZW4uXHJcbiAgICAgICAgICAgICAgICBpZiAodHlwZW9mIChpYWJSZWYgPT09IG51bGwgfHwgaWFiUmVmID09PSB2b2lkIDAgPyB2b2lkIDAgOiBpYWJSZWYuY2xvc2UpID09PSAnZnVuY3Rpb24nKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgaWFiUmVmLmNsb3NlKCk7XHJcbiAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgZnVuY3Rpb24gcmVzdW1lZCgpIHtcclxuICAgICAgICAgICAgICAgIGlmIChvbkNsb3NlVGltZXIpIHtcclxuICAgICAgICAgICAgICAgICAgICAvLyBUaGlzIGNvZGUgYWxyZWFkeSByYW47IGRvIG5vdCByZXJ1bi5cclxuICAgICAgICAgICAgICAgICAgICByZXR1cm47XHJcbiAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICBvbkNsb3NlVGltZXIgPSB3aW5kb3cuc2V0VGltZW91dCgoKSA9PiB7XHJcbiAgICAgICAgICAgICAgICAgICAgLy8gV2FpdCB0d28gc2VlY29uZHMgYWZ0ZXIgcmVzdW1lIHRoZW4gcmVqZWN0LlxyXG4gICAgICAgICAgICAgICAgICAgIHJlamVjdChfY3JlYXRlRXJyb3IoYXV0aCwgXCJyZWRpcmVjdC1jYW5jZWxsZWQtYnktdXNlclwiIC8qIFJFRElSRUNUX0NBTkNFTExFRF9CWV9VU0VSICovKSk7XHJcbiAgICAgICAgICAgICAgICB9LCBSRURJUkVDVF9USU1FT1VUX01TKTtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICBmdW5jdGlvbiB2aXNpYmlsaXR5Q2hhbmdlZCgpIHtcclxuICAgICAgICAgICAgICAgIGlmICgoZG9jdW1lbnQgPT09IG51bGwgfHwgZG9jdW1lbnQgPT09IHZvaWQgMCA/IHZvaWQgMCA6IGRvY3VtZW50LnZpc2liaWxpdHlTdGF0ZSkgPT09ICd2aXNpYmxlJykge1xyXG4gICAgICAgICAgICAgICAgICAgIHJlc3VtZWQoKTtcclxuICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAvLyBBVFRBQ0ggQUxMIFRIRSBMSVNURU5FUlMgPT09PT1cclxuICAgICAgICAgICAgLy8gTGlzdGVuIGZvciB0aGUgYXV0aCBldmVudFxyXG4gICAgICAgICAgICBldmVudExpc3RlbmVyLmFkZFBhc3NpdmVMaXN0ZW5lcihhdXRoRXZlbnRTZWVuKTtcclxuICAgICAgICAgICAgLy8gTGlzdGVuIGZvciByZXN1bWUgYW5kIHZpc2liaWxpdHkgZXZlbnRzXHJcbiAgICAgICAgICAgIGRvY3VtZW50LmFkZEV2ZW50TGlzdGVuZXIoJ3Jlc3VtZScsIHJlc3VtZWQsIGZhbHNlKTtcclxuICAgICAgICAgICAgaWYgKF9pc0FuZHJvaWQoKSkge1xyXG4gICAgICAgICAgICAgICAgZG9jdW1lbnQuYWRkRXZlbnRMaXN0ZW5lcigndmlzaWJpbGl0eWNoYW5nZScsIHZpc2liaWxpdHlDaGFuZ2VkLCBmYWxzZSk7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgLy8gU0VUVVAgVEhFIENMRUFOVVAgRlVOQ1RJT04gPT09PT1cclxuICAgICAgICAgICAgY2xlYW51cCA9ICgpID0+IHtcclxuICAgICAgICAgICAgICAgIGV2ZW50TGlzdGVuZXIucmVtb3ZlUGFzc2l2ZUxpc3RlbmVyKGF1dGhFdmVudFNlZW4pO1xyXG4gICAgICAgICAgICAgICAgZG9jdW1lbnQucmVtb3ZlRXZlbnRMaXN0ZW5lcigncmVzdW1lJywgcmVzdW1lZCwgZmFsc2UpO1xyXG4gICAgICAgICAgICAgICAgZG9jdW1lbnQucmVtb3ZlRXZlbnRMaXN0ZW5lcigndmlzaWJpbGl0eWNoYW5nZScsIHZpc2liaWxpdHlDaGFuZ2VkLCBmYWxzZSk7XHJcbiAgICAgICAgICAgICAgICBpZiAob25DbG9zZVRpbWVyKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgd2luZG93LmNsZWFyVGltZW91dChvbkNsb3NlVGltZXIpO1xyXG4gICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICB9O1xyXG4gICAgICAgIH0pO1xyXG4gICAgfVxyXG4gICAgZmluYWxseSB7XHJcbiAgICAgICAgY2xlYW51cCgpO1xyXG4gICAgfVxyXG59XHJcbi8qKlxyXG4gKiBDaGVja3MgdGhlIGNvbmZpZ3VyYXRpb24gb2YgdGhlIENvcmRvdmEgZW52aXJvbm1lbnQuIFRoaXMgaGFzIG5vIHNpZGUgZWZmZWN0XHJcbiAqIGlmIHRoZSBjb25maWd1cmF0aW9uIGlzIGNvcnJlY3Q7IG90aGVyd2lzZSBpdCB0aHJvd3MgYW4gZXJyb3Igd2l0aCB0aGVcclxuICogbWlzc2luZyBwbHVnaW4uXHJcbiAqL1xyXG5mdW5jdGlvbiBfY2hlY2tDb3Jkb3ZhQ29uZmlndXJhdGlvbihhdXRoKSB7XHJcbiAgICB2YXIgX2EsIF9iLCBfYywgX2QsIF9lLCBfZiwgX2csIF9oLCBfaiwgX2s7XHJcbiAgICBjb25zdCB3aW4gPSBfY29yZG92YVdpbmRvdygpO1xyXG4gICAgLy8gQ2hlY2sgYWxsIGRlcGVuZGVuY2llcyBpbnN0YWxsZWQuXHJcbiAgICAvLyBodHRwczovL2dpdGh1Yi5jb20vbm9yZG5ldC9jb3Jkb3ZhLXVuaXZlcnNhbC1saW5rcy1wbHVnaW5cclxuICAgIC8vIE5vdGUgdGhhdCBjb3Jkb3ZhLXVuaXZlcnNhbC1saW5rcy1wbHVnaW4gaGFzIGJlZW4gYWJhbmRvbmVkLlxyXG4gICAgLy8gQSBmb3JrIHdpdGggbGF0ZXN0IGZpeGVzIGlzIGF2YWlsYWJsZSBhdDpcclxuICAgIC8vIGh0dHBzOi8vd3d3Lm5wbWpzLmNvbS9wYWNrYWdlL2NvcmRvdmEtdW5pdmVyc2FsLWxpbmtzLXBsdWdpbi1maXhcclxuICAgIF9hc3NlcnQodHlwZW9mICgoX2EgPSB3aW4gPT09IG51bGwgfHwgd2luID09PSB2b2lkIDAgPyB2b2lkIDAgOiB3aW4udW5pdmVyc2FsTGlua3MpID09PSBudWxsIHx8IF9hID09PSB2b2lkIDAgPyB2b2lkIDAgOiBfYS5zdWJzY3JpYmUpID09PSAnZnVuY3Rpb24nLCBhdXRoLCBcImludmFsaWQtY29yZG92YS1jb25maWd1cmF0aW9uXCIgLyogSU5WQUxJRF9DT1JET1ZBX0NPTkZJR1VSQVRJT04gKi8sIHtcclxuICAgICAgICBtaXNzaW5nUGx1Z2luOiAnY29yZG92YS11bml2ZXJzYWwtbGlua3MtcGx1Z2luLWZpeCdcclxuICAgIH0pO1xyXG4gICAgLy8gaHR0cHM6Ly93d3cubnBtanMuY29tL3BhY2thZ2UvY29yZG92YS1wbHVnaW4tYnVpbGRpbmZvXHJcbiAgICBfYXNzZXJ0KHR5cGVvZiAoKF9iID0gd2luID09PSBudWxsIHx8IHdpbiA9PT0gdm9pZCAwID8gdm9pZCAwIDogd2luLkJ1aWxkSW5mbykgPT09IG51bGwgfHwgX2IgPT09IHZvaWQgMCA/IHZvaWQgMCA6IF9iLnBhY2thZ2VOYW1lKSAhPT0gJ3VuZGVmaW5lZCcsIGF1dGgsIFwiaW52YWxpZC1jb3Jkb3ZhLWNvbmZpZ3VyYXRpb25cIiAvKiBJTlZBTElEX0NPUkRPVkFfQ09ORklHVVJBVElPTiAqLywge1xyXG4gICAgICAgIG1pc3NpbmdQbHVnaW46ICdjb3Jkb3ZhLXBsdWdpbi1idWlsZEluZm8nXHJcbiAgICB9KTtcclxuICAgIC8vIGh0dHBzOi8vZ2l0aHViLmNvbS9nb29nbGUvY29yZG92YS1wbHVnaW4tYnJvd3NlcnRhYlxyXG4gICAgX2Fzc2VydCh0eXBlb2YgKChfZSA9IChfZCA9IChfYyA9IHdpbiA9PT0gbnVsbCB8fCB3aW4gPT09IHZvaWQgMCA/IHZvaWQgMCA6IHdpbi5jb3Jkb3ZhKSA9PT0gbnVsbCB8fCBfYyA9PT0gdm9pZCAwID8gdm9pZCAwIDogX2MucGx1Z2lucykgPT09IG51bGwgfHwgX2QgPT09IHZvaWQgMCA/IHZvaWQgMCA6IF9kLmJyb3dzZXJ0YWIpID09PSBudWxsIHx8IF9lID09PSB2b2lkIDAgPyB2b2lkIDAgOiBfZS5vcGVuVXJsKSA9PT0gJ2Z1bmN0aW9uJywgYXV0aCwgXCJpbnZhbGlkLWNvcmRvdmEtY29uZmlndXJhdGlvblwiIC8qIElOVkFMSURfQ09SRE9WQV9DT05GSUdVUkFUSU9OICovLCB7XHJcbiAgICAgICAgbWlzc2luZ1BsdWdpbjogJ2NvcmRvdmEtcGx1Z2luLWJyb3dzZXJ0YWInXHJcbiAgICB9KTtcclxuICAgIF9hc3NlcnQodHlwZW9mICgoX2ggPSAoX2cgPSAoX2YgPSB3aW4gPT09IG51bGwgfHwgd2luID09PSB2b2lkIDAgPyB2b2lkIDAgOiB3aW4uY29yZG92YSkgPT09IG51bGwgfHwgX2YgPT09IHZvaWQgMCA/IHZvaWQgMCA6IF9mLnBsdWdpbnMpID09PSBudWxsIHx8IF9nID09PSB2b2lkIDAgPyB2b2lkIDAgOiBfZy5icm93c2VydGFiKSA9PT0gbnVsbCB8fCBfaCA9PT0gdm9pZCAwID8gdm9pZCAwIDogX2guaXNBdmFpbGFibGUpID09PSAnZnVuY3Rpb24nLCBhdXRoLCBcImludmFsaWQtY29yZG92YS1jb25maWd1cmF0aW9uXCIgLyogSU5WQUxJRF9DT1JET1ZBX0NPTkZJR1VSQVRJT04gKi8sIHtcclxuICAgICAgICBtaXNzaW5nUGx1Z2luOiAnY29yZG92YS1wbHVnaW4tYnJvd3NlcnRhYidcclxuICAgIH0pO1xyXG4gICAgLy8gaHR0cHM6Ly9jb3Jkb3ZhLmFwYWNoZS5vcmcvZG9jcy9lbi9sYXRlc3QvcmVmZXJlbmNlL2NvcmRvdmEtcGx1Z2luLWluYXBwYnJvd3Nlci9cclxuICAgIF9hc3NlcnQodHlwZW9mICgoX2sgPSAoX2ogPSB3aW4gPT09IG51bGwgfHwgd2luID09PSB2b2lkIDAgPyB2b2lkIDAgOiB3aW4uY29yZG92YSkgPT09IG51bGwgfHwgX2ogPT09IHZvaWQgMCA/IHZvaWQgMCA6IF9qLkluQXBwQnJvd3NlcikgPT09IG51bGwgfHwgX2sgPT09IHZvaWQgMCA/IHZvaWQgMCA6IF9rLm9wZW4pID09PSAnZnVuY3Rpb24nLCBhdXRoLCBcImludmFsaWQtY29yZG92YS1jb25maWd1cmF0aW9uXCIgLyogSU5WQUxJRF9DT1JET1ZBX0NPTkZJR1VSQVRJT04gKi8sIHtcclxuICAgICAgICBtaXNzaW5nUGx1Z2luOiAnY29yZG92YS1wbHVnaW4taW5hcHBicm93c2VyJ1xyXG4gICAgfSk7XHJcbn1cclxuLyoqXHJcbiAqIENvbXB1dGVzIHRoZSBTSEEtMjU2IG9mIGEgc2Vzc2lvbiBJRC4gVGhlIFN1YnRsZUNyeXB0byBpbnRlcmZhY2UgaXMgb25seVxyXG4gKiBhdmFpbGFibGUgaW4gXCJzZWN1cmVcIiBjb250ZXh0cywgd2hpY2ggY292ZXJzIENvcmRvdmEgKHdoaWNoIGlzIHNlcnZlZCBvbiBhIGZpbGVcclxuICogcHJvdG9jb2wpLlxyXG4gKi9cclxuYXN5bmMgZnVuY3Rpb24gY29tcHV0ZVNoYTI1NihzZXNzaW9uSWQpIHtcclxuICAgIGNvbnN0IGJ5dGVzID0gc3RyaW5nVG9BcnJheUJ1ZmZlcihzZXNzaW9uSWQpO1xyXG4gICAgLy8gVE9ETzogRm9yIElFMTEgY3J5cHRvIGhhcyBhIGRpZmZlcmVudCBuYW1lIGFuZCB0aGlzIG9wZXJhdGlvbiBjb21lcyBiYWNrXHJcbiAgICAvLyAgICAgICBhcyBhbiBvYmplY3QsIG5vdCBhIHByb21pc2UuIFRoaXMgaXMgdGhlIG9sZCBwcm9wb3NlZCBzdGFuZGFyZCB0aGF0XHJcbiAgICAvLyAgICAgICBpcyB1c2VkIGJ5IElFMTE6XHJcbiAgICAvLyBodHRwczovL3d3dy53My5vcmcvVFIvMjAxMy9XRC1XZWJDcnlwdG9BUEktMjAxMzAxMDgvI2NyeXB0b29wZXJhdGlvbi1pbnRlcmZhY2VcclxuICAgIGNvbnN0IGJ1ZiA9IGF3YWl0IGNyeXB0by5zdWJ0bGUuZGlnZXN0KCdTSEEtMjU2JywgYnl0ZXMpO1xyXG4gICAgY29uc3QgYXJyID0gQXJyYXkuZnJvbShuZXcgVWludDhBcnJheShidWYpKTtcclxuICAgIHJldHVybiBhcnIubWFwKG51bSA9PiBudW0udG9TdHJpbmcoMTYpLnBhZFN0YXJ0KDIsICcwJykpLmpvaW4oJycpO1xyXG59XHJcbmZ1bmN0aW9uIHN0cmluZ1RvQXJyYXlCdWZmZXIoc3RyKSB7XHJcbiAgICAvLyBUaGlzIGZ1bmN0aW9uIGlzIG9ubHkgbWVhbnQgdG8gZGVhbCB3aXRoIGFuIEFTQ0lJIGNoYXJzZXQgYW5kIG1ha2VzXHJcbiAgICAvLyBjZXJ0YWluIHNpbXBsaWZ5aW5nIGFzc3VtcHRpb25zLlxyXG4gICAgZGVidWdBc3NlcnQoL1swLTlhLXpBLVpdKy8udGVzdChzdHIpLCAnQ2FuIG9ubHkgY29udmVydCBhbHBoYS1udW1lcmljIHN0cmluZ3MnKTtcclxuICAgIGlmICh0eXBlb2YgVGV4dEVuY29kZXIgIT09ICd1bmRlZmluZWQnKSB7XHJcbiAgICAgICAgcmV0dXJuIG5ldyBUZXh0RW5jb2RlcigpLmVuY29kZShzdHIpO1xyXG4gICAgfVxyXG4gICAgY29uc3QgYnVmZiA9IG5ldyBBcnJheUJ1ZmZlcihzdHIubGVuZ3RoKTtcclxuICAgIGNvbnN0IHZpZXcgPSBuZXcgVWludDhBcnJheShidWZmKTtcclxuICAgIGZvciAobGV0IGkgPSAwOyBpIDwgc3RyLmxlbmd0aDsgaSsrKSB7XHJcbiAgICAgICAgdmlld1tpXSA9IHN0ci5jaGFyQ29kZUF0KGkpO1xyXG4gICAgfVxyXG4gICAgcmV0dXJuIHZpZXc7XHJcbn1cblxuLyoqXHJcbiAqIEBsaWNlbnNlXHJcbiAqIENvcHlyaWdodCAyMDIwIEdvb2dsZSBMTENcclxuICpcclxuICogTGljZW5zZWQgdW5kZXIgdGhlIEFwYWNoZSBMaWNlbnNlLCBWZXJzaW9uIDIuMCAodGhlIFwiTGljZW5zZVwiKTtcclxuICogeW91IG1heSBub3QgdXNlIHRoaXMgZmlsZSBleGNlcHQgaW4gY29tcGxpYW5jZSB3aXRoIHRoZSBMaWNlbnNlLlxyXG4gKiBZb3UgbWF5IG9idGFpbiBhIGNvcHkgb2YgdGhlIExpY2Vuc2UgYXRcclxuICpcclxuICogICBodHRwOi8vd3d3LmFwYWNoZS5vcmcvbGljZW5zZXMvTElDRU5TRS0yLjBcclxuICpcclxuICogVW5sZXNzIHJlcXVpcmVkIGJ5IGFwcGxpY2FibGUgbGF3IG9yIGFncmVlZCB0byBpbiB3cml0aW5nLCBzb2Z0d2FyZVxyXG4gKiBkaXN0cmlidXRlZCB1bmRlciB0aGUgTGljZW5zZSBpcyBkaXN0cmlidXRlZCBvbiBhbiBcIkFTIElTXCIgQkFTSVMsXHJcbiAqIFdJVEhPVVQgV0FSUkFOVElFUyBPUiBDT05ESVRJT05TIE9GIEFOWSBLSU5ELCBlaXRoZXIgZXhwcmVzcyBvciBpbXBsaWVkLlxyXG4gKiBTZWUgdGhlIExpY2Vuc2UgZm9yIHRoZSBzcGVjaWZpYyBsYW5ndWFnZSBnb3Zlcm5pbmcgcGVybWlzc2lvbnMgYW5kXHJcbiAqIGxpbWl0YXRpb25zIHVuZGVyIHRoZSBMaWNlbnNlLlxyXG4gKi9cclxuY29uc3QgU0VTU0lPTl9JRF9MRU5HVEggPSAyMDtcclxuLyoqIEN1c3RvbSBBdXRoRXZlbnRNYW5hZ2VyIHRoYXQgYWRkcyBwYXNzaXZlIGxpc3RlbmVycyB0byBldmVudHMgKi9cclxuY2xhc3MgQ29yZG92YUF1dGhFdmVudE1hbmFnZXIgZXh0ZW5kcyBBdXRoRXZlbnRNYW5hZ2VyIHtcclxuICAgIGNvbnN0cnVjdG9yKCkge1xyXG4gICAgICAgIHN1cGVyKC4uLmFyZ3VtZW50cyk7XHJcbiAgICAgICAgdGhpcy5wYXNzaXZlTGlzdGVuZXJzID0gbmV3IFNldCgpO1xyXG4gICAgICAgIHRoaXMuaW5pdFByb21pc2UgPSBuZXcgUHJvbWlzZShyZXNvbHZlID0+IHtcclxuICAgICAgICAgICAgdGhpcy5yZXNvbHZlSW5pYWxpemVkID0gcmVzb2x2ZTtcclxuICAgICAgICB9KTtcclxuICAgIH1cclxuICAgIGFkZFBhc3NpdmVMaXN0ZW5lcihjYikge1xyXG4gICAgICAgIHRoaXMucGFzc2l2ZUxpc3RlbmVycy5hZGQoY2IpO1xyXG4gICAgfVxyXG4gICAgcmVtb3ZlUGFzc2l2ZUxpc3RlbmVyKGNiKSB7XHJcbiAgICAgICAgdGhpcy5wYXNzaXZlTGlzdGVuZXJzLmRlbGV0ZShjYik7XHJcbiAgICB9XHJcbiAgICAvLyBJbiBhIENvcmRvdmEgZW52aXJvbm1lbnQsIHRoaXMgbWFuYWdlciBjYW4gbGl2ZSB0aHJvdWdoIG11bHRpcGxlIHJlZGlyZWN0XHJcbiAgICAvLyBvcGVyYXRpb25zXHJcbiAgICByZXNldFJlZGlyZWN0KCkge1xyXG4gICAgICAgIHRoaXMucXVldWVkUmVkaXJlY3RFdmVudCA9IG51bGw7XHJcbiAgICAgICAgdGhpcy5oYXNIYW5kbGVkUG90ZW50aWFsUmVkaXJlY3QgPSBmYWxzZTtcclxuICAgIH1cclxuICAgIC8qKiBPdmVycmlkZSB0aGUgb25FdmVudCBtZXRob2QgKi9cclxuICAgIG9uRXZlbnQoZXZlbnQpIHtcclxuICAgICAgICB0aGlzLnJlc29sdmVJbmlhbGl6ZWQoKTtcclxuICAgICAgICB0aGlzLnBhc3NpdmVMaXN0ZW5lcnMuZm9yRWFjaChjYiA9PiBjYihldmVudCkpO1xyXG4gICAgICAgIHJldHVybiBzdXBlci5vbkV2ZW50KGV2ZW50KTtcclxuICAgIH1cclxuICAgIGFzeW5jIGluaXRpYWxpemVkKCkge1xyXG4gICAgICAgIGF3YWl0IHRoaXMuaW5pdFByb21pc2U7XHJcbiAgICB9XHJcbn1cclxuLyoqXHJcbiAqIEdlbmVyYXRlcyBhIChwYXJ0aWFsKSB7QGxpbmsgQXV0aEV2ZW50fS5cclxuICovXHJcbmZ1bmN0aW9uIF9nZW5lcmF0ZU5ld0V2ZW50KGF1dGgsIHR5cGUsIGV2ZW50SWQgPSBudWxsKSB7XHJcbiAgICByZXR1cm4ge1xyXG4gICAgICAgIHR5cGUsXHJcbiAgICAgICAgZXZlbnRJZCxcclxuICAgICAgICB1cmxSZXNwb25zZTogbnVsbCxcclxuICAgICAgICBzZXNzaW9uSWQ6IGdlbmVyYXRlU2Vzc2lvbklkKCksXHJcbiAgICAgICAgcG9zdEJvZHk6IG51bGwsXHJcbiAgICAgICAgdGVuYW50SWQ6IGF1dGgudGVuYW50SWQsXHJcbiAgICAgICAgZXJyb3I6IF9jcmVhdGVFcnJvcihhdXRoLCBcIm5vLWF1dGgtZXZlbnRcIiAvKiBOT19BVVRIX0VWRU5UICovKVxyXG4gICAgfTtcclxufVxyXG5mdW5jdGlvbiBfc2F2ZVBhcnRpYWxFdmVudChhdXRoLCBldmVudCkge1xyXG4gICAgcmV0dXJuIHN0b3JhZ2UoKS5fc2V0KHBlcnNpc3RlbmNlS2V5KGF1dGgpLCBldmVudCk7XHJcbn1cclxuYXN5bmMgZnVuY3Rpb24gX2dldEFuZFJlbW92ZUV2ZW50KGF1dGgpIHtcclxuICAgIGNvbnN0IGV2ZW50ID0gKGF3YWl0IHN0b3JhZ2UoKS5fZ2V0KHBlcnNpc3RlbmNlS2V5KGF1dGgpKSk7XHJcbiAgICBpZiAoZXZlbnQpIHtcclxuICAgICAgICBhd2FpdCBzdG9yYWdlKCkuX3JlbW92ZShwZXJzaXN0ZW5jZUtleShhdXRoKSk7XHJcbiAgICB9XHJcbiAgICByZXR1cm4gZXZlbnQ7XHJcbn1cclxuZnVuY3Rpb24gX2V2ZW50RnJvbVBhcnRpYWxBbmRVcmwocGFydGlhbEV2ZW50LCB1cmwpIHtcclxuICAgIHZhciBfYSwgX2I7XHJcbiAgICAvLyBQYXJzZSB0aGUgZGVlcCBsaW5rIHdpdGhpbiB0aGUgZHluYW1pYyBsaW5rIFVSTC5cclxuICAgIGNvbnN0IGNhbGxiYWNrVXJsID0gX2dldERlZXBMaW5rRnJvbUNhbGxiYWNrKHVybCk7XHJcbiAgICAvLyBDb25maXJtIGl0IGlzIGFjdHVhbGx5IGEgY2FsbGJhY2sgVVJMLlxyXG4gICAgLy8gQ3VycmVudGx5IHRoZSB1bml2ZXJzYWwgbGluayB3aWxsIGJlIG9mIHRoaXMgZm9ybWF0OlxyXG4gICAgLy8gaHR0cHM6Ly88QVVUSF9ET01BSU4+L19fL2F1dGgvY2FsbGJhY2s8T0FVVEhfUkVTUE9OU0U+XHJcbiAgICAvLyBUaGlzIGlzIGEgZmFrZSBVUkwgYnV0IGlzIG5vdCBpbnRlbmRlZCB0byB0YWtlIHRoZSB1c2VyIGFueXdoZXJlXHJcbiAgICAvLyBhbmQganVzdCByZWRpcmVjdCB0byB0aGUgYXBwLlxyXG4gICAgaWYgKGNhbGxiYWNrVXJsLmluY2x1ZGVzKCcvX18vYXV0aC9jYWxsYmFjaycpKSB7XHJcbiAgICAgICAgLy8gQ2hlY2sgaWYgdGhlcmUgaXMgYW4gZXJyb3IgaW4gdGhlIFVSTC5cclxuICAgICAgICAvLyBUaGlzIG1lY2hhbmlzbSBpcyBhbHNvIHVzZWQgdG8gcGFzcyBlcnJvcnMgYmFjayB0byB0aGUgYXBwOlxyXG4gICAgICAgIC8vIGh0dHBzOi8vPEFVVEhfRE9NQUlOPi9fXy9hdXRoL2NhbGxiYWNrP2ZpcmViYXNlRXJyb3I9PFNUUklOR0lGSUVEX0VSUk9SPlxyXG4gICAgICAgIGNvbnN0IHBhcmFtcyA9IHNlYXJjaFBhcmFtc09yRW1wdHkoY2FsbGJhY2tVcmwpO1xyXG4gICAgICAgIC8vIEdldCB0aGUgZXJyb3Igb2JqZWN0IGNvcnJlc3BvbmRpbmcgdG8gdGhlIHN0cmluZ2lmaWVkIGVycm9yIGlmIGZvdW5kLlxyXG4gICAgICAgIGNvbnN0IGVycm9yT2JqZWN0ID0gcGFyYW1zWydmaXJlYmFzZUVycm9yJ11cclxuICAgICAgICAgICAgPyBwYXJzZUpzb25Pck51bGwoZGVjb2RlVVJJQ29tcG9uZW50KHBhcmFtc1snZmlyZWJhc2VFcnJvciddKSlcclxuICAgICAgICAgICAgOiBudWxsO1xyXG4gICAgICAgIGNvbnN0IGNvZGUgPSAoX2IgPSAoX2EgPSBlcnJvck9iamVjdCA9PT0gbnVsbCB8fCBlcnJvck9iamVjdCA9PT0gdm9pZCAwID8gdm9pZCAwIDogZXJyb3JPYmplY3RbJ2NvZGUnXSkgPT09IG51bGwgfHwgX2EgPT09IHZvaWQgMCA/IHZvaWQgMCA6IF9hLnNwbGl0KCdhdXRoLycpKSA9PT0gbnVsbCB8fCBfYiA9PT0gdm9pZCAwID8gdm9pZCAwIDogX2JbMV07XHJcbiAgICAgICAgY29uc3QgZXJyb3IgPSBjb2RlID8gX2NyZWF0ZUVycm9yKGNvZGUpIDogbnVsbDtcclxuICAgICAgICBpZiAoZXJyb3IpIHtcclxuICAgICAgICAgICAgcmV0dXJuIHtcclxuICAgICAgICAgICAgICAgIHR5cGU6IHBhcnRpYWxFdmVudC50eXBlLFxyXG4gICAgICAgICAgICAgICAgZXZlbnRJZDogcGFydGlhbEV2ZW50LmV2ZW50SWQsXHJcbiAgICAgICAgICAgICAgICB0ZW5hbnRJZDogcGFydGlhbEV2ZW50LnRlbmFudElkLFxyXG4gICAgICAgICAgICAgICAgZXJyb3IsXHJcbiAgICAgICAgICAgICAgICB1cmxSZXNwb25zZTogbnVsbCxcclxuICAgICAgICAgICAgICAgIHNlc3Npb25JZDogbnVsbCxcclxuICAgICAgICAgICAgICAgIHBvc3RCb2R5OiBudWxsXHJcbiAgICAgICAgICAgIH07XHJcbiAgICAgICAgfVxyXG4gICAgICAgIGVsc2Uge1xyXG4gICAgICAgICAgICByZXR1cm4ge1xyXG4gICAgICAgICAgICAgICAgdHlwZTogcGFydGlhbEV2ZW50LnR5cGUsXHJcbiAgICAgICAgICAgICAgICBldmVudElkOiBwYXJ0aWFsRXZlbnQuZXZlbnRJZCxcclxuICAgICAgICAgICAgICAgIHRlbmFudElkOiBwYXJ0aWFsRXZlbnQudGVuYW50SWQsXHJcbiAgICAgICAgICAgICAgICBzZXNzaW9uSWQ6IHBhcnRpYWxFdmVudC5zZXNzaW9uSWQsXHJcbiAgICAgICAgICAgICAgICB1cmxSZXNwb25zZTogY2FsbGJhY2tVcmwsXHJcbiAgICAgICAgICAgICAgICBwb3N0Qm9keTogbnVsbFxyXG4gICAgICAgICAgICB9O1xyXG4gICAgICAgIH1cclxuICAgIH1cclxuICAgIHJldHVybiBudWxsO1xyXG59XHJcbmZ1bmN0aW9uIGdlbmVyYXRlU2Vzc2lvbklkKCkge1xyXG4gICAgY29uc3QgY2hhcnMgPSBbXTtcclxuICAgIGNvbnN0IGFsbG93ZWRDaGFycyA9ICcxMjM0NTY3ODkwYWJjZGVmZ2hpamtsbW5vcHFyc3R1dnd4eXpBQkNERUZHSElKS0xNTk9QUVJTVFVWV1hZWic7XHJcbiAgICBmb3IgKGxldCBpID0gMDsgaSA8IFNFU1NJT05fSURfTEVOR1RIOyBpKyspIHtcclxuICAgICAgICBjb25zdCBpZHggPSBNYXRoLmZsb29yKE1hdGgucmFuZG9tKCkgKiBhbGxvd2VkQ2hhcnMubGVuZ3RoKTtcclxuICAgICAgICBjaGFycy5wdXNoKGFsbG93ZWRDaGFycy5jaGFyQXQoaWR4KSk7XHJcbiAgICB9XHJcbiAgICByZXR1cm4gY2hhcnMuam9pbignJyk7XHJcbn1cclxuZnVuY3Rpb24gc3RvcmFnZSgpIHtcclxuICAgIHJldHVybiBfZ2V0SW5zdGFuY2UoYnJvd3NlckxvY2FsUGVyc2lzdGVuY2UpO1xyXG59XHJcbmZ1bmN0aW9uIHBlcnNpc3RlbmNlS2V5KGF1dGgpIHtcclxuICAgIHJldHVybiBfcGVyc2lzdGVuY2VLZXlOYW1lKFwiYXV0aEV2ZW50XCIgLyogQVVUSF9FVkVOVCAqLywgYXV0aC5jb25maWcuYXBpS2V5LCBhdXRoLm5hbWUpO1xyXG59XHJcbmZ1bmN0aW9uIHBhcnNlSnNvbk9yTnVsbChqc29uKSB7XHJcbiAgICB0cnkge1xyXG4gICAgICAgIHJldHVybiBKU09OLnBhcnNlKGpzb24pO1xyXG4gICAgfVxyXG4gICAgY2F0Y2ggKGUpIHtcclxuICAgICAgICByZXR1cm4gbnVsbDtcclxuICAgIH1cclxufVxyXG4vLyBFeHBvcnRlZCBmb3IgdGVzdGluZ1xyXG5mdW5jdGlvbiBfZ2V0RGVlcExpbmtGcm9tQ2FsbGJhY2sodXJsKSB7XHJcbiAgICBjb25zdCBwYXJhbXMgPSBzZWFyY2hQYXJhbXNPckVtcHR5KHVybCk7XHJcbiAgICBjb25zdCBsaW5rID0gcGFyYW1zWydsaW5rJ10gPyBkZWNvZGVVUklDb21wb25lbnQocGFyYW1zWydsaW5rJ10pIDogdW5kZWZpbmVkO1xyXG4gICAgLy8gRG91YmxlIGxpbmsgY2FzZSAoYXV0b21hdGljIHJlZGlyZWN0KVxyXG4gICAgY29uc3QgZG91YmxlRGVlcExpbmsgPSBzZWFyY2hQYXJhbXNPckVtcHR5KGxpbmspWydsaW5rJ107XHJcbiAgICAvLyBpT1MgY3VzdG9tIHNjaGVtZSBsaW5rcy5cclxuICAgIGNvbnN0IGlPU0RlZXBMaW5rID0gcGFyYW1zWydkZWVwX2xpbmtfaWQnXVxyXG4gICAgICAgID8gZGVjb2RlVVJJQ29tcG9uZW50KHBhcmFtc1snZGVlcF9saW5rX2lkJ10pXHJcbiAgICAgICAgOiB1bmRlZmluZWQ7XHJcbiAgICBjb25zdCBpT1NEb3VibGVEZWVwTGluayA9IHNlYXJjaFBhcmFtc09yRW1wdHkoaU9TRGVlcExpbmspWydsaW5rJ107XHJcbiAgICByZXR1cm4gaU9TRG91YmxlRGVlcExpbmsgfHwgaU9TRGVlcExpbmsgfHwgZG91YmxlRGVlcExpbmsgfHwgbGluayB8fCB1cmw7XHJcbn1cclxuLyoqXHJcbiAqIE9wdGltaXN0aWNhbGx5IHRyaWVzIHRvIGdldCBzZWFyY2ggcGFyYW1zIGZyb20gYSBzdHJpbmcsIG9yIGVsc2UgcmV0dXJucyBhblxyXG4gKiBlbXB0eSBzZWFyY2ggcGFyYW1zIG9iamVjdC5cclxuICovXHJcbmZ1bmN0aW9uIHNlYXJjaFBhcmFtc09yRW1wdHkodXJsKSB7XHJcbiAgICBpZiAoISh1cmwgPT09IG51bGwgfHwgdXJsID09PSB2b2lkIDAgPyB2b2lkIDAgOiB1cmwuaW5jbHVkZXMoJz8nKSkpIHtcclxuICAgICAgICByZXR1cm4ge307XHJcbiAgICB9XHJcbiAgICBjb25zdCBbXywgLi4ucmVzdF0gPSB1cmwuc3BsaXQoJz8nKTtcclxuICAgIHJldHVybiBxdWVyeXN0cmluZ0RlY29kZShyZXN0LmpvaW4oJz8nKSk7XHJcbn1cblxuLyoqXHJcbiAqIEBsaWNlbnNlXHJcbiAqIENvcHlyaWdodCAyMDIxIEdvb2dsZSBMTENcclxuICpcclxuICogTGljZW5zZWQgdW5kZXIgdGhlIEFwYWNoZSBMaWNlbnNlLCBWZXJzaW9uIDIuMCAodGhlIFwiTGljZW5zZVwiKTtcclxuICogeW91IG1heSBub3QgdXNlIHRoaXMgZmlsZSBleGNlcHQgaW4gY29tcGxpYW5jZSB3aXRoIHRoZSBMaWNlbnNlLlxyXG4gKiBZb3UgbWF5IG9idGFpbiBhIGNvcHkgb2YgdGhlIExpY2Vuc2UgYXRcclxuICpcclxuICogICBodHRwOi8vd3d3LmFwYWNoZS5vcmcvbGljZW5zZXMvTElDRU5TRS0yLjBcclxuICpcclxuICogVW5sZXNzIHJlcXVpcmVkIGJ5IGFwcGxpY2FibGUgbGF3IG9yIGFncmVlZCB0byBpbiB3cml0aW5nLCBzb2Z0d2FyZVxyXG4gKiBkaXN0cmlidXRlZCB1bmRlciB0aGUgTGljZW5zZSBpcyBkaXN0cmlidXRlZCBvbiBhbiBcIkFTIElTXCIgQkFTSVMsXHJcbiAqIFdJVEhPVVQgV0FSUkFOVElFUyBPUiBDT05ESVRJT05TIE9GIEFOWSBLSU5ELCBlaXRoZXIgZXhwcmVzcyBvciBpbXBsaWVkLlxyXG4gKiBTZWUgdGhlIExpY2Vuc2UgZm9yIHRoZSBzcGVjaWZpYyBsYW5ndWFnZSBnb3Zlcm5pbmcgcGVybWlzc2lvbnMgYW5kXHJcbiAqIGxpbWl0YXRpb25zIHVuZGVyIHRoZSBMaWNlbnNlLlxyXG4gKi9cclxuLyoqXHJcbiAqIEhvdyBsb25nIHRvIHdhaXQgZm9yIHRoZSBpbml0aWFsIGF1dGggZXZlbnQgYmVmb3JlIGNvbmNsdWRpbmcgbm9cclxuICogcmVkaXJlY3QgcGVuZGluZ1xyXG4gKi9cclxuY29uc3QgSU5JVElBTF9FVkVOVF9USU1FT1VUX01TID0gNTAwO1xyXG5jbGFzcyBDb3Jkb3ZhUG9wdXBSZWRpcmVjdFJlc29sdmVyIHtcclxuICAgIGNvbnN0cnVjdG9yKCkge1xyXG4gICAgICAgIHRoaXMuX3JlZGlyZWN0UGVyc2lzdGVuY2UgPSBicm93c2VyU2Vzc2lvblBlcnNpc3RlbmNlO1xyXG4gICAgICAgIHRoaXMuX3Nob3VsZEluaXRQcm9hY3RpdmVseSA9IHRydWU7IC8vIFRoaXMgaXMgbGlnaHR3ZWlnaHQgZm9yIENvcmRvdmFcclxuICAgICAgICB0aGlzLmV2ZW50TWFuYWdlcnMgPSBuZXcgTWFwKCk7XHJcbiAgICAgICAgdGhpcy5vcmlnaW5WYWxpZGF0aW9uUHJvbWlzZXMgPSB7fTtcclxuICAgICAgICB0aGlzLl9jb21wbGV0ZVJlZGlyZWN0Rm4gPSBfZ2V0UmVkaXJlY3RSZXN1bHQ7XHJcbiAgICAgICAgdGhpcy5fb3ZlcnJpZGVSZWRpcmVjdFJlc3VsdCA9IF9vdmVycmlkZVJlZGlyZWN0UmVzdWx0O1xyXG4gICAgfVxyXG4gICAgYXN5bmMgX2luaXRpYWxpemUoYXV0aCkge1xyXG4gICAgICAgIGNvbnN0IGtleSA9IGF1dGguX2tleSgpO1xyXG4gICAgICAgIGxldCBtYW5hZ2VyID0gdGhpcy5ldmVudE1hbmFnZXJzLmdldChrZXkpO1xyXG4gICAgICAgIGlmICghbWFuYWdlcikge1xyXG4gICAgICAgICAgICBtYW5hZ2VyID0gbmV3IENvcmRvdmFBdXRoRXZlbnRNYW5hZ2VyKGF1dGgpO1xyXG4gICAgICAgICAgICB0aGlzLmV2ZW50TWFuYWdlcnMuc2V0KGtleSwgbWFuYWdlcik7XHJcbiAgICAgICAgICAgIHRoaXMuYXR0YWNoQ2FsbGJhY2tMaXN0ZW5lcnMoYXV0aCwgbWFuYWdlcik7XHJcbiAgICAgICAgfVxyXG4gICAgICAgIHJldHVybiBtYW5hZ2VyO1xyXG4gICAgfVxyXG4gICAgX29wZW5Qb3B1cChhdXRoKSB7XHJcbiAgICAgICAgX2ZhaWwoYXV0aCwgXCJvcGVyYXRpb24tbm90LXN1cHBvcnRlZC1pbi10aGlzLWVudmlyb25tZW50XCIgLyogT1BFUkFUSU9OX05PVF9TVVBQT1JURUQgKi8pO1xyXG4gICAgfVxyXG4gICAgYXN5bmMgX29wZW5SZWRpcmVjdChhdXRoLCBwcm92aWRlciwgYXV0aFR5cGUsIGV2ZW50SWQpIHtcclxuICAgICAgICBfY2hlY2tDb3Jkb3ZhQ29uZmlndXJhdGlvbihhdXRoKTtcclxuICAgICAgICBjb25zdCBtYW5hZ2VyID0gYXdhaXQgdGhpcy5faW5pdGlhbGl6ZShhdXRoKTtcclxuICAgICAgICBhd2FpdCBtYW5hZ2VyLmluaXRpYWxpemVkKCk7XHJcbiAgICAgICAgLy8gUmVzZXQgdGhlIHBlcnNpc3RlZCByZWRpcmVjdCBzdGF0ZXMuIFRoaXMgZG9lcyBub3QgbWF0dGVyIG9uIFdlYiB3aGVyZVxyXG4gICAgICAgIC8vIHRoZSByZWRpcmVjdCBhbHdheXMgYmxvd3MgYXdheSBhcHBsaWNhdGlvbiBzdGF0ZSBlbnRpcmVseS4gT24gQ29yZG92YSxcclxuICAgICAgICAvLyB0aGUgYXBwIG1haW50YWlucyBjb250cm9sIGZsb3cgdGhyb3VnaCB0aGUgcmVkaXJlY3QuXHJcbiAgICAgICAgbWFuYWdlci5yZXNldFJlZGlyZWN0KCk7XHJcbiAgICAgICAgX2NsZWFyUmVkaXJlY3RPdXRjb21lcygpO1xyXG4gICAgICAgIGF3YWl0IHRoaXMuX29yaWdpblZhbGlkYXRpb24oYXV0aCk7XHJcbiAgICAgICAgY29uc3QgZXZlbnQgPSBfZ2VuZXJhdGVOZXdFdmVudChhdXRoLCBhdXRoVHlwZSwgZXZlbnRJZCk7XHJcbiAgICAgICAgYXdhaXQgX3NhdmVQYXJ0aWFsRXZlbnQoYXV0aCwgZXZlbnQpO1xyXG4gICAgICAgIGNvbnN0IHVybCA9IGF3YWl0IF9nZW5lcmF0ZUhhbmRsZXJVcmwoYXV0aCwgZXZlbnQsIHByb3ZpZGVyKTtcclxuICAgICAgICBjb25zdCBpYWJSZWYgPSBhd2FpdCBfcGVyZm9ybVJlZGlyZWN0KHVybCk7XHJcbiAgICAgICAgcmV0dXJuIF93YWl0Rm9yQXBwUmVzdW1lKGF1dGgsIG1hbmFnZXIsIGlhYlJlZik7XHJcbiAgICB9XHJcbiAgICBfaXNJZnJhbWVXZWJTdG9yYWdlU3VwcG9ydGVkKF9hdXRoLCBfY2IpIHtcclxuICAgICAgICB0aHJvdyBuZXcgRXJyb3IoJ01ldGhvZCBub3QgaW1wbGVtZW50ZWQuJyk7XHJcbiAgICB9XHJcbiAgICBfb3JpZ2luVmFsaWRhdGlvbihhdXRoKSB7XHJcbiAgICAgICAgY29uc3Qga2V5ID0gYXV0aC5fa2V5KCk7XHJcbiAgICAgICAgaWYgKCF0aGlzLm9yaWdpblZhbGlkYXRpb25Qcm9taXNlc1trZXldKSB7XHJcbiAgICAgICAgICAgIHRoaXMub3JpZ2luVmFsaWRhdGlvblByb21pc2VzW2tleV0gPSBfdmFsaWRhdGVPcmlnaW4oYXV0aCk7XHJcbiAgICAgICAgfVxyXG4gICAgICAgIHJldHVybiB0aGlzLm9yaWdpblZhbGlkYXRpb25Qcm9taXNlc1trZXldO1xyXG4gICAgfVxyXG4gICAgYXR0YWNoQ2FsbGJhY2tMaXN0ZW5lcnMoYXV0aCwgbWFuYWdlcikge1xyXG4gICAgICAgIC8vIEdldCB0aGUgZ2xvYmFsIHBsdWdpbnNcclxuICAgICAgICBjb25zdCB7IHVuaXZlcnNhbExpbmtzLCBoYW5kbGVPcGVuVVJMLCBCdWlsZEluZm8gfSA9IF9jb3Jkb3ZhV2luZG93KCk7XHJcbiAgICAgICAgY29uc3Qgbm9FdmVudFRpbWVvdXQgPSBzZXRUaW1lb3V0KGFzeW5jICgpID0+IHtcclxuICAgICAgICAgICAgLy8gV2UgZGlkbid0IHNlZSB0aGF0IGluaXRpYWwgZXZlbnQuIENsZWFyIGFueSBwZW5kaW5nIG9iamVjdCBhbmRcclxuICAgICAgICAgICAgLy8gZGlzcGF0Y2ggbm8gZXZlbnRcclxuICAgICAgICAgICAgYXdhaXQgX2dldEFuZFJlbW92ZUV2ZW50KGF1dGgpO1xyXG4gICAgICAgICAgICBtYW5hZ2VyLm9uRXZlbnQoZ2VuZXJhdGVOb0V2ZW50KCkpO1xyXG4gICAgICAgIH0sIElOSVRJQUxfRVZFTlRfVElNRU9VVF9NUyk7XHJcbiAgICAgICAgY29uc3QgdW5pdmVyc2FsTGlua3NDYiA9IGFzeW5jIChldmVudERhdGEpID0+IHtcclxuICAgICAgICAgICAgLy8gV2UgaGF2ZSBhbiBldmVudCBzbyB3ZSBjYW4gY2xlYXIgdGhlIG5vIGV2ZW50IHRpbWVvdXRcclxuICAgICAgICAgICAgY2xlYXJUaW1lb3V0KG5vRXZlbnRUaW1lb3V0KTtcclxuICAgICAgICAgICAgY29uc3QgcGFydGlhbEV2ZW50ID0gYXdhaXQgX2dldEFuZFJlbW92ZUV2ZW50KGF1dGgpO1xyXG4gICAgICAgICAgICBsZXQgZmluYWxFdmVudCA9IG51bGw7XHJcbiAgICAgICAgICAgIGlmIChwYXJ0aWFsRXZlbnQgJiYgKGV2ZW50RGF0YSA9PT0gbnVsbCB8fCBldmVudERhdGEgPT09IHZvaWQgMCA/IHZvaWQgMCA6IGV2ZW50RGF0YVsndXJsJ10pKSB7XHJcbiAgICAgICAgICAgICAgICBmaW5hbEV2ZW50ID0gX2V2ZW50RnJvbVBhcnRpYWxBbmRVcmwocGFydGlhbEV2ZW50LCBldmVudERhdGFbJ3VybCddKTtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAvLyBJZiBmaW5hbEV2ZW50IGlzIG5ldmVyIGZpbGxlZCwgdHJpZ2dlciB3aXRoIG5vIGV2ZW50XHJcbiAgICAgICAgICAgIG1hbmFnZXIub25FdmVudChmaW5hbEV2ZW50IHx8IGdlbmVyYXRlTm9FdmVudCgpKTtcclxuICAgICAgICB9O1xyXG4gICAgICAgIC8vIFVuaXZlcnNhbCBsaW5rcyBzdWJzY3JpYmVyIGRvZXNuJ3QgZXhpc3QgZm9yIGlPUywgc28gd2UgbmVlZCB0byBjaGVja1xyXG4gICAgICAgIGlmICh0eXBlb2YgdW5pdmVyc2FsTGlua3MgIT09ICd1bmRlZmluZWQnICYmXHJcbiAgICAgICAgICAgIHR5cGVvZiB1bml2ZXJzYWxMaW5rcy5zdWJzY3JpYmUgPT09ICdmdW5jdGlvbicpIHtcclxuICAgICAgICAgICAgdW5pdmVyc2FsTGlua3Muc3Vic2NyaWJlKG51bGwsIHVuaXZlcnNhbExpbmtzQ2IpO1xyXG4gICAgICAgIH1cclxuICAgICAgICAvLyBpT1MgNyBvciA4IGN1c3RvbSBVUkwgc2NoZW1lcy5cclxuICAgICAgICAvLyBUaGlzIGlzIGFsc28gdGhlIGN1cnJlbnQgZGVmYXVsdCBiZWhhdmlvciBmb3IgaU9TIDkrLlxyXG4gICAgICAgIC8vIEZvciB0aGlzIHRvIHdvcmssIGNvcmRvdmEtcGx1Z2luLWN1c3RvbXVybHNjaGVtZSBuZWVkcyB0byBiZSBpbnN0YWxsZWQuXHJcbiAgICAgICAgLy8gaHR0cHM6Ly9naXRodWIuY29tL0VkZHlWZXJicnVnZ2VuL0N1c3RvbS1VUkwtc2NoZW1lXHJcbiAgICAgICAgLy8gRG8gbm90IG92ZXJ3cml0ZSB0aGUgZXhpc3RpbmcgZGV2ZWxvcGVyJ3MgVVJMIGhhbmRsZXIuXHJcbiAgICAgICAgY29uc3QgZXhpc3RpbmdIYW5kbGVPcGVuVVJMID0gaGFuZGxlT3BlblVSTDtcclxuICAgICAgICBjb25zdCBwYWNrYWdlUHJlZml4ID0gYCR7QnVpbGRJbmZvLnBhY2thZ2VOYW1lLnRvTG93ZXJDYXNlKCl9Oi8vYDtcclxuICAgICAgICBfY29yZG92YVdpbmRvdygpLmhhbmRsZU9wZW5VUkwgPSBhc3luYyAodXJsKSA9PiB7XHJcbiAgICAgICAgICAgIGlmICh1cmwudG9Mb3dlckNhc2UoKS5zdGFydHNXaXRoKHBhY2thZ2VQcmVmaXgpKSB7XHJcbiAgICAgICAgICAgICAgICAvLyBXZSB3YW50IHRoaXMgaW50ZW50aW9uYWxseSB0byBmbG9hdFxyXG4gICAgICAgICAgICAgICAgLy8gZXNsaW50LWRpc2FibGUtbmV4dC1saW5lIEB0eXBlc2NyaXB0LWVzbGludC9uby1mbG9hdGluZy1wcm9taXNlc1xyXG4gICAgICAgICAgICAgICAgdW5pdmVyc2FsTGlua3NDYih7IHVybCB9KTtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAvLyBDYWxsIHRoZSBkZXZlbG9wZXIncyBoYW5kbGVyIGlmIGl0IGlzIHByZXNlbnQuXHJcbiAgICAgICAgICAgIGlmICh0eXBlb2YgZXhpc3RpbmdIYW5kbGVPcGVuVVJMID09PSAnZnVuY3Rpb24nKSB7XHJcbiAgICAgICAgICAgICAgICB0cnkge1xyXG4gICAgICAgICAgICAgICAgICAgIGV4aXN0aW5nSGFuZGxlT3BlblVSTCh1cmwpO1xyXG4gICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgY2F0Y2ggKGUpIHtcclxuICAgICAgICAgICAgICAgICAgICAvLyBUaGlzIGlzIGEgZGV2ZWxvcGVyIGVycm9yLiBEb24ndCBzdG9wIHRoZSBmbG93IG9mIHRoZSBTREsuXHJcbiAgICAgICAgICAgICAgICAgICAgY29uc29sZS5lcnJvcihlKTtcclxuICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgfVxyXG4gICAgICAgIH07XHJcbiAgICB9XHJcbn1cclxuLyoqXHJcbiAqIEFuIGltcGxlbWVudGF0aW9uIG9mIHtAbGluayBQb3B1cFJlZGlyZWN0UmVzb2x2ZXJ9IHN1aXRhYmxlIGZvciBDb3Jkb3ZhXHJcbiAqIGJhc2VkIGFwcGxpY2F0aW9ucy5cclxuICpcclxuICogQHB1YmxpY1xyXG4gKi9cclxuY29uc3QgY29yZG92YVBvcHVwUmVkaXJlY3RSZXNvbHZlciA9IENvcmRvdmFQb3B1cFJlZGlyZWN0UmVzb2x2ZXI7XHJcbmZ1bmN0aW9uIGdlbmVyYXRlTm9FdmVudCgpIHtcclxuICAgIHJldHVybiB7XHJcbiAgICAgICAgdHlwZTogXCJ1bmtub3duXCIgLyogVU5LTk9XTiAqLyxcclxuICAgICAgICBldmVudElkOiBudWxsLFxyXG4gICAgICAgIHNlc3Npb25JZDogbnVsbCxcclxuICAgICAgICB1cmxSZXNwb25zZTogbnVsbCxcclxuICAgICAgICBwb3N0Qm9keTogbnVsbCxcclxuICAgICAgICB0ZW5hbnRJZDogbnVsbCxcclxuICAgICAgICBlcnJvcjogX2NyZWF0ZUVycm9yKFwibm8tYXV0aC1ldmVudFwiIC8qIE5PX0FVVEhfRVZFTlQgKi8pXHJcbiAgICB9O1xyXG59XG5cbi8qKlxyXG4gKiBAbGljZW5zZVxyXG4gKiBDb3B5cmlnaHQgMjAxNyBHb29nbGUgTExDXHJcbiAqXHJcbiAqIExpY2Vuc2VkIHVuZGVyIHRoZSBBcGFjaGUgTGljZW5zZSwgVmVyc2lvbiAyLjAgKHRoZSBcIkxpY2Vuc2VcIik7XHJcbiAqIHlvdSBtYXkgbm90IHVzZSB0aGlzIGZpbGUgZXhjZXB0IGluIGNvbXBsaWFuY2Ugd2l0aCB0aGUgTGljZW5zZS5cclxuICogWW91IG1heSBvYnRhaW4gYSBjb3B5IG9mIHRoZSBMaWNlbnNlIGF0XHJcbiAqXHJcbiAqICAgaHR0cDovL3d3dy5hcGFjaGUub3JnL2xpY2Vuc2VzL0xJQ0VOU0UtMi4wXHJcbiAqXHJcbiAqIFVubGVzcyByZXF1aXJlZCBieSBhcHBsaWNhYmxlIGxhdyBvciBhZ3JlZWQgdG8gaW4gd3JpdGluZywgc29mdHdhcmVcclxuICogZGlzdHJpYnV0ZWQgdW5kZXIgdGhlIExpY2Vuc2UgaXMgZGlzdHJpYnV0ZWQgb24gYW4gXCJBUyBJU1wiIEJBU0lTLFxyXG4gKiBXSVRIT1VUIFdBUlJBTlRJRVMgT1IgQ09ORElUSU9OUyBPRiBBTlkgS0lORCwgZWl0aGVyIGV4cHJlc3Mgb3IgaW1wbGllZC5cclxuICogU2VlIHRoZSBMaWNlbnNlIGZvciB0aGUgc3BlY2lmaWMgbGFuZ3VhZ2UgZ292ZXJuaW5nIHBlcm1pc3Npb25zIGFuZFxyXG4gKiBsaW1pdGF0aW9ucyB1bmRlciB0aGUgTGljZW5zZS5cclxuICovXHJcbi8vIFRoaXMgZnVuY3Rpb24gc2hvdWxkIG9ubHkgYmUgY2FsbGVkIGJ5IGZyYW1ld29ya3MgKGUuZy4gRmlyZWJhc2VVSS13ZWIpIHRvIGxvZyB0aGVpciB1c2FnZS5cclxuLy8gSXQgaXMgbm90IGludGVuZGVkIGZvciBkaXJlY3QgdXNlIGJ5IGRldmVsb3BlciBhcHBzLiBOTyBqc2RvYyBoZXJlIHRvIGludGVudGlvbmFsbHkgbGVhdmUgaXQgb3V0XHJcbi8vIG9mIGF1dG9nZW5lcmF0ZWQgZG9jdW1lbnRhdGlvbiBwYWdlcyB0byByZWR1Y2UgYWNjaWRlbnRhbCBtaXN1c2UuXHJcbmZ1bmN0aW9uIGFkZEZyYW1ld29ya0ZvckxvZ2dpbmcoYXV0aCwgZnJhbWV3b3JrKSB7XHJcbiAgICBfY2FzdEF1dGgoYXV0aCkuX2xvZ0ZyYW1ld29yayhmcmFtZXdvcmspO1xyXG59XG5cbmV4cG9ydCB7IGFkZEZyYW1ld29ya0ZvckxvZ2dpbmcsIGNvcmRvdmFQb3B1cFJlZGlyZWN0UmVzb2x2ZXIgfTtcbi8vIyBzb3VyY2VNYXBwaW5nVVJMPWludGVybmFsLmpzLm1hcFxuIl0sIm5hbWVzIjpbXSwic291cmNlUm9vdCI6IiJ9\n//# sourceURL=webpack-internal:///./node_modules/@firebase/auth/dist/esm2017/internal.js\n");

/***/ }),

/***/ "./node_modules/@firebase/firestore-compat/dist/index.esm2017.js":
/*!***********************************************************************!*\
  !*** ./node_modules/@firebase/firestore-compat/dist/index.esm2017.js ***!
  \***********************************************************************/
/***/ (function(__unused_webpack_module, __webpack_exports__, __webpack_require__) {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   \"registerFirestore\": function() { return /* binding */ registerFirestore; }\n/* harmony export */ });\n/* harmony import */ var _firebase_app_compat__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! @firebase/app-compat */ \"./node_modules/@firebase/app-compat/dist/esm/index.esm2017.js\");\n/* harmony import */ var _firebase_firestore__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! @firebase/firestore */ \"./node_modules/@firebase/firestore/dist/index.esm2017.js\");\n/* harmony import */ var _firebase_util__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! @firebase/util */ \"./node_modules/@firebase/util/dist/index.esm2017.js\");\n/* harmony import */ var _firebase_component__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! @firebase/component */ \"./node_modules/@firebase/component/dist/esm/index.esm2017.js\");\n\n\n\n\n\nconst name = \"@firebase/firestore-compat\";\nconst version = \"0.1.19\";\n\n/**\r\n * @license\r\n * Copyright 2021 Google LLC\r\n *\r\n * Licensed under the Apache License, Version 2.0 (the \"License\");\r\n * you may not use this file except in compliance with the License.\r\n * You may obtain a copy of the License at\r\n *\r\n *   http://www.apache.org/licenses/LICENSE-2.0\r\n *\r\n * Unless required by applicable law or agreed to in writing, software\r\n * distributed under the License is distributed on an \"AS IS\" BASIS,\r\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\r\n * See the License for the specific language governing permissions and\r\n * limitations under the License.\r\n */\r\nfunction validateSetOptions(methodName, options) {\r\n    if (options === undefined) {\r\n        return {\r\n            merge: false\r\n        };\r\n    }\r\n    if (options.mergeFields !== undefined && options.merge !== undefined) {\r\n        throw new _firebase_firestore__WEBPACK_IMPORTED_MODULE_1__.FirestoreError('invalid-argument', `Invalid options passed to function ${methodName}(): You cannot ` +\r\n            'specify both \"merge\" and \"mergeFields\".');\r\n    }\r\n    return options;\r\n}\n\n/**\r\n * @license\r\n * Copyright 2017 Google LLC\r\n *\r\n * Licensed under the Apache License, Version 2.0 (the \"License\");\r\n * you may not use this file except in compliance with the License.\r\n * You may obtain a copy of the License at\r\n *\r\n *   http://www.apache.org/licenses/LICENSE-2.0\r\n *\r\n * Unless required by applicable law or agreed to in writing, software\r\n * distributed under the License is distributed on an \"AS IS\" BASIS,\r\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\r\n * See the License for the specific language governing permissions and\r\n * limitations under the License.\r\n */\r\n/** Helper function to assert Uint8Array is available at runtime. */\r\nfunction assertUint8ArrayAvailable() {\r\n    if (typeof Uint8Array === 'undefined') {\r\n        throw new _firebase_firestore__WEBPACK_IMPORTED_MODULE_1__.FirestoreError('unimplemented', 'Uint8Arrays are not available in this environment.');\r\n    }\r\n}\r\n/** Helper function to assert Base64 functions are available at runtime. */\r\nfunction assertBase64Available() {\r\n    if (!(0,_firebase_firestore__WEBPACK_IMPORTED_MODULE_1__._isBase64Available)()) {\r\n        throw new _firebase_firestore__WEBPACK_IMPORTED_MODULE_1__.FirestoreError('unimplemented', 'Blobs are unavailable in Firestore in this environment.');\r\n    }\r\n}\r\n/** Immutable class holding a blob (binary data) */\r\nclass Blob {\r\n    constructor(_delegate) {\r\n        this._delegate = _delegate;\r\n    }\r\n    static fromBase64String(base64) {\r\n        assertBase64Available();\r\n        return new Blob(_firebase_firestore__WEBPACK_IMPORTED_MODULE_1__.Bytes.fromBase64String(base64));\r\n    }\r\n    static fromUint8Array(array) {\r\n        assertUint8ArrayAvailable();\r\n        return new Blob(_firebase_firestore__WEBPACK_IMPORTED_MODULE_1__.Bytes.fromUint8Array(array));\r\n    }\r\n    toBase64() {\r\n        assertBase64Available();\r\n        return this._delegate.toBase64();\r\n    }\r\n    toUint8Array() {\r\n        assertUint8ArrayAvailable();\r\n        return this._delegate.toUint8Array();\r\n    }\r\n    isEqual(other) {\r\n        return this._delegate.isEqual(other._delegate);\r\n    }\r\n    toString() {\r\n        return 'Blob(base64: ' + this.toBase64() + ')';\r\n    }\r\n}\n\n/**\r\n * @license\r\n * Copyright 2017 Google LLC\r\n *\r\n * Licensed under the Apache License, Version 2.0 (the \"License\");\r\n * you may not use this file except in compliance with the License.\r\n * You may obtain a copy of the License at\r\n *\r\n *   http://www.apache.org/licenses/LICENSE-2.0\r\n *\r\n * Unless required by applicable law or agreed to in writing, software\r\n * distributed under the License is distributed on an \"AS IS\" BASIS,\r\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\r\n * See the License for the specific language governing permissions and\r\n * limitations under the License.\r\n */\r\nfunction isPartialObserver(obj) {\r\n    return implementsAnyMethods(obj, ['next', 'error', 'complete']);\r\n}\r\n/**\r\n * Returns true if obj is an object and contains at least one of the specified\r\n * methods.\r\n */\r\nfunction implementsAnyMethods(obj, methods) {\r\n    if (typeof obj !== 'object' || obj === null) {\r\n        return false;\r\n    }\r\n    const object = obj;\r\n    for (const method of methods) {\r\n        if (method in object && typeof object[method] === 'function') {\r\n            return true;\r\n        }\r\n    }\r\n    return false;\r\n}\n\n/**\r\n * @license\r\n * Copyright 2017 Google LLC\r\n *\r\n * Licensed under the Apache License, Version 2.0 (the \"License\");\r\n * you may not use this file except in compliance with the License.\r\n * You may obtain a copy of the License at\r\n *\r\n *   http://www.apache.org/licenses/LICENSE-2.0\r\n *\r\n * Unless required by applicable law or agreed to in writing, software\r\n * distributed under the License is distributed on an \"AS IS\" BASIS,\r\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\r\n * See the License for the specific language governing permissions and\r\n * limitations under the License.\r\n */\r\n/**\r\n * The persistence provider included with the full Firestore SDK.\r\n */\r\nclass IndexedDbPersistenceProvider {\r\n    enableIndexedDbPersistence(firestore, forceOwnership) {\r\n        return (0,_firebase_firestore__WEBPACK_IMPORTED_MODULE_1__.enableIndexedDbPersistence)(firestore._delegate, { forceOwnership });\r\n    }\r\n    enableMultiTabIndexedDbPersistence(firestore) {\r\n        return (0,_firebase_firestore__WEBPACK_IMPORTED_MODULE_1__.enableMultiTabIndexedDbPersistence)(firestore._delegate);\r\n    }\r\n    clearIndexedDbPersistence(firestore) {\r\n        return (0,_firebase_firestore__WEBPACK_IMPORTED_MODULE_1__.clearIndexedDbPersistence)(firestore._delegate);\r\n    }\r\n}\r\n/**\r\n * Compat class for Firestore. Exposes Firestore Legacy API, but delegates\r\n * to the functional API of firestore-exp.\r\n */\r\nclass Firestore {\r\n    constructor(databaseIdOrApp, _delegate, _persistenceProvider) {\r\n        this._delegate = _delegate;\r\n        this._persistenceProvider = _persistenceProvider;\r\n        this.INTERNAL = {\r\n            delete: () => this.terminate()\r\n        };\r\n        if (!(databaseIdOrApp instanceof _firebase_firestore__WEBPACK_IMPORTED_MODULE_1__._DatabaseId)) {\r\n            this._appCompat = databaseIdOrApp;\r\n        }\r\n    }\r\n    get _databaseId() {\r\n        return this._delegate._databaseId;\r\n    }\r\n    settings(settingsLiteral) {\r\n        const currentSettings = this._delegate._getSettings();\r\n        if (!settingsLiteral.merge &&\r\n            currentSettings.host !== settingsLiteral.host) {\r\n            (0,_firebase_firestore__WEBPACK_IMPORTED_MODULE_1__._logWarn)('You are overriding the original host. If you did not intend ' +\r\n                'to override your settings, use {merge: true}.');\r\n        }\r\n        if (settingsLiteral.merge) {\r\n            settingsLiteral = Object.assign(Object.assign({}, currentSettings), settingsLiteral);\r\n            // Remove the property from the settings once the merge is completed\r\n            delete settingsLiteral.merge;\r\n        }\r\n        this._delegate._setSettings(settingsLiteral);\r\n    }\r\n    useEmulator(host, port, options = {}) {\r\n        (0,_firebase_firestore__WEBPACK_IMPORTED_MODULE_1__.connectFirestoreEmulator)(this._delegate, host, port, options);\r\n    }\r\n    enableNetwork() {\r\n        return (0,_firebase_firestore__WEBPACK_IMPORTED_MODULE_1__.enableNetwork)(this._delegate);\r\n    }\r\n    disableNetwork() {\r\n        return (0,_firebase_firestore__WEBPACK_IMPORTED_MODULE_1__.disableNetwork)(this._delegate);\r\n    }\r\n    enablePersistence(settings) {\r\n        let synchronizeTabs = false;\r\n        let experimentalForceOwningTab = false;\r\n        if (settings) {\r\n            synchronizeTabs = !!settings.synchronizeTabs;\r\n            experimentalForceOwningTab = !!settings.experimentalForceOwningTab;\r\n            (0,_firebase_firestore__WEBPACK_IMPORTED_MODULE_1__._validateIsNotUsedTogether)('synchronizeTabs', synchronizeTabs, 'experimentalForceOwningTab', experimentalForceOwningTab);\r\n        }\r\n        return synchronizeTabs\r\n            ? this._persistenceProvider.enableMultiTabIndexedDbPersistence(this)\r\n            : this._persistenceProvider.enableIndexedDbPersistence(this, experimentalForceOwningTab);\r\n    }\r\n    clearPersistence() {\r\n        return this._persistenceProvider.clearIndexedDbPersistence(this);\r\n    }\r\n    terminate() {\r\n        if (this._appCompat) {\r\n            this._appCompat._removeServiceInstance('firestore-compat');\r\n            this._appCompat._removeServiceInstance('firestore');\r\n        }\r\n        return this._delegate._delete();\r\n    }\r\n    waitForPendingWrites() {\r\n        return (0,_firebase_firestore__WEBPACK_IMPORTED_MODULE_1__.waitForPendingWrites)(this._delegate);\r\n    }\r\n    onSnapshotsInSync(arg) {\r\n        return (0,_firebase_firestore__WEBPACK_IMPORTED_MODULE_1__.onSnapshotsInSync)(this._delegate, arg);\r\n    }\r\n    get app() {\r\n        if (!this._appCompat) {\r\n            throw new _firebase_firestore__WEBPACK_IMPORTED_MODULE_1__.FirestoreError('failed-precondition', \"Firestore was not initialized using the Firebase SDK. 'app' is \" +\r\n                'not available');\r\n        }\r\n        return this._appCompat;\r\n    }\r\n    collection(pathString) {\r\n        try {\r\n            return new CollectionReference(this, (0,_firebase_firestore__WEBPACK_IMPORTED_MODULE_1__.collection)(this._delegate, pathString));\r\n        }\r\n        catch (e) {\r\n            throw replaceFunctionName(e, 'collection()', 'Firestore.collection()');\r\n        }\r\n    }\r\n    doc(pathString) {\r\n        try {\r\n            return new DocumentReference(this, (0,_firebase_firestore__WEBPACK_IMPORTED_MODULE_1__.doc)(this._delegate, pathString));\r\n        }\r\n        catch (e) {\r\n            throw replaceFunctionName(e, 'doc()', 'Firestore.doc()');\r\n        }\r\n    }\r\n    collectionGroup(collectionId) {\r\n        try {\r\n            return new Query(this, (0,_firebase_firestore__WEBPACK_IMPORTED_MODULE_1__.collectionGroup)(this._delegate, collectionId));\r\n        }\r\n        catch (e) {\r\n            throw replaceFunctionName(e, 'collectionGroup()', 'Firestore.collectionGroup()');\r\n        }\r\n    }\r\n    runTransaction(updateFunction) {\r\n        return (0,_firebase_firestore__WEBPACK_IMPORTED_MODULE_1__.runTransaction)(this._delegate, transaction => updateFunction(new Transaction(this, transaction)));\r\n    }\r\n    batch() {\r\n        (0,_firebase_firestore__WEBPACK_IMPORTED_MODULE_1__.ensureFirestoreConfigured)(this._delegate);\r\n        return new WriteBatch(new _firebase_firestore__WEBPACK_IMPORTED_MODULE_1__.WriteBatch(this._delegate, mutations => (0,_firebase_firestore__WEBPACK_IMPORTED_MODULE_1__.executeWrite)(this._delegate, mutations)));\r\n    }\r\n    loadBundle(bundleData) {\r\n        return (0,_firebase_firestore__WEBPACK_IMPORTED_MODULE_1__.loadBundle)(this._delegate, bundleData);\r\n    }\r\n    namedQuery(name) {\r\n        return (0,_firebase_firestore__WEBPACK_IMPORTED_MODULE_1__.namedQuery)(this._delegate, name).then(expQuery => {\r\n            if (!expQuery) {\r\n                return null;\r\n            }\r\n            return new Query(this, \r\n            // We can pass `expQuery` here directly since named queries don't have a UserDataConverter.\r\n            // Otherwise, we would have to create a new ExpQuery and pass the old UserDataConverter.\r\n            expQuery);\r\n        });\r\n    }\r\n}\r\nclass UserDataWriter extends _firebase_firestore__WEBPACK_IMPORTED_MODULE_1__.AbstractUserDataWriter {\r\n    constructor(firestore) {\r\n        super();\r\n        this.firestore = firestore;\r\n    }\r\n    convertBytes(bytes) {\r\n        return new Blob(new _firebase_firestore__WEBPACK_IMPORTED_MODULE_1__.Bytes(bytes));\r\n    }\r\n    convertReference(name) {\r\n        const key = this.convertDocumentKey(name, this.firestore._databaseId);\r\n        return DocumentReference.forKey(key, this.firestore, /* converter= */ null);\r\n    }\r\n}\r\nfunction setLogLevel(level) {\r\n    (0,_firebase_firestore__WEBPACK_IMPORTED_MODULE_1__.setLogLevel)(level);\r\n}\r\n/**\r\n * A reference to a transaction.\r\n */\r\nclass Transaction {\r\n    constructor(_firestore, _delegate) {\r\n        this._firestore = _firestore;\r\n        this._delegate = _delegate;\r\n        this._userDataWriter = new UserDataWriter(_firestore);\r\n    }\r\n    get(documentRef) {\r\n        const ref = castReference(documentRef);\r\n        return this._delegate\r\n            .get(ref)\r\n            .then(result => new DocumentSnapshot(this._firestore, new _firebase_firestore__WEBPACK_IMPORTED_MODULE_1__.DocumentSnapshot(this._firestore._delegate, this._userDataWriter, result._key, result._document, result.metadata, ref.converter)));\r\n    }\r\n    set(documentRef, data, options) {\r\n        const ref = castReference(documentRef);\r\n        if (options) {\r\n            validateSetOptions('Transaction.set', options);\r\n            this._delegate.set(ref, data, options);\r\n        }\r\n        else {\r\n            this._delegate.set(ref, data);\r\n        }\r\n        return this;\r\n    }\r\n    update(documentRef, dataOrField, value, ...moreFieldsAndValues) {\r\n        const ref = castReference(documentRef);\r\n        if (arguments.length === 2) {\r\n            this._delegate.update(ref, dataOrField);\r\n        }\r\n        else {\r\n            this._delegate.update(ref, dataOrField, value, ...moreFieldsAndValues);\r\n        }\r\n        return this;\r\n    }\r\n    delete(documentRef) {\r\n        const ref = castReference(documentRef);\r\n        this._delegate.delete(ref);\r\n        return this;\r\n    }\r\n}\r\nclass WriteBatch {\r\n    constructor(_delegate) {\r\n        this._delegate = _delegate;\r\n    }\r\n    set(documentRef, data, options) {\r\n        const ref = castReference(documentRef);\r\n        if (options) {\r\n            validateSetOptions('WriteBatch.set', options);\r\n            this._delegate.set(ref, data, options);\r\n        }\r\n        else {\r\n            this._delegate.set(ref, data);\r\n        }\r\n        return this;\r\n    }\r\n    update(documentRef, dataOrField, value, ...moreFieldsAndValues) {\r\n        const ref = castReference(documentRef);\r\n        if (arguments.length === 2) {\r\n            this._delegate.update(ref, dataOrField);\r\n        }\r\n        else {\r\n            this._delegate.update(ref, dataOrField, value, ...moreFieldsAndValues);\r\n        }\r\n        return this;\r\n    }\r\n    delete(documentRef) {\r\n        const ref = castReference(documentRef);\r\n        this._delegate.delete(ref);\r\n        return this;\r\n    }\r\n    commit() {\r\n        return this._delegate.commit();\r\n    }\r\n}\r\n/**\r\n * Wraps a `PublicFirestoreDataConverter` translating the types from the\r\n * experimental SDK into corresponding types from the Classic SDK before passing\r\n * them to the wrapped converter.\r\n */\r\nclass FirestoreDataConverter {\r\n    constructor(_firestore, _userDataWriter, _delegate) {\r\n        this._firestore = _firestore;\r\n        this._userDataWriter = _userDataWriter;\r\n        this._delegate = _delegate;\r\n    }\r\n    fromFirestore(snapshot, options) {\r\n        const expSnapshot = new _firebase_firestore__WEBPACK_IMPORTED_MODULE_1__.QueryDocumentSnapshot(this._firestore._delegate, this._userDataWriter, snapshot._key, snapshot._document, snapshot.metadata, \r\n        /* converter= */ null);\r\n        return this._delegate.fromFirestore(new QueryDocumentSnapshot(this._firestore, expSnapshot), options !== null && options !== void 0 ? options : {});\r\n    }\r\n    toFirestore(modelObject, options) {\r\n        if (!options) {\r\n            return this._delegate.toFirestore(modelObject);\r\n        }\r\n        else {\r\n            return this._delegate.toFirestore(modelObject, options);\r\n        }\r\n    }\r\n    // Use the same instance of `FirestoreDataConverter` for the given instances\r\n    // of `Firestore` and `PublicFirestoreDataConverter` so that isEqual() will\r\n    // compare equal for two objects created with the same converter instance.\r\n    static getInstance(firestore, converter) {\r\n        const converterMapByFirestore = FirestoreDataConverter.INSTANCES;\r\n        let untypedConverterByConverter = converterMapByFirestore.get(firestore);\r\n        if (!untypedConverterByConverter) {\r\n            untypedConverterByConverter = new WeakMap();\r\n            converterMapByFirestore.set(firestore, untypedConverterByConverter);\r\n        }\r\n        let instance = untypedConverterByConverter.get(converter);\r\n        if (!instance) {\r\n            instance = new FirestoreDataConverter(firestore, new UserDataWriter(firestore), converter);\r\n            untypedConverterByConverter.set(converter, instance);\r\n        }\r\n        return instance;\r\n    }\r\n}\r\nFirestoreDataConverter.INSTANCES = new WeakMap();\r\n/**\r\n * A reference to a particular document in a collection in the database.\r\n */\r\nclass DocumentReference {\r\n    constructor(firestore, _delegate) {\r\n        this.firestore = firestore;\r\n        this._delegate = _delegate;\r\n        this._userDataWriter = new UserDataWriter(firestore);\r\n    }\r\n    static forPath(path, firestore, converter) {\r\n        if (path.length % 2 !== 0) {\r\n            throw new _firebase_firestore__WEBPACK_IMPORTED_MODULE_1__.FirestoreError('invalid-argument', 'Invalid document reference. Document ' +\r\n                'references must have an even number of segments, but ' +\r\n                `${path.canonicalString()} has ${path.length}`);\r\n        }\r\n        return new DocumentReference(firestore, new _firebase_firestore__WEBPACK_IMPORTED_MODULE_1__.DocumentReference(firestore._delegate, converter, new _firebase_firestore__WEBPACK_IMPORTED_MODULE_1__._DocumentKey(path)));\r\n    }\r\n    static forKey(key, firestore, converter) {\r\n        return new DocumentReference(firestore, new _firebase_firestore__WEBPACK_IMPORTED_MODULE_1__.DocumentReference(firestore._delegate, converter, key));\r\n    }\r\n    get id() {\r\n        return this._delegate.id;\r\n    }\r\n    get parent() {\r\n        return new CollectionReference(this.firestore, this._delegate.parent);\r\n    }\r\n    get path() {\r\n        return this._delegate.path;\r\n    }\r\n    collection(pathString) {\r\n        try {\r\n            return new CollectionReference(this.firestore, (0,_firebase_firestore__WEBPACK_IMPORTED_MODULE_1__.collection)(this._delegate, pathString));\r\n        }\r\n        catch (e) {\r\n            throw replaceFunctionName(e, 'collection()', 'DocumentReference.collection()');\r\n        }\r\n    }\r\n    isEqual(other) {\r\n        other = (0,_firebase_util__WEBPACK_IMPORTED_MODULE_2__.getModularInstance)(other);\r\n        if (!(other instanceof _firebase_firestore__WEBPACK_IMPORTED_MODULE_1__.DocumentReference)) {\r\n            return false;\r\n        }\r\n        return (0,_firebase_firestore__WEBPACK_IMPORTED_MODULE_1__.refEqual)(this._delegate, other);\r\n    }\r\n    set(value, options) {\r\n        options = validateSetOptions('DocumentReference.set', options);\r\n        try {\r\n            if (options) {\r\n                return (0,_firebase_firestore__WEBPACK_IMPORTED_MODULE_1__.setDoc)(this._delegate, value, options);\r\n            }\r\n            else {\r\n                return (0,_firebase_firestore__WEBPACK_IMPORTED_MODULE_1__.setDoc)(this._delegate, value);\r\n            }\r\n        }\r\n        catch (e) {\r\n            throw replaceFunctionName(e, 'setDoc()', 'DocumentReference.set()');\r\n        }\r\n    }\r\n    update(fieldOrUpdateData, value, ...moreFieldsAndValues) {\r\n        try {\r\n            if (arguments.length === 1) {\r\n                return (0,_firebase_firestore__WEBPACK_IMPORTED_MODULE_1__.updateDoc)(this._delegate, fieldOrUpdateData);\r\n            }\r\n            else {\r\n                return (0,_firebase_firestore__WEBPACK_IMPORTED_MODULE_1__.updateDoc)(this._delegate, fieldOrUpdateData, value, ...moreFieldsAndValues);\r\n            }\r\n        }\r\n        catch (e) {\r\n            throw replaceFunctionName(e, 'updateDoc()', 'DocumentReference.update()');\r\n        }\r\n    }\r\n    delete() {\r\n        return (0,_firebase_firestore__WEBPACK_IMPORTED_MODULE_1__.deleteDoc)(this._delegate);\r\n    }\r\n    onSnapshot(...args) {\r\n        const options = extractSnapshotOptions(args);\r\n        const observer = wrapObserver(args, result => new DocumentSnapshot(this.firestore, new _firebase_firestore__WEBPACK_IMPORTED_MODULE_1__.DocumentSnapshot(this.firestore._delegate, this._userDataWriter, result._key, result._document, result.metadata, this._delegate.converter)));\r\n        return (0,_firebase_firestore__WEBPACK_IMPORTED_MODULE_1__.onSnapshot)(this._delegate, options, observer);\r\n    }\r\n    get(options) {\r\n        let snap;\r\n        if ((options === null || options === void 0 ? void 0 : options.source) === 'cache') {\r\n            snap = (0,_firebase_firestore__WEBPACK_IMPORTED_MODULE_1__.getDocFromCache)(this._delegate);\r\n        }\r\n        else if ((options === null || options === void 0 ? void 0 : options.source) === 'server') {\r\n            snap = (0,_firebase_firestore__WEBPACK_IMPORTED_MODULE_1__.getDocFromServer)(this._delegate);\r\n        }\r\n        else {\r\n            snap = (0,_firebase_firestore__WEBPACK_IMPORTED_MODULE_1__.getDoc)(this._delegate);\r\n        }\r\n        return snap.then(result => new DocumentSnapshot(this.firestore, new _firebase_firestore__WEBPACK_IMPORTED_MODULE_1__.DocumentSnapshot(this.firestore._delegate, this._userDataWriter, result._key, result._document, result.metadata, this._delegate.converter)));\r\n    }\r\n    withConverter(converter) {\r\n        return new DocumentReference(this.firestore, converter\r\n            ? this._delegate.withConverter(FirestoreDataConverter.getInstance(this.firestore, converter))\r\n            : this._delegate.withConverter(null));\r\n    }\r\n}\r\n/**\r\n * Replaces the function name in an error thrown by the firestore-exp API\r\n * with the function names used in the classic API.\r\n */\r\nfunction replaceFunctionName(e, original, updated) {\r\n    e.message = e.message.replace(original, updated);\r\n    return e;\r\n}\r\n/**\r\n * Iterates the list of arguments from an `onSnapshot` call and returns the\r\n * first argument that may be an `SnapshotListenOptions` object. Returns an\r\n * empty object if none is found.\r\n */\r\nfunction extractSnapshotOptions(args) {\r\n    for (const arg of args) {\r\n        if (typeof arg === 'object' && !isPartialObserver(arg)) {\r\n            return arg;\r\n        }\r\n    }\r\n    return {};\r\n}\r\n/**\r\n * Creates an observer that can be passed to the firestore-exp SDK. The\r\n * observer converts all observed values into the format expected by the classic\r\n * SDK.\r\n *\r\n * @param args - The list of arguments from an `onSnapshot` call.\r\n * @param wrapper - The function that converts the firestore-exp type into the\r\n * type used by this shim.\r\n */\r\nfunction wrapObserver(args, wrapper) {\r\n    var _a, _b;\r\n    let userObserver;\r\n    if (isPartialObserver(args[0])) {\r\n        userObserver = args[0];\r\n    }\r\n    else if (isPartialObserver(args[1])) {\r\n        userObserver = args[1];\r\n    }\r\n    else if (typeof args[0] === 'function') {\r\n        userObserver = {\r\n            next: args[0],\r\n            error: args[1],\r\n            complete: args[2]\r\n        };\r\n    }\r\n    else {\r\n        userObserver = {\r\n            next: args[1],\r\n            error: args[2],\r\n            complete: args[3]\r\n        };\r\n    }\r\n    return {\r\n        next: val => {\r\n            if (userObserver.next) {\r\n                userObserver.next(wrapper(val));\r\n            }\r\n        },\r\n        error: (_a = userObserver.error) === null || _a === void 0 ? void 0 : _a.bind(userObserver),\r\n        complete: (_b = userObserver.complete) === null || _b === void 0 ? void 0 : _b.bind(userObserver)\r\n    };\r\n}\r\nclass DocumentSnapshot {\r\n    constructor(_firestore, _delegate) {\r\n        this._firestore = _firestore;\r\n        this._delegate = _delegate;\r\n    }\r\n    get ref() {\r\n        return new DocumentReference(this._firestore, this._delegate.ref);\r\n    }\r\n    get id() {\r\n        return this._delegate.id;\r\n    }\r\n    get metadata() {\r\n        return this._delegate.metadata;\r\n    }\r\n    get exists() {\r\n        return this._delegate.exists();\r\n    }\r\n    data(options) {\r\n        return this._delegate.data(options);\r\n    }\r\n    get(fieldPath, options\r\n    // We are using `any` here to avoid an explicit cast by our users.\r\n    // eslint-disable-next-line @typescript-eslint/no-explicit-any\r\n    ) {\r\n        return this._delegate.get(fieldPath, options);\r\n    }\r\n    isEqual(other) {\r\n        return (0,_firebase_firestore__WEBPACK_IMPORTED_MODULE_1__.snapshotEqual)(this._delegate, other._delegate);\r\n    }\r\n}\r\nclass QueryDocumentSnapshot extends DocumentSnapshot {\r\n    data(options) {\r\n        const data = this._delegate.data(options);\r\n        (0,_firebase_firestore__WEBPACK_IMPORTED_MODULE_1__._debugAssert)(data !== undefined, 'Document in a QueryDocumentSnapshot should exist');\r\n        return data;\r\n    }\r\n}\r\nclass Query {\r\n    constructor(firestore, _delegate) {\r\n        this.firestore = firestore;\r\n        this._delegate = _delegate;\r\n        this._userDataWriter = new UserDataWriter(firestore);\r\n    }\r\n    where(fieldPath, opStr, value) {\r\n        try {\r\n            // The \"as string\" cast is a little bit of a hack. `where` accepts the\r\n            // FieldPath Compat type as input, but is not typed as such in order to\r\n            // not expose this via our public typings file.\r\n            return new Query(this.firestore, (0,_firebase_firestore__WEBPACK_IMPORTED_MODULE_1__.query)(this._delegate, (0,_firebase_firestore__WEBPACK_IMPORTED_MODULE_1__.where)(fieldPath, opStr, value)));\r\n        }\r\n        catch (e) {\r\n            throw replaceFunctionName(e, /(orderBy|where)\\(\\)/, 'Query.$1()');\r\n        }\r\n    }\r\n    orderBy(fieldPath, directionStr) {\r\n        try {\r\n            // The \"as string\" cast is a little bit of a hack. `orderBy` accepts the\r\n            // FieldPath Compat type as input, but is not typed as such in order to\r\n            // not expose this via our public typings file.\r\n            return new Query(this.firestore, (0,_firebase_firestore__WEBPACK_IMPORTED_MODULE_1__.query)(this._delegate, (0,_firebase_firestore__WEBPACK_IMPORTED_MODULE_1__.orderBy)(fieldPath, directionStr)));\r\n        }\r\n        catch (e) {\r\n            throw replaceFunctionName(e, /(orderBy|where)\\(\\)/, 'Query.$1()');\r\n        }\r\n    }\r\n    limit(n) {\r\n        try {\r\n            return new Query(this.firestore, (0,_firebase_firestore__WEBPACK_IMPORTED_MODULE_1__.query)(this._delegate, (0,_firebase_firestore__WEBPACK_IMPORTED_MODULE_1__.limit)(n)));\r\n        }\r\n        catch (e) {\r\n            throw replaceFunctionName(e, 'limit()', 'Query.limit()');\r\n        }\r\n    }\r\n    limitToLast(n) {\r\n        try {\r\n            return new Query(this.firestore, (0,_firebase_firestore__WEBPACK_IMPORTED_MODULE_1__.query)(this._delegate, (0,_firebase_firestore__WEBPACK_IMPORTED_MODULE_1__.limitToLast)(n)));\r\n        }\r\n        catch (e) {\r\n            throw replaceFunctionName(e, 'limitToLast()', 'Query.limitToLast()');\r\n        }\r\n    }\r\n    startAt(...args) {\r\n        try {\r\n            return new Query(this.firestore, (0,_firebase_firestore__WEBPACK_IMPORTED_MODULE_1__.query)(this._delegate, (0,_firebase_firestore__WEBPACK_IMPORTED_MODULE_1__.startAt)(...args)));\r\n        }\r\n        catch (e) {\r\n            throw replaceFunctionName(e, 'startAt()', 'Query.startAt()');\r\n        }\r\n    }\r\n    startAfter(...args) {\r\n        try {\r\n            return new Query(this.firestore, (0,_firebase_firestore__WEBPACK_IMPORTED_MODULE_1__.query)(this._delegate, (0,_firebase_firestore__WEBPACK_IMPORTED_MODULE_1__.startAfter)(...args)));\r\n        }\r\n        catch (e) {\r\n            throw replaceFunctionName(e, 'startAfter()', 'Query.startAfter()');\r\n        }\r\n    }\r\n    endBefore(...args) {\r\n        try {\r\n            return new Query(this.firestore, (0,_firebase_firestore__WEBPACK_IMPORTED_MODULE_1__.query)(this._delegate, (0,_firebase_firestore__WEBPACK_IMPORTED_MODULE_1__.endBefore)(...args)));\r\n        }\r\n        catch (e) {\r\n            throw replaceFunctionName(e, 'endBefore()', 'Query.endBefore()');\r\n        }\r\n    }\r\n    endAt(...args) {\r\n        try {\r\n            return new Query(this.firestore, (0,_firebase_firestore__WEBPACK_IMPORTED_MODULE_1__.query)(this._delegate, (0,_firebase_firestore__WEBPACK_IMPORTED_MODULE_1__.endAt)(...args)));\r\n        }\r\n        catch (e) {\r\n            throw replaceFunctionName(e, 'endAt()', 'Query.endAt()');\r\n        }\r\n    }\r\n    isEqual(other) {\r\n        return (0,_firebase_firestore__WEBPACK_IMPORTED_MODULE_1__.queryEqual)(this._delegate, other._delegate);\r\n    }\r\n    get(options) {\r\n        let query;\r\n        if ((options === null || options === void 0 ? void 0 : options.source) === 'cache') {\r\n            query = (0,_firebase_firestore__WEBPACK_IMPORTED_MODULE_1__.getDocsFromCache)(this._delegate);\r\n        }\r\n        else if ((options === null || options === void 0 ? void 0 : options.source) === 'server') {\r\n            query = (0,_firebase_firestore__WEBPACK_IMPORTED_MODULE_1__.getDocsFromServer)(this._delegate);\r\n        }\r\n        else {\r\n            query = (0,_firebase_firestore__WEBPACK_IMPORTED_MODULE_1__.getDocs)(this._delegate);\r\n        }\r\n        return query.then(result => new QuerySnapshot(this.firestore, new _firebase_firestore__WEBPACK_IMPORTED_MODULE_1__.QuerySnapshot(this.firestore._delegate, this._userDataWriter, this._delegate, result._snapshot)));\r\n    }\r\n    onSnapshot(...args) {\r\n        const options = extractSnapshotOptions(args);\r\n        const observer = wrapObserver(args, snap => new QuerySnapshot(this.firestore, new _firebase_firestore__WEBPACK_IMPORTED_MODULE_1__.QuerySnapshot(this.firestore._delegate, this._userDataWriter, this._delegate, snap._snapshot)));\r\n        return (0,_firebase_firestore__WEBPACK_IMPORTED_MODULE_1__.onSnapshot)(this._delegate, options, observer);\r\n    }\r\n    withConverter(converter) {\r\n        return new Query(this.firestore, converter\r\n            ? this._delegate.withConverter(FirestoreDataConverter.getInstance(this.firestore, converter))\r\n            : this._delegate.withConverter(null));\r\n    }\r\n}\r\nclass DocumentChange {\r\n    constructor(_firestore, _delegate) {\r\n        this._firestore = _firestore;\r\n        this._delegate = _delegate;\r\n    }\r\n    get type() {\r\n        return this._delegate.type;\r\n    }\r\n    get doc() {\r\n        return new QueryDocumentSnapshot(this._firestore, this._delegate.doc);\r\n    }\r\n    get oldIndex() {\r\n        return this._delegate.oldIndex;\r\n    }\r\n    get newIndex() {\r\n        return this._delegate.newIndex;\r\n    }\r\n}\r\nclass QuerySnapshot {\r\n    constructor(_firestore, _delegate) {\r\n        this._firestore = _firestore;\r\n        this._delegate = _delegate;\r\n    }\r\n    get query() {\r\n        return new Query(this._firestore, this._delegate.query);\r\n    }\r\n    get metadata() {\r\n        return this._delegate.metadata;\r\n    }\r\n    get size() {\r\n        return this._delegate.size;\r\n    }\r\n    get empty() {\r\n        return this._delegate.empty;\r\n    }\r\n    get docs() {\r\n        return this._delegate.docs.map(doc => new QueryDocumentSnapshot(this._firestore, doc));\r\n    }\r\n    docChanges(options) {\r\n        return this._delegate\r\n            .docChanges(options)\r\n            .map(docChange => new DocumentChange(this._firestore, docChange));\r\n    }\r\n    forEach(callback, thisArg) {\r\n        this._delegate.forEach(snapshot => {\r\n            callback.call(thisArg, new QueryDocumentSnapshot(this._firestore, snapshot));\r\n        });\r\n    }\r\n    isEqual(other) {\r\n        return (0,_firebase_firestore__WEBPACK_IMPORTED_MODULE_1__.snapshotEqual)(this._delegate, other._delegate);\r\n    }\r\n}\r\nclass CollectionReference extends Query {\r\n    constructor(firestore, _delegate) {\r\n        super(firestore, _delegate);\r\n        this.firestore = firestore;\r\n        this._delegate = _delegate;\r\n    }\r\n    get id() {\r\n        return this._delegate.id;\r\n    }\r\n    get path() {\r\n        return this._delegate.path;\r\n    }\r\n    get parent() {\r\n        const docRef = this._delegate.parent;\r\n        return docRef ? new DocumentReference(this.firestore, docRef) : null;\r\n    }\r\n    doc(documentPath) {\r\n        try {\r\n            if (documentPath === undefined) {\r\n                // Call `doc` without `documentPath` if `documentPath` is `undefined`\r\n                // as `doc` validates the number of arguments to prevent users from\r\n                // accidentally passing `undefined`.\r\n                return new DocumentReference(this.firestore, (0,_firebase_firestore__WEBPACK_IMPORTED_MODULE_1__.doc)(this._delegate));\r\n            }\r\n            else {\r\n                return new DocumentReference(this.firestore, (0,_firebase_firestore__WEBPACK_IMPORTED_MODULE_1__.doc)(this._delegate, documentPath));\r\n            }\r\n        }\r\n        catch (e) {\r\n            throw replaceFunctionName(e, 'doc()', 'CollectionReference.doc()');\r\n        }\r\n    }\r\n    add(data) {\r\n        return (0,_firebase_firestore__WEBPACK_IMPORTED_MODULE_1__.addDoc)(this._delegate, data).then(docRef => new DocumentReference(this.firestore, docRef));\r\n    }\r\n    isEqual(other) {\r\n        return (0,_firebase_firestore__WEBPACK_IMPORTED_MODULE_1__.refEqual)(this._delegate, other._delegate);\r\n    }\r\n    withConverter(converter) {\r\n        return new CollectionReference(this.firestore, converter\r\n            ? this._delegate.withConverter(FirestoreDataConverter.getInstance(this.firestore, converter))\r\n            : this._delegate.withConverter(null));\r\n    }\r\n}\r\nfunction castReference(documentRef) {\r\n    return (0,_firebase_firestore__WEBPACK_IMPORTED_MODULE_1__._cast)(documentRef, _firebase_firestore__WEBPACK_IMPORTED_MODULE_1__.DocumentReference);\r\n}\n\n/**\r\n * @license\r\n * Copyright 2017 Google LLC\r\n *\r\n * Licensed under the Apache License, Version 2.0 (the \"License\");\r\n * you may not use this file except in compliance with the License.\r\n * You may obtain a copy of the License at\r\n *\r\n *   http://www.apache.org/licenses/LICENSE-2.0\r\n *\r\n * Unless required by applicable law or agreed to in writing, software\r\n * distributed under the License is distributed on an \"AS IS\" BASIS,\r\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\r\n * See the License for the specific language governing permissions and\r\n * limitations under the License.\r\n */\r\n// The objects that are a part of this API are exposed to third-parties as\r\n// compiled javascript so we want to flag our private members with a leading\r\n// underscore to discourage their use.\r\n/**\r\n * A `FieldPath` refers to a field in a document. The path may consist of a\r\n * single field name (referring to a top-level field in the document), or a list\r\n * of field names (referring to a nested field in the document).\r\n */\r\nclass FieldPath {\r\n    /**\r\n     * Creates a FieldPath from the provided field names. If more than one field\r\n     * name is provided, the path will point to a nested field in a document.\r\n     *\r\n     * @param fieldNames - A list of field names.\r\n     */\r\n    constructor(...fieldNames) {\r\n        this._delegate = new _firebase_firestore__WEBPACK_IMPORTED_MODULE_1__.FieldPath(...fieldNames);\r\n    }\r\n    static documentId() {\r\n        /**\r\n         * Internal Note: The backend doesn't technically support querying by\r\n         * document ID. Instead it queries by the entire document name (full path\r\n         * included), but in the cases we currently support documentId(), the net\r\n         * effect is the same.\r\n         */\r\n        return new FieldPath(_firebase_firestore__WEBPACK_IMPORTED_MODULE_1__._FieldPath.keyField().canonicalString());\r\n    }\r\n    isEqual(other) {\r\n        other = (0,_firebase_util__WEBPACK_IMPORTED_MODULE_2__.getModularInstance)(other);\r\n        if (!(other instanceof _firebase_firestore__WEBPACK_IMPORTED_MODULE_1__.FieldPath)) {\r\n            return false;\r\n        }\r\n        return this._delegate._internalPath.isEqual(other._internalPath);\r\n    }\r\n}\n\n/**\r\n * @license\r\n * Copyright 2017 Google LLC\r\n *\r\n * Licensed under the Apache License, Version 2.0 (the \"License\");\r\n * you may not use this file except in compliance with the License.\r\n * You may obtain a copy of the License at\r\n *\r\n *   http://www.apache.org/licenses/LICENSE-2.0\r\n *\r\n * Unless required by applicable law or agreed to in writing, software\r\n * distributed under the License is distributed on an \"AS IS\" BASIS,\r\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\r\n * See the License for the specific language governing permissions and\r\n * limitations under the License.\r\n */\r\nclass FieldValue {\r\n    constructor(_delegate) {\r\n        this._delegate = _delegate;\r\n    }\r\n    static serverTimestamp() {\r\n        const delegate = (0,_firebase_firestore__WEBPACK_IMPORTED_MODULE_1__.serverTimestamp)();\r\n        delegate._methodName = 'FieldValue.serverTimestamp';\r\n        return new FieldValue(delegate);\r\n    }\r\n    static delete() {\r\n        const delegate = (0,_firebase_firestore__WEBPACK_IMPORTED_MODULE_1__.deleteField)();\r\n        delegate._methodName = 'FieldValue.delete';\r\n        return new FieldValue(delegate);\r\n    }\r\n    static arrayUnion(...elements) {\r\n        const delegate = (0,_firebase_firestore__WEBPACK_IMPORTED_MODULE_1__.arrayUnion)(...elements);\r\n        delegate._methodName = 'FieldValue.arrayUnion';\r\n        return new FieldValue(delegate);\r\n    }\r\n    static arrayRemove(...elements) {\r\n        const delegate = (0,_firebase_firestore__WEBPACK_IMPORTED_MODULE_1__.arrayRemove)(...elements);\r\n        delegate._methodName = 'FieldValue.arrayRemove';\r\n        return new FieldValue(delegate);\r\n    }\r\n    static increment(n) {\r\n        const delegate = (0,_firebase_firestore__WEBPACK_IMPORTED_MODULE_1__.increment)(n);\r\n        delegate._methodName = 'FieldValue.increment';\r\n        return new FieldValue(delegate);\r\n    }\r\n    isEqual(other) {\r\n        return this._delegate.isEqual(other._delegate);\r\n    }\r\n}\n\n/**\r\n * @license\r\n * Copyright 2021 Google LLC\r\n *\r\n * Licensed under the Apache License, Version 2.0 (the \"License\");\r\n * you may not use this file except in compliance with the License.\r\n * You may obtain a copy of the License at\r\n *\r\n *   http://www.apache.org/licenses/LICENSE-2.0\r\n *\r\n * Unless required by applicable law or agreed to in writing, software\r\n * distributed under the License is distributed on an \"AS IS\" BASIS,\r\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\r\n * See the License for the specific language governing permissions and\r\n * limitations under the License.\r\n */\r\nconst firestoreNamespace = {\r\n    Firestore,\r\n    GeoPoint: _firebase_firestore__WEBPACK_IMPORTED_MODULE_1__.GeoPoint,\r\n    Timestamp: _firebase_firestore__WEBPACK_IMPORTED_MODULE_1__.Timestamp,\r\n    Blob,\r\n    Transaction,\r\n    WriteBatch,\r\n    DocumentReference,\r\n    DocumentSnapshot,\r\n    Query,\r\n    QueryDocumentSnapshot,\r\n    QuerySnapshot,\r\n    CollectionReference,\r\n    FieldPath,\r\n    FieldValue,\r\n    setLogLevel,\r\n    CACHE_SIZE_UNLIMITED: _firebase_firestore__WEBPACK_IMPORTED_MODULE_1__.CACHE_SIZE_UNLIMITED\r\n};\r\n/**\r\n * Configures Firestore as part of the Firebase SDK by calling registerComponent.\r\n *\r\n * @param firebase - The FirebaseNamespace to register Firestore with\r\n * @param firestoreFactory - A factory function that returns a new Firestore\r\n *    instance.\r\n */\r\nfunction configureForFirebase(firebase, firestoreFactory) {\r\n    firebase.INTERNAL.registerComponent(new _firebase_component__WEBPACK_IMPORTED_MODULE_3__.Component('firestore-compat', container => {\r\n        const app = container.getProvider('app-compat').getImmediate();\r\n        const firestoreExp = container.getProvider('firestore').getImmediate();\r\n        return firestoreFactory(app, firestoreExp);\r\n    }, 'PUBLIC').setServiceProps(Object.assign({}, firestoreNamespace)));\r\n}\n\n/**\r\n * @license\r\n * Copyright 2020 Google LLC\r\n *\r\n * Licensed under the Apache License, Version 2.0 (the \"License\");\r\n * you may not use this file except in compliance with the License.\r\n * You may obtain a copy of the License at\r\n *\r\n *   http://www.apache.org/licenses/LICENSE-2.0\r\n *\r\n * Unless required by applicable law or agreed to in writing, software\r\n * distributed under the License is distributed on an \"AS IS\" BASIS,\r\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\r\n * See the License for the specific language governing permissions and\r\n * limitations under the License.\r\n */\r\n/**\r\n * Registers the main Firestore build with the components framework.\r\n * Persistence can be enabled via `firebase.firestore().enablePersistence()`.\r\n */\r\nfunction registerFirestore(instance) {\r\n    configureForFirebase(instance, (app, firestoreExp) => new Firestore(app, firestoreExp, new IndexedDbPersistenceProvider()));\r\n    instance.registerVersion(name, version);\r\n}\r\nregisterFirestore(_firebase_app_compat__WEBPACK_IMPORTED_MODULE_0__[\"default\"]);\n\n\n//# sourceMappingURL=index.esm2017.js.map\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiLi9ub2RlX21vZHVsZXMvQGZpcmViYXNlL2ZpcmVzdG9yZS1jb21wYXQvZGlzdC9pbmRleC5lc20yMDE3LmpzLmpzIiwibWFwcGluZ3MiOiI7Ozs7Ozs7O0FBQTRDO0FBQ3VqQztBQUMvaUM7QUFDSjs7QUFFaEQ7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0Esa0JBQWtCLCtEQUFjLDJEQUEyRCxXQUFXO0FBQ3RHO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0Esa0JBQWtCLCtEQUFjO0FBQ2hDO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsU0FBUyx1RUFBa0I7QUFDM0Isa0JBQWtCLCtEQUFjO0FBQ2hDO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLHdCQUF3Qix1RUFBc0I7QUFDOUM7QUFDQTtBQUNBO0FBQ0Esd0JBQXdCLHFFQUFvQjtBQUM1QztBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFD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S0FBSyw0Q0FBNEM7QUFDakQ7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0Esa0JBQWtCLDREQUFROztBQUVHO0FBQzdCIiwic291cmNlcyI6WyJ3ZWJwYWNrOi8vX05fRS8uL25vZGVfbW9kdWxlcy9AZmlyZWJhc2UvZmlyZXN0b3JlLWNvbXBhdC9kaXN0L2luZGV4LmVzbTIwMTcuanM/OGY4NSJdLCJzb3VyY2VzQ29udGVudCI6WyJpbXBvcnQgZmlyZWJhc2UgZnJvbSAnQGZpcmViYXNlL2FwcC1jb21wYXQnO1xuaW1wb3J0IHsgRmlyZXN0b3JlRXJyb3IsIEJ5dGVzLCBfaXNCYXNlNjRBdmFpbGFibGUsIGVuYWJsZUluZGV4ZWREYlBlcnNpc3RlbmNlLCBlbmFibGVNdWx0aVRhYkluZGV4ZWREYlBlcnNpc3RlbmNlLCBjbGVhckluZGV4ZWREYlBlcnNpc3RlbmNlLCBfRGF0YWJhc2VJZCwgX2xvZ1dhcm4sIGNvbm5lY3RGaXJlc3RvcmVFbXVsYXRvciwgZW5hYmxlTmV0d29yaywgZGlzYWJsZU5ldHdvcmssIF92YWxpZGF0ZUlzTm90VXNlZFRvZ2V0aGVyLCB3YWl0Rm9yUGVuZGluZ1dyaXRlcywgb25TbmFwc2hvdHNJblN5bmMsIGNvbGxlY3Rpb24sIGRvYywgY29sbGVjdGlvbkdyb3VwLCBydW5UcmFuc2FjdGlvbiwgZW5zdXJlRmlyZXN0b3JlQ29uZmlndXJlZCwgV3JpdGVCYXRjaCBhcyBXcml0ZUJhdGNoJDEsIGV4ZWN1dGVXcml0ZSwgbG9hZEJ1bmRsZSwgbmFtZWRRdWVyeSwgX2Nhc3QsIERvY3VtZW50UmVmZXJlbmNlIGFzIERvY3VtZW50UmVmZXJlbmNlJDEsIERvY3VtZW50U25hcHNob3QgYXMgRG9jdW1lbnRTbmFwc2hvdCQxLCBfRG9jdW1lbnRLZXksIHJlZkVxdWFsLCBzZXREb2MsIHVwZGF0ZURvYywgZGVsZXRlRG9jLCBvblNuYXBzaG90LCBnZXREb2NGcm9tQ2FjaGUsIGdldERvY0Zyb21TZXJ2ZXIsIGdldERvYywgc25hcHNob3RFcXVhbCwgcXVlcnksIHdoZXJlLCBvcmRlckJ5LCBsaW1pdCwgbGltaXRUb0xhc3QsIHN0YXJ0QXQsIHN0YXJ0QWZ0ZXIsIGVuZEJlZm9yZSwgZW5kQXQsIHF1ZXJ5RXF1YWwsIGdldERvY3NGcm9tQ2FjaGUsIGdldERvY3NGcm9tU2VydmVyLCBnZXREb2NzLCBRdWVyeVNuYXBzaG90IGFzIFF1ZXJ5U25hcHNob3QkMSwgYWRkRG9jLCBBYnN0cmFjdFVzZXJEYXRhV3JpdGVyLCBzZXRMb2dMZXZlbCBhcyBzZXRMb2dMZXZlbCQxLCBRdWVyeURvY3VtZW50U25hcHNob3QgYXMgUXVlcnlEb2N1bWVudFNuYXBzaG90JDEsIF9kZWJ1Z0Fzc2VydCwgRmllbGRQYXRoIGFzIEZpZWxkUGF0aCQxLCBfRmllbGRQYXRoLCBzZXJ2ZXJUaW1lc3RhbXAsIGRlbGV0ZUZpZWxkLCBhcnJheVVuaW9uLCBhcnJheVJlbW92ZSwgaW5jcmVtZW50LCBHZW9Qb2ludCwgVGltZXN0YW1wLCBDQUNIRV9TSVpFX1VOTElNSVRFRCB9IGZyb20gJ0BmaXJlYmFzZS9maXJlc3RvcmUnO1xuaW1wb3J0IHsgZ2V0TW9kdWxhckluc3RhbmNlIH0gZnJvbSAnQGZpcmViYXNlL3V0aWwnO1xuaW1wb3J0IHsgQ29tcG9uZW50IH0gZnJvbSAnQGZpcmViYXNlL2NvbXBvbmVudCc7XG5cbmNvbnN0IG5hbWUgPSBcIkBmaXJlYmFzZS9maXJlc3RvcmUtY29tcGF0XCI7XG5jb25zdCB2ZXJzaW9uID0gXCIwLjEuMTlcIjtcblxuLyoqXHJcbiAqIEBsaWNlbnNlXHJcbiAqIENvcHlyaWdodCAyMDIxIEdvb2dsZSBMTENcclxuICpcclxuICogTGljZW5zZWQgdW5kZXIgdGhlIEFwYWNoZSBMaWNlbnNlLCBWZXJzaW9uIDIuMCAodGhlIFwiTGljZW5zZVwiKTtcclxuICogeW91IG1heSBub3QgdXNlIHRoaXMgZmlsZSBleGNlcHQgaW4gY29tcGxpYW5jZSB3aXRoIHRoZSBMaWNlbnNlLlxyXG4gKiBZb3UgbWF5IG9idGFpbiBhIGNvcHkgb2YgdGhlIExpY2Vuc2UgYXRcclxuICpcclxuICogICBodHRwOi8vd3d3LmFwYWNoZS5vcmcvbGljZW5zZXMvTElDRU5TRS0yLjBcclxuICpcclxuICogVW5sZXNzIHJlcXVpcmVkIGJ5IGFwcGxpY2FibGUgbGF3IG9yIGFncmVlZCB0byBpbiB3cml0aW5nLCBzb2Z0d2FyZVxyXG4gKiBkaXN0cmlidXRlZCB1bmRlciB0aGUgTGljZW5zZSBpcyBkaXN0cmlidXRlZCBvbiBhbiBcIkFTIElTXCIgQkFTSVMsXHJcbiAqIFdJVEhPVVQgV0FSUkFOVElFUyBPUiBDT05ESVRJT05TIE9GIEFOWSBLSU5ELCBlaXRoZXIgZXhwcmVzcyBvciBpbXBsaWVkLlxyXG4gKiBTZWUgdGhlIExpY2Vuc2UgZm9yIHRoZSBzcGVjaWZpYyBsYW5ndWFnZSBnb3Zlcm5pbmcgcGVybWlzc2lvbnMgYW5kXHJcbiAqIGxpbWl0YXRpb25zIHVuZGVyIHRoZSBMaWNlbnNlLlxyXG4gKi9cclxuZnVuY3Rpb24gdmFsaWRhdGVTZXRPcHRpb25zKG1ldGhvZE5hbWUsIG9wdGlvbnMpIHtcclxuICAgIGlmIChvcHRpb25zID09PSB1bmRlZmluZWQpIHtcclxuICAgICAgICByZXR1cm4ge1xyXG4gICAgICAgICAgICBtZXJnZTogZmFsc2VcclxuICAgICAgICB9O1xyXG4gICAgfVxyXG4gICAgaWYgKG9wdGlvbnMubWVyZ2VGaWVsZHMgIT09IHVuZGVmaW5lZCAmJiBvcHRpb25zLm1lcmdlICE9PSB1bmRlZmluZWQpIHtcclxuICAgICAgICB0aHJvdyBuZXcgRmlyZXN0b3JlRXJyb3IoJ2ludmFsaWQtYXJndW1lbnQnLCBgSW52YWxpZCBvcHRpb25zIHBhc3NlZCB0byBmdW5jdGlvbiAke21ldGhvZE5hbWV9KCk6IFlvdSBjYW5ub3QgYCArXHJcbiAgICAgICAgICAgICdzcGVjaWZ5IGJvdGggXCJtZXJnZVwiIGFuZCBcIm1lcmdlRmllbGRzXCIuJyk7XHJcbiAgICB9XHJcbiAgICByZXR1cm4gb3B0aW9ucztcclxufVxuXG4vKipcclxuICogQGxpY2Vuc2VcclxuICogQ29weXJpZ2h0IDIwMTcgR29vZ2xlIExMQ1xyXG4gKlxyXG4gKiBMaWNlbnNlZCB1bmRlciB0aGUgQXBhY2hlIExpY2Vuc2UsIFZlcnNpb24gMi4wICh0aGUgXCJMaWNlbnNlXCIpO1xyXG4gKiB5b3UgbWF5IG5vdCB1c2UgdGhpcyBmaWxlIGV4Y2VwdCBpbiBjb21wbGlhbmNlIHdpdGggdGhlIExpY2Vuc2UuXHJcbiAqIFlvdSBtYXkgb2J0YWluIGEgY29weSBvZiB0aGUgTGljZW5zZSBhdFxyXG4gKlxyXG4gKiAgIGh0dHA6Ly93d3cuYXBhY2hlLm9yZy9saWNlbnNlcy9MSUNFTlNFLTIuMFxyXG4gKlxyXG4gKiBVbmxlc3MgcmVxdWlyZWQgYnkgYXBwbGljYWJsZSBsYXcgb3IgYWdyZWVkIHRvIGluIHdyaXRpbmcsIHNvZnR3YXJlXHJcbiAqIGRpc3RyaWJ1dGVkIHVuZGVyIHRoZSBMaWNlbnNlIGlzIGRpc3RyaWJ1dGVkIG9uIGFuIFwiQVMgSVNcIiBCQVNJUyxcclxuICogV0lUSE9VVCBXQVJSQU5USUVTIE9SIENPTkRJVElPTlMgT0YgQU5ZIEtJTkQsIGVpdGhlciBleHByZXNzIG9yIGltcGxpZWQuXHJcbiAqIFNlZSB0aGUgTGljZW5zZSBmb3IgdGhlIHNwZWNpZmljIGxhbmd1YWdlIGdvdmVybmluZyBwZXJtaXNzaW9ucyBhbmRcclxuICogbGltaXRhdGlvbnMgdW5kZXIgdGhlIExpY2Vuc2UuXHJcbiAqL1xyXG4vKiogSGVscGVyIGZ1bmN0aW9uIHRvIGFzc2VydCBVaW50OEFycmF5IGlzIGF2YWlsYWJsZSBhdCBydW50aW1lLiAqL1xyXG5mdW5jdGlvbiBhc3NlcnRVaW50OEFycmF5QXZhaWxhYmxlKCkge1xyXG4gICAgaWYgKHR5cGVvZiBVaW50OEFycmF5ID09PSAndW5kZWZpbmVkJykge1xyXG4gICAgICAgIHRocm93IG5ldyBGaXJlc3RvcmVFcnJvcigndW5pbXBsZW1lbnRlZCcsICdVaW50OEFycmF5cyBhcmUgbm90IGF2YWlsYWJsZSBpbiB0aGlzIGVudmlyb25tZW50LicpO1xyXG4gICAgfVxyXG59XHJcbi8qKiBIZWxwZXIgZnVuY3Rpb24gdG8gYXNzZXJ0IEJhc2U2NCBmdW5jdGlvbnMgYXJlIGF2YWlsYWJsZSBhdCBydW50aW1lLiAqL1xyXG5mdW5jdGlvbiBhc3NlcnRCYXNlNjRBdmFpbGFibGUoKSB7XHJcbiAgICBpZiAoIV9pc0Jhc2U2NEF2YWlsYWJsZSgpKSB7XHJcbiAgICAgICAgdGhyb3cgbmV3IEZpcmVzdG9yZUVycm9yKCd1bmltcGxlbWVudGVkJywgJ0Jsb2JzIGFyZSB1bmF2YWlsYWJsZSBpbiBGaXJlc3RvcmUgaW4gdGhpcyBlbnZpcm9ubWVudC4nKTtcclxuICAgIH1cclxufVxyXG4vKiogSW1tdXRhYmxlIGNsYXNzIGhvbGRpbmcgYSBibG9iIChiaW5hcnkgZGF0YSkgKi9cclxuY2xhc3MgQmxvYiB7XHJcbiAgICBjb25zdHJ1Y3RvcihfZGVsZWdhdGUpIHtcclxuICAgICAgICB0aGlzLl9kZWxlZ2F0ZSA9IF9kZWxlZ2F0ZTtcclxuICAgIH1cclxuICAgIHN0YXRpYyBmcm9tQmFzZTY0U3RyaW5nKGJhc2U2NCkge1xyXG4gICAgICAgIGFzc2VydEJhc2U2NEF2YWlsYWJsZSgpO1xyXG4gICAgICAgIHJldHVybiBuZXcgQmxvYihCeXRlcy5mcm9tQmFzZTY0U3RyaW5nKGJhc2U2NCkpO1xyXG4gICAgfVxyXG4gICAgc3RhdGljIGZyb21VaW50OEFycmF5KGFycmF5KSB7XHJcbiAgICAgICAgYXNzZXJ0VWludDhBcnJheUF2YWlsYWJsZSgpO1xyXG4gICAgICAgIHJldHVybiBuZXcgQmxvYihCeXRlcy5mcm9tVWludDhBcnJheShhcnJheSkpO1xyXG4gICAgfVxyXG4gICAgdG9CYXNlNjQoKSB7XHJcbiAgICAgICAgYXNzZXJ0QmFzZTY0QXZhaWxhYmxlKCk7XHJcbiAgICAgICAgcmV0dXJuIHRoaXMuX2RlbGVnYXRlLnRvQmFzZTY0KCk7XHJcbiAgICB9XHJcbiAgICB0b1VpbnQ4QXJyYXkoKSB7XHJcbiAgICAgICAgYXNzZXJ0VWludDhBcnJheUF2YWlsYWJsZSgpO1xyXG4gICAgICAgIHJldHVybiB0aGlzLl9kZWxlZ2F0ZS50b1VpbnQ4QXJyYXkoKTtcclxuICAgIH1cclxuICAgIGlzRXF1YWwob3RoZXIpIHtcclxuICAgICAgICByZXR1cm4gdGhpcy5fZGVsZWdhdGUuaXNFcXVhbChvdGhlci5fZGVsZWdhdGUpO1xyXG4gICAgfVxyXG4gICAgdG9TdHJpbmcoKSB7XHJcbiAgICAgICAgcmV0dXJuICdCbG9iKGJhc2U2NDogJyArIHRoaXMudG9CYXNlNjQoKSArICcpJztcclxuICAgIH1cclxufVxuXG4vKipcclxuICogQGxpY2Vuc2VcclxuICogQ29weXJpZ2h0IDIwMTcgR29vZ2xlIExMQ1xyXG4gKlxyXG4gKiBMaWNlbnNlZCB1bmRlciB0aGUgQXBhY2hlIExpY2Vuc2UsIFZlcnNpb24gMi4wICh0aGUgXCJMaWNlbnNlXCIpO1xyXG4gKiB5b3UgbWF5IG5vdCB1c2UgdGhpcyBmaWxlIGV4Y2VwdCBpbiBjb21wbGlhbmNlIHdpdGggdGhlIExpY2Vuc2UuXHJcbiAqIFlvdSBtYXkgb2J0YWluIGEgY29weSBvZiB0aGUgTGljZW5zZSBhdFxyXG4gKlxyXG4gKiAgIGh0dHA6Ly93d3cuYXBhY2hlLm9yZy9saWNlbnNlcy9MSUNFTlNFLTIuMFxyXG4gKlxyXG4gKiBVbmxlc3MgcmVxdWlyZWQgYnkgYXBwbGljYWJsZSBsYXcgb3IgYWdyZWVkIHRvIGluIHdyaXRpbmcsIHNvZnR3YXJlXHJcbiAqIGRpc3RyaWJ1dGVkIHVuZGVyIHRoZSBMaWNlbnNlIGlzIGRpc3RyaWJ1dGVkIG9uIGFuIFwiQVMgSVNcIiBCQVNJUyxcclxuICogV0lUSE9VVCBXQVJSQU5USUVTIE9SIENPTkRJVElPTlMgT0YgQU5ZIEtJTkQsIGVpdGhlciBleHByZXNzIG9yIGltcGxpZWQuXHJcbiAqIFNlZSB0aGUgTGljZW5zZSBmb3IgdGhlIHNwZWNpZmljIGxhbmd1YWdlIGdvdmVybmluZyBwZXJtaXNzaW9ucyBhbmRcclxuICogbGltaXRhdGlvbnMgdW5kZXIgdGhlIExpY2Vuc2UuXHJcbiAqL1xyXG5mdW5jdGlvbiBpc1BhcnRpYWxPYnNlcnZlcihvYmopIHtcclxuICAgIHJldHVybiBpbXBsZW1lbnRzQW55TWV0aG9kcyhvYmosIFsnbmV4dCcsICdlcnJvcicsICdjb21wbGV0ZSddKTtcclxufVxyXG4vKipcclxuICogUmV0dXJucyB0cnVlIGlmIG9iaiBpcyBhbiBvYmplY3QgYW5kIGNvbnRhaW5zIGF0IGxlYXN0IG9uZSBvZiB0aGUgc3BlY2lmaWVkXHJcbiAqIG1ldGhvZHMuXHJcbiAqL1xyXG5mdW5jdGlvbiBpbXBsZW1lbnRzQW55TWV0aG9kcyhvYmosIG1ldGhvZHMpIHtcclxuICAgIGlmICh0eXBlb2Ygb2JqICE9PSAnb2JqZWN0JyB8fCBvYmogPT09IG51bGwpIHtcclxuICAgICAgICByZXR1cm4gZmFsc2U7XHJcbiAgICB9XHJcbiAgICBjb25zdCBvYmplY3QgPSBvYmo7XHJcbiAgICBmb3IgKGNvbnN0IG1ldGhvZCBvZiBtZXRob2RzKSB7XHJcbiAgICAgICAgaWYgKG1ldGhvZCBpbiBvYmplY3QgJiYgdHlwZW9mIG9iamVjdFttZXRob2RdID09PSAnZnVuY3Rpb24nKSB7XHJcbiAgICAgICAgICAgIHJldHVybiB0cnVlO1xyXG4gICAgICAgIH1cclxuICAgIH1cclxuICAgIHJldHVybiBmYWxzZTtcclxufVxuXG4vKipcclxuICogQGxpY2Vuc2VcclxuICogQ29weXJpZ2h0IDIwMTcgR29vZ2xlIExMQ1xyXG4gKlxyXG4gKiBMaWNlbnNlZCB1bmRlciB0aGUgQXBhY2hlIExpY2Vuc2UsIFZlcnNpb24gMi4wICh0aGUgXCJMaWNlbnNlXCIpO1xyXG4gKiB5b3UgbWF5IG5vdCB1c2UgdGhpcyBmaWxlIGV4Y2VwdCBpbiBjb21wbGlhbmNlIHdpdGggdGhlIExpY2Vuc2UuXHJcbiAqIFlvdSBtYXkgb2J0YWluIGEgY29weSBvZiB0aGUgTGljZW5zZSBhdFxyXG4gKlxyXG4gKiAgIGh0dHA6Ly93d3cuYXBhY2hlLm9yZy9saWNlbnNlcy9MSUNFTlNFLTIuMFxyXG4gKlxyXG4gKiBVbmxlc3MgcmVxdWlyZWQgYnkgYXBwbGljYWJsZSBsYXcgb3IgYWdyZWVkIHRvIGluIHdyaXRpbmcsIHNvZnR3YXJlXHJcbiAqIGRpc3RyaWJ1dGVkIHVuZGVyIHRoZSBMaWNlbnNlIGlzIGRpc3RyaWJ1dGVkIG9uIGFuIFwiQVMgSVNcIiBCQVNJUyxcclxuICogV0lUSE9VVCBXQVJSQU5USUVTIE9SIENPTkRJVElPTlMgT0YgQU5ZIEtJTkQsIGVpdGhlciBleHByZXNzIG9yIGltcGxpZWQuXHJcbiAqIFNlZSB0aGUgTGljZW5zZSBmb3IgdGhlIHNwZWNpZmljIGxhbmd1YWdlIGdvdmVybmluZyBwZXJtaXNzaW9ucyBhbmRcclxuICogbGltaXRhdGlvbnMgdW5kZXIgdGhlIExpY2Vuc2UuXHJcbiAqL1xyXG4vKipcclxuICogVGhlIHBlcnNpc3RlbmNlIHByb3ZpZGVyIGluY2x1ZGVkIHdpdGggdGhlIGZ1bGwgRmlyZXN0b3JlIFNESy5cclxuICovXHJcbmNsYXNzIEluZGV4ZWREYlBlcnNpc3RlbmNlUHJvdmlkZXIge1xyXG4gICAgZW5hYmxlSW5kZXhlZERiUGVyc2lzdGVuY2UoZmlyZXN0b3JlLCBmb3JjZU93bmVyc2hpcCkge1xyXG4gICAgICAgIHJldHVybiBlbmFibGVJbmRleGVkRGJQZXJzaXN0ZW5jZShmaXJlc3RvcmUuX2RlbGVnYXRlLCB7IGZvcmNlT3duZXJzaGlwIH0pO1xyXG4gICAgfVxyXG4gICAgZW5hYmxlTXVsdGlUYWJJbmRleGVkRGJQZXJzaXN0ZW5jZShmaXJlc3RvcmUpIHtcclxuICAgICAgICByZXR1cm4gZW5hYmxlTXVsdGlUYWJJbmRleGVkRGJQZXJzaXN0ZW5jZShmaXJlc3RvcmUuX2RlbGVnYXRlKTtcclxuICAgIH1cclxuICAgIGNsZWFySW5kZXhlZERiUGVyc2lzdGVuY2UoZmlyZXN0b3JlKSB7XHJcbiAgICAgICAgcmV0dXJuIGNsZWFySW5kZXhlZERiUGVyc2lzdGVuY2UoZmlyZXN0b3JlLl9kZWxlZ2F0ZSk7XHJcbiAgICB9XHJcbn1cclxuLyoqXHJcbiAqIENvbXBhdCBjbGFzcyBmb3IgRmlyZXN0b3JlLiBFeHBvc2VzIEZpcmVzdG9yZSBMZWdhY3kgQVBJLCBidXQgZGVsZWdhdGVzXHJcbiAqIHRvIHRoZSBmdW5jdGlvbmFsIEFQSSBvZiBmaXJlc3RvcmUtZXhwLlxyXG4gKi9cclxuY2xhc3MgRmlyZXN0b3JlIHtcclxuICAgIGNvbnN0cnVjdG9yKGRhdGFiYXNlSWRPckFwcCwgX2RlbGVnYXRlLCBfcGVyc2lzdGVuY2VQcm92aWRlcikge1xyXG4gICAgICAgIHRoaXMuX2RlbGVnYXRlID0gX2RlbGVnYXRlO1xyXG4gICAgICAgIHRoaXMuX3BlcnNpc3RlbmNlUHJvdmlkZXIgPSBfcGVyc2lzdGVuY2VQcm92aWRlcjtcclxuICAgICAgICB0aGlzLklOVEVSTkFMID0ge1xyXG4gICAgICAgICAgICBkZWxldGU6ICgpID0+IHRoaXMudGVybWluYXRlKClcclxuICAgICAgICB9O1xyXG4gICAgICAgIGlmICghKGRhdGFiYXNlSWRPckFwcCBpbnN0YW5jZW9mIF9EYXRhYmFzZUlkKSkge1xyXG4gICAgICAgICAgICB0aGlzLl9hcHBDb21wYXQgPSBkYXRhYmFzZUlkT3JBcHA7XHJcbiAgICAgICAgfVxyXG4gICAgfVxyXG4gICAgZ2V0IF9kYXRhYmFzZUlkKCkge1xyXG4gICAgICAgIHJldHVybiB0aGlzLl9kZWxlZ2F0ZS5fZGF0YWJhc2VJZDtcclxuICAgIH1cclxuICAgIHNldHRpbmdzKHNldHRpbmdzTGl0ZXJhbCkge1xyXG4gICAgICAgIGNvbnN0IGN1cnJlbnRTZXR0aW5ncyA9IHRoaXMuX2RlbGVnYXRlLl9nZXRTZXR0aW5ncygpO1xyXG4gICAgICAgIGlmICghc2V0dGluZ3NMaXRlcmFsLm1lcmdlICYmXHJcbiAgICAgICAgICAgIGN1cnJlbnRTZXR0aW5ncy5ob3N0ICE9PSBzZXR0aW5nc0xpdGVyYWwuaG9zdCkge1xyXG4gICAgICAgICAgICBfbG9nV2FybignWW91IGFyZSBvdmVycmlkaW5nIHRoZSBvcmlnaW5hbCBob3N0LiBJZiB5b3UgZGlkIG5vdCBpbnRlbmQgJyArXHJcbiAgICAgICAgICAgICAgICAndG8gb3ZlcnJpZGUgeW91ciBzZXR0aW5ncywgdXNlIHttZXJnZTogdHJ1ZX0uJyk7XHJcbiAgICAgICAgfVxyXG4gICAgICAgIGlmIChzZXR0aW5nc0xpdGVyYWwubWVyZ2UpIHtcclxuICAgICAgICAgICAgc2V0dGluZ3NMaXRlcmFsID0gT2JqZWN0LmFzc2lnbihPYmplY3QuYXNzaWduKHt9LCBjdXJyZW50U2V0dGluZ3MpLCBzZXR0aW5nc0xpdGVyYWwpO1xyXG4gICAgICAgICAgICAvLyBSZW1vdmUgdGhlIHByb3BlcnR5IGZyb20gdGhlIHNldHRpbmdzIG9uY2UgdGhlIG1lcmdlIGlzIGNvbXBsZXRlZFxyXG4gICAgICAgICAgICBkZWxldGUgc2V0dGluZ3NMaXRlcmFsLm1lcmdlO1xyXG4gICAgICAgIH1cclxuICAgICAgICB0aGlzLl9kZWxlZ2F0ZS5fc2V0U2V0dGluZ3Moc2V0dGluZ3NMaXRlcmFsKTtcclxuICAgIH1cclxuICAgIHVzZUVtdWxhdG9yKGhvc3QsIHBvcnQsIG9wdGlvbnMgPSB7fSkge1xyXG4gICAgICAgIGNvbm5lY3RGaXJlc3RvcmVFbXVsYXRvcih0aGlzLl9kZWxlZ2F0ZSwgaG9zdCwgcG9ydCwgb3B0aW9ucyk7XHJcbiAgICB9XHJcbiAgICBlbmFibGVOZXR3b3JrKCkge1xyXG4gICAgICAgIHJldHVybiBlbmFibGVOZXR3b3JrKHRoaXMuX2RlbGVnYXRlKTtcclxuICAgIH1cclxuICAgIGRpc2FibGVOZXR3b3JrKCkge1xyXG4gICAgICAgIHJldHVybiBkaXNhYmxlTmV0d29yayh0aGlzLl9kZWxlZ2F0ZSk7XHJcbiAgICB9XHJcbiAgICBlbmFibGVQZXJzaXN0ZW5jZShzZXR0aW5ncykge1xyXG4gICAgICAgIGxldCBzeW5jaHJvbml6ZVRhYnMgPSBmYWxzZTtcclxuICAgICAgICBsZXQgZXhwZXJpbWVudGFsRm9yY2VPd25pbmdUYWIgPSBmYWxzZTtcclxuICAgICAgICBpZiAoc2V0dGluZ3MpIHtcclxuICAgICAgICAgICAgc3luY2hyb25pemVUYWJzID0gISFzZXR0aW5ncy5zeW5jaHJvbml6ZVRhYnM7XHJcbiAgICAgICAgICAgIGV4cGVyaW1lbnRhbEZvcmNlT3duaW5nVGFiID0gISFzZXR0aW5ncy5leHBlcmltZW50YWxGb3JjZU93bmluZ1RhYjtcclxuICAgICAgICAgICAgX3ZhbGlkYXRlSXNOb3RVc2VkVG9nZXRoZXIoJ3N5bmNocm9uaXplVGFicycsIHN5bmNocm9uaXplVGFicywgJ2V4cGVyaW1lbnRhbEZvcmNlT3duaW5nVGFiJywgZXhwZXJpbWVudGFsRm9yY2VPd25pbmdUYWIpO1xyXG4gICAgICAgIH1cclxuICAgICAgICByZXR1cm4gc3luY2hyb25pemVUYWJzXHJcbiAgICAgICAgICAgID8gdGhpcy5fcGVyc2lzdGVuY2VQcm92aWRlci5lbmFibGVNdWx0aVRhYkluZGV4ZWREYlBlcnNpc3RlbmNlKHRoaXMpXHJcbiAgICAgICAgICAgIDogdGhpcy5fcGVyc2lzdGVuY2VQcm92aWRlci5lbmFibGVJbmRleGVkRGJQZXJzaXN0ZW5jZSh0aGlzLCBleHBlcmltZW50YWxGb3JjZU93bmluZ1RhYik7XHJcbiAgICB9XHJcbiAgICBjbGVhclBlcnNpc3RlbmNlKCkge1xyXG4gICAgICAgIHJldHVybiB0aGlzLl9wZXJzaXN0ZW5jZVByb3ZpZGVyLmNsZWFySW5kZXhlZERiUGVyc2lzdGVuY2UodGhpcyk7XHJcbiAgICB9XHJcbiAgICB0ZXJtaW5hdGUoKSB7XHJcbiAgICAgICAgaWYgKHRoaXMuX2FwcENvbXBhdCkge1xyXG4gICAgICAgICAgICB0aGlzLl9hcHBDb21wYXQuX3JlbW92ZVNlcnZpY2VJbnN0YW5jZSgnZmlyZXN0b3JlLWNvbXBhdCcpO1xyXG4gICAgICAgICAgICB0aGlzLl9hcHBDb21wYXQuX3JlbW92ZVNlcnZpY2VJbnN0YW5jZSgnZmlyZXN0b3JlJyk7XHJcbiAgICAgICAgfVxyXG4gICAgICAgIHJldHVybiB0aGlzLl9kZWxlZ2F0ZS5fZGVsZXRlKCk7XHJcbiAgICB9XHJcbiAgICB3YWl0Rm9yUGVuZGluZ1dyaXRlcygpIHtcclxuICAgICAgICByZXR1cm4gd2FpdEZvclBlbmRpbmdXcml0ZXModGhpcy5fZGVsZWdhdGUpO1xyXG4gICAgfVxyXG4gICAgb25TbmFwc2hvdHNJblN5bmMoYXJnKSB7XHJcbiAgICAgICAgcmV0dXJuIG9uU25hcHNob3RzSW5TeW5jKHRoaXMuX2RlbGVnYXRlLCBhcmcpO1xyXG4gICAgfVxyXG4gICAgZ2V0IGFwcCgpIHtcclxuICAgICAgICBpZiAoIXRoaXMuX2FwcENvbXBhdCkge1xyXG4gICAgICAgICAgICB0aHJvdyBuZXcgRmlyZXN0b3JlRXJyb3IoJ2ZhaWxlZC1wcmVjb25kaXRpb24nLCBcIkZpcmVzdG9yZSB3YXMgbm90IGluaXRpYWxpemVkIHVzaW5nIHRoZSBGaXJlYmFzZSBTREsuICdhcHAnIGlzIFwiICtcclxuICAgICAgICAgICAgICAgICdub3QgYXZhaWxhYmxlJyk7XHJcbiAgICAgICAgfVxyXG4gICAgICAgIHJldHVybiB0aGlzLl9hcHBDb21wYXQ7XHJcbiAgICB9XHJcbiAgICBjb2xsZWN0aW9uKHBhdGhTdHJpbmcpIHtcclxuICAgICAgICB0cnkge1xyXG4gICAgICAgICAgICByZXR1cm4gbmV3IENvbGxlY3Rpb25SZWZlcmVuY2UodGhpcywgY29sbGVjdGlvbih0aGlzLl9kZWxlZ2F0ZSwgcGF0aFN0cmluZykpO1xyXG4gICAgICAgIH1cclxuICAgICAgICBjYXRjaCAoZSkge1xyXG4gICAgICAgICAgICB0aHJvdyByZXBsYWNlRnVuY3Rpb25OYW1lKGUsICdjb2xsZWN0aW9uKCknLCAnRmlyZXN0b3JlLmNvbGxlY3Rpb24oKScpO1xyXG4gICAgICAgIH1cclxuICAgIH1cclxuICAgIGRvYyhwYXRoU3RyaW5nKSB7XHJcbiAgICAgICAgdHJ5IHtcclxuICAgICAgICAgICAgcmV0dXJuIG5ldyBEb2N1bWVudFJlZmVyZW5jZSh0aGlzLCBkb2ModGhpcy5fZGVsZWdhdGUsIHBhdGhTdHJpbmcpKTtcclxuICAgICAgICB9XHJcbiAgICAgICAgY2F0Y2ggKGUpIHtcclxuICAgICAgICAgICAgdGhyb3cgcmVwbGFjZUZ1bmN0aW9uTmFtZShlLCAnZG9jKCknLCAnRmlyZXN0b3JlLmRvYygpJyk7XHJcbiAgICAgICAgfVxyXG4gICAgfVxyXG4gICAgY29sbGVjdGlvbkdyb3VwKGNvbGxlY3Rpb25JZCkge1xyXG4gICAgICAgIHRyeSB7XHJcbiAgICAgICAgICAgIHJldHVybiBuZXcgUXVlcnkodGhpcywgY29sbGVjdGlvbkdyb3VwKHRoaXMuX2RlbGVnYXRlLCBjb2xsZWN0aW9uSWQpKTtcclxuICAgICAgICB9XHJcbiAgICAgICAgY2F0Y2ggKGUpIHtcclxuICAgICAgICAgICAgdGhyb3cgcmVwbGFjZUZ1bmN0aW9uTmFtZShlLCAnY29sbGVjdGlvbkdyb3VwKCknLCAnRmlyZXN0b3JlLmNvbGxlY3Rpb25Hcm91cCgpJyk7XHJcbiAgICAgICAgfVxyXG4gICAgfVxyXG4gICAgcnVuVHJhbnNhY3Rpb24odXBkYXRlRnVuY3Rpb24pIHtcclxuICAgICAgICByZXR1cm4gcnVuVHJhbnNhY3Rpb24odGhpcy5fZGVsZWdhdGUsIHRyYW5zYWN0aW9uID0+IHVwZGF0ZUZ1bmN0aW9uKG5ldyBUcmFuc2FjdGlvbih0aGlzLCB0cmFuc2FjdGlvbikpKTtcclxuICAgIH1cclxuICAgIGJhdGNoKCkge1xyXG4gICAgICAgIGVuc3VyZUZpcmVzdG9yZUNvbmZpZ3VyZWQodGhpcy5fZGVsZWdhdGUpO1xyXG4gICAgICAgIHJldHVybiBuZXcgV3JpdGVCYXRjaChuZXcgV3JpdGVCYXRjaCQxKHRoaXMuX2RlbGVnYXRlLCBtdXRhdGlvbnMgPT4gZXhlY3V0ZVdyaXRlKHRoaXMuX2RlbGVnYXRlLCBtdXRhdGlvbnMpKSk7XHJcbiAgICB9XHJcbiAgICBsb2FkQnVuZGxlKGJ1bmRsZURhdGEpIHtcclxuICAgICAgICByZXR1cm4gbG9hZEJ1bmRsZSh0aGlzLl9kZWxlZ2F0ZSwgYnVuZGxlRGF0YSk7XHJcbiAgICB9XHJcbiAgICBuYW1lZFF1ZXJ5KG5hbWUpIHtcclxuICAgICAgICByZXR1cm4gbmFtZWRRdWVyeSh0aGlzLl9kZWxlZ2F0ZSwgbmFtZSkudGhlbihleHBRdWVyeSA9PiB7XHJcbiAgICAgICAgICAgIGlmICghZXhwUXVlcnkpIHtcclxuICAgICAgICAgICAgICAgIHJldHVybiBudWxsO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIHJldHVybiBuZXcgUXVlcnkodGhpcywgXHJcbiAgICAgICAgICAgIC8vIFdlIGNhbiBwYXNzIGBleHBRdWVyeWAgaGVyZSBkaXJlY3RseSBzaW5jZSBuYW1lZCBxdWVyaWVzIGRvbid0IGhhdmUgYSBVc2VyRGF0YUNvbnZlcnRlci5cclxuICAgICAgICAgICAgLy8gT3RoZXJ3aXNlLCB3ZSB3b3VsZCBoYXZlIHRvIGNyZWF0ZSBhIG5ldyBFeHBRdWVyeSBhbmQgcGFzcyB0aGUgb2xkIFVzZXJEYXRhQ29udmVydGVyLlxyXG4gICAgICAgICAgICBleHBRdWVyeSk7XHJcbiAgICAgICAgfSk7XHJcbiAgICB9XHJcbn1cclxuY2xhc3MgVXNlckRhdGFXcml0ZXIgZXh0ZW5kcyBBYnN0cmFjdFVzZXJEYXRhV3JpdGVyIHtcclxuICAgIGNvbnN0cnVjdG9yKGZpcmVzdG9yZSkge1xyXG4gICAgICAgIHN1cGVyKCk7XHJcbiAgICAgICAgdGhpcy5maXJlc3RvcmUgPSBmaXJlc3RvcmU7XHJcbiAgICB9XHJcbiAgICBjb252ZXJ0Qnl0ZXMoYnl0ZXMpIHtcclxuICAgICAgICByZXR1cm4gbmV3IEJsb2IobmV3IEJ5dGVzKGJ5dGVzKSk7XHJcbiAgICB9XHJcbiAgICBjb252ZXJ0UmVmZXJlbmNlKG5hbWUpIHtcclxuICAgICAgICBjb25zdCBrZXkgPSB0aGlzLmNvbnZlcnREb2N1bWVudEtleShuYW1lLCB0aGlzLmZpcmVzdG9yZS5fZGF0YWJhc2VJZCk7XHJcbiAgICAgICAgcmV0dXJuIERvY3VtZW50UmVmZXJlbmNlLmZvcktleShrZXksIHRoaXMuZmlyZXN0b3JlLCAvKiBjb252ZXJ0ZXI9ICovIG51bGwpO1xyXG4gICAgfVxyXG59XHJcbmZ1bmN0aW9uIHNldExvZ0xldmVsKGxldmVsKSB7XHJcbiAgICBzZXRMb2dMZXZlbCQxKGxldmVsKTtcclxufVxyXG4vKipcclxuICogQSByZWZlcmVuY2UgdG8gYSB0cmFuc2FjdGlvbi5cclxuICovXHJcbmNsYXNzIFRyYW5zYWN0aW9uIHtcclxuICAgIGNvbnN0cnVjdG9yKF9maXJlc3RvcmUsIF9kZWxlZ2F0ZSkge1xyXG4gICAgICAgIHRoaXMuX2ZpcmVzdG9yZSA9IF9maXJlc3RvcmU7XHJcbiAgICAgICAgdGhpcy5fZGVsZWdhdGUgPSBfZGVsZWdhdGU7XHJcbiAgICAgICAgdGhpcy5fdXNlckRhdGFXcml0ZXIgPSBuZXcgVXNlckRhdGFXcml0ZXIoX2ZpcmVzdG9yZSk7XHJcbiAgICB9XHJcbiAgICBnZXQoZG9jdW1lbnRSZWYpIHtcclxuICAgICAgICBjb25zdCByZWYgPSBjYXN0UmVmZXJlbmNlKGRvY3VtZW50UmVmKTtcclxuICAgICAgICByZXR1cm4gdGhpcy5fZGVsZWdhdGVcclxuICAgICAgICAgICAgLmdldChyZWYpXHJcbiAgICAgICAgICAgIC50aGVuKHJlc3VsdCA9PiBuZXcgRG9jdW1lbnRTbmFwc2hvdCh0aGlzLl9maXJlc3RvcmUsIG5ldyBEb2N1bWVudFNuYXBzaG90JDEodGhpcy5fZmlyZXN0b3JlLl9kZWxlZ2F0ZSwgdGhpcy5fdXNlckRhdGFXcml0ZXIsIHJlc3VsdC5fa2V5LCByZXN1bHQuX2RvY3VtZW50LCByZXN1bHQubWV0YWRhdGEsIHJlZi5jb252ZXJ0ZXIpKSk7XHJcbiAgICB9XHJcbiAgICBzZXQoZG9jdW1lbnRSZWYsIGRhdGEsIG9wdGlvbnMpIHtcclxuICAgICAgICBjb25zdCByZWYgPSBjYXN0UmVmZXJlbmNlKGRvY3VtZW50UmVmKTtcclxuICAgICAgICBpZiAob3B0aW9ucykge1xyXG4gICAgICAgICAgICB2YWxpZGF0ZVNldE9wdGlvbnMoJ1RyYW5zYWN0aW9uLnNldCcsIG9wdGlvbnMpO1xyXG4gICAgICAgICAgICB0aGlzLl9kZWxlZ2F0ZS5zZXQocmVmLCBkYXRhLCBvcHRpb25zKTtcclxuICAgICAgICB9XHJcbiAgICAgICAgZWxzZSB7XHJcbiAgICAgICAgICAgIHRoaXMuX2RlbGVnYXRlLnNldChyZWYsIGRhdGEpO1xyXG4gICAgICAgIH1cclxuICAgICAgICByZXR1cm4gdGhpcztcclxuICAgIH1cclxuICAgIHVwZGF0ZShkb2N1bWVudFJlZiwgZGF0YU9yRmllbGQsIHZhbHVlLCAuLi5tb3JlRmllbGRzQW5kVmFsdWVzKSB7XHJcbiAgICAgICAgY29uc3QgcmVmID0gY2FzdFJlZmVyZW5jZShkb2N1bWVudFJlZik7XHJcbiAgICAgICAgaWYgKGFyZ3VtZW50cy5sZW5ndGggPT09IDIpIHtcclxuICAgICAgICAgICAgdGhpcy5fZGVsZWdhdGUudXBkYXRlKHJlZiwgZGF0YU9yRmllbGQpO1xyXG4gICAgICAgIH1cclxuICAgICAgICBlbHNlIHtcclxuICAgICAgICAgICAgdGhpcy5fZGVsZWdhdGUudXBkYXRlKHJlZiwgZGF0YU9yRmllbGQsIHZhbHVlLCAuLi5tb3JlRmllbGRzQW5kVmFsdWVzKTtcclxuICAgICAgICB9XHJcbiAgICAgICAgcmV0dXJuIHRoaXM7XHJcbiAgICB9XHJcbiAgICBkZWxldGUoZG9jdW1lbnRSZWYpIHtcclxuICAgICAgICBjb25zdCByZWYgPSBjYXN0UmVmZXJlbmNlKGRvY3VtZW50UmVmKTtcclxuICAgICAgICB0aGlzLl9kZWxlZ2F0ZS5kZWxldGUocmVmKTtcclxuICAgICAgICByZXR1cm4gdGhpcztcclxuICAgIH1cclxufVxyXG5jbGFzcyBXcml0ZUJhdGNoIHtcclxuICAgIGNvbnN0cnVjdG9yKF9kZWxlZ2F0ZSkge1xyXG4gICAgICAgIHRoaXMuX2RlbGVnYXRlID0gX2RlbGVnYXRlO1xyXG4gICAgfVxyXG4gICAgc2V0KGRvY3VtZW50UmVmLCBkYXRhLCBvcHRpb25zKSB7XHJcbiAgICAgICAgY29uc3QgcmVmID0gY2FzdFJlZmVyZW5jZShkb2N1bWVudFJlZik7XHJcbiAgICAgICAgaWYgKG9wdGlvbnMpIHtcclxuICAgICAgICAgICAgdmFsaWRhdGVTZXRPcHRpb25zKCdXcml0ZUJhdGNoLnNldCcsIG9wdGlvbnMpO1xyXG4gICAgICAgICAgICB0aGlzLl9kZWxlZ2F0ZS5zZXQocmVmLCBkYXRhLCBvcHRpb25zKTtcclxuICAgICAgICB9XHJcbiAgICAgICAgZWxzZSB7XHJcbiAgICAgICAgICAgIHRoaXMuX2RlbGVnYXRlLnNldChyZWYsIGRhdGEpO1xyXG4gICAgICAgIH1cclxuICAgICAgICByZXR1cm4gdGhpcztcclxuICAgIH1cclxuICAgIHVwZGF0ZShkb2N1bWVudFJlZiwgZGF0YU9yRmllbGQsIHZhbHVlLCAuLi5tb3JlRmllbGRzQW5kVmFsdWVzKSB7XHJcbiAgICAgICAgY29uc3QgcmVmID0gY2FzdFJlZmVyZW5jZShkb2N1bWVudFJlZik7XHJcbiAgICAgICAgaWYgKGFyZ3VtZW50cy5sZW5ndGggPT09IDIpIHtcclxuICAgICAgICAgICAgdGhpcy5fZGVsZWdhdGUudXBkYXRlKHJlZiwgZGF0YU9yRmllbGQpO1xyXG4gICAgICAgIH1cclxuICAgICAgICBlbHNlIHtcclxuICAgICAgICAgICAgdGhpcy5fZGVsZWdhdGUudXBkYXRlKHJlZiwgZGF0YU9yRmllbGQsIHZhbHVlLCAuLi5tb3JlRmllbGRzQW5kVmFsdWVzKTtcclxuICAgICAgICB9XHJcbiAgICAgICAgcmV0dXJuIHRoaXM7XHJcbiAgICB9XHJcbiAgICBkZWxldGUoZG9jdW1lbnRSZWYpIHtcclxuICAgICAgICBjb25zdCByZWYgPSBjYXN0UmVmZXJlbmNlKGRvY3VtZW50UmVmKTtcclxuICAgICAgICB0aGlzLl9kZWxlZ2F0ZS5kZWxldGUocmVmKTtcclxuICAgICAgICByZXR1cm4gdGhpcztcclxuICAgIH1cclxuICAgIGNvbW1pdCgpIHtcclxuICAgICAgICByZXR1cm4gdGhpcy5fZGVsZWdhdGUuY29tbWl0KCk7XHJcbiAgICB9XHJcbn1cclxuLyoqXHJcbiAqIFdyYXBzIGEgYFB1YmxpY0ZpcmVzdG9yZURhdGFDb252ZXJ0ZXJgIHRyYW5zbGF0aW5nIHRoZSB0eXBlcyBmcm9tIHRoZVxyXG4gKiBleHBlcmltZW50YWwgU0RLIGludG8gY29ycmVzcG9uZGluZyB0eXBlcyBmcm9tIHRoZSBDbGFzc2ljIFNESyBiZWZvcmUgcGFzc2luZ1xyXG4gKiB0aGVtIHRvIHRoZSB3cmFwcGVkIGNvbnZlcnRlci5cclxuICovXHJcbmNsYXNzIEZpcmVzdG9yZURhdGFDb252ZXJ0ZXIge1xyXG4gICAgY29uc3RydWN0b3IoX2ZpcmVzdG9yZSwgX3VzZXJEYXRhV3JpdGVyLCBfZGVsZWdhdGUpIHtcclxuICAgICAgICB0aGlzLl9maXJlc3RvcmUgPSBfZmlyZXN0b3JlO1xyXG4gICAgICAgIHRoaXMuX3VzZXJEYXRhV3JpdGVyID0gX3VzZXJEYXRhV3JpdGVyO1xyXG4gICAgICAgIHRoaXMuX2RlbGVnYXRlID0gX2RlbGVnYXRlO1xyXG4gICAgfVxyXG4gICAgZnJvbUZpcmVzdG9yZShzbmFwc2hvdCwgb3B0aW9ucykge1xyXG4gICAgICAgIGNvbnN0IGV4cFNuYXBzaG90ID0gbmV3IFF1ZXJ5RG9jdW1lbnRTbmFwc2hvdCQxKHRoaXMuX2ZpcmVzdG9yZS5fZGVsZWdhdGUsIHRoaXMuX3VzZXJEYXRhV3JpdGVyLCBzbmFwc2hvdC5fa2V5LCBzbmFwc2hvdC5fZG9jdW1lbnQsIHNuYXBzaG90Lm1ldGFkYXRhLCBcclxuICAgICAgICAvKiBjb252ZXJ0ZXI9ICovIG51bGwpO1xyXG4gICAgICAgIHJldHVybiB0aGlzLl9kZWxlZ2F0ZS5mcm9tRmlyZXN0b3JlKG5ldyBRdWVyeURvY3VtZW50U25hcHNob3QodGhpcy5fZmlyZXN0b3JlLCBleHBTbmFwc2hvdCksIG9wdGlvbnMgIT09IG51bGwgJiYgb3B0aW9ucyAhPT0gdm9pZCAwID8gb3B0aW9ucyA6IHt9KTtcclxuICAgIH1cclxuICAgIHRvRmlyZXN0b3JlKG1vZGVsT2JqZWN0LCBvcHRpb25zKSB7XHJcbiAgICAgICAgaWYgKCFvcHRpb25zKSB7XHJcbiAgICAgICAgICAgIHJldHVybiB0aGlzLl9kZWxlZ2F0ZS50b0ZpcmVzdG9yZShtb2RlbE9iamVjdCk7XHJcbiAgICAgICAgfVxyXG4gICAgICAgIGVsc2Uge1xyXG4gICAgICAgICAgICByZXR1cm4gdGhpcy5fZGVsZWdhdGUudG9GaXJlc3RvcmUobW9kZWxPYmplY3QsIG9wdGlvbnMpO1xyXG4gICAgICAgIH1cclxuICAgIH1cclxuICAgIC8vIFVzZSB0aGUgc2FtZSBpbnN0YW5jZSBvZiBgRmlyZXN0b3JlRGF0YUNvbnZlcnRlcmAgZm9yIHRoZSBnaXZlbiBpbnN0YW5jZXNcclxuICAgIC8vIG9mIGBGaXJlc3RvcmVgIGFuZCBgUHVibGljRmlyZXN0b3JlRGF0YUNvbnZlcnRlcmAgc28gdGhhdCBpc0VxdWFsKCkgd2lsbFxyXG4gICAgLy8gY29tcGFyZSBlcXVhbCBmb3IgdHdvIG9iamVjdHMgY3JlYXRlZCB3aXRoIHRoZSBzYW1lIGNvbnZlcnRlciBpbnN0YW5jZS5cclxuICAgIHN0YXRpYyBnZXRJbnN0YW5jZShmaXJlc3RvcmUsIGNvbnZlcnRlcikge1xyXG4gICAgICAgIGNvbnN0IGNvbnZlcnRlck1hcEJ5RmlyZXN0b3JlID0gRmlyZXN0b3JlRGF0YUNvbnZlcnRlci5JTlNUQU5DRVM7XHJcbiAgICAgICAgbGV0IHVudHlwZWRDb252ZXJ0ZXJCeUNvbnZlcnRlciA9IGNvbnZlcnRlck1hcEJ5RmlyZXN0b3JlLmdldChmaXJlc3RvcmUpO1xyXG4gICAgICAgIGlmICghdW50eXBlZENvbnZlcnRlckJ5Q29udmVydGVyKSB7XHJcbiAgICAgICAgICAgIHVudHlwZWRDb252ZXJ0ZXJCeUNvbnZlcnRlciA9IG5ldyBXZWFrTWFwKCk7XHJcbiAgICAgICAgICAgIGNvbnZlcnRlck1hcEJ5RmlyZXN0b3JlLnNldChmaXJlc3RvcmUsIHVudHlwZWRDb252ZXJ0ZXJCeUNvbnZlcnRlcik7XHJcbiAgICAgICAgfVxyXG4gICAgICAgIGxldCBpbnN0YW5jZSA9IHVudHlwZWRDb252ZXJ0ZXJCeUNvbnZlcnRlci5nZXQoY29udmVydGVyKTtcclxuICAgICAgICBpZiAoIWluc3RhbmNlKSB7XHJcbiAgICAgICAgICAgIGluc3RhbmNlID0gbmV3IEZpcmVzdG9yZURhdGFDb252ZXJ0ZXIoZmlyZXN0b3JlLCBuZXcgVXNlckRhdGFXcml0ZXIoZmlyZXN0b3JlKSwgY29udmVydGVyKTtcclxuICAgICAgICAgICAgdW50eXBlZENvbnZlcnRlckJ5Q29udmVydGVyLnNldChjb252ZXJ0ZXIsIGluc3RhbmNlKTtcclxuICAgICAgICB9XHJcbiAgICAgICAgcmV0dXJuIGluc3RhbmNlO1xyXG4gICAgfVxyXG59XHJcbkZpcmVzdG9yZURhdGFDb252ZXJ0ZXIuSU5TVEFOQ0VTID0gbmV3IFdlYWtNYXAoKTtcclxuLyoqXHJcbiAqIEEgcmVmZXJlbmNlIHRvIGEgcGFydGljdWxhciBkb2N1bWVudCBpbiBhIGNvbGxlY3Rpb24gaW4gdGhlIGRhdGFiYXNlLlxyXG4gKi9cclxuY2xhc3MgRG9jdW1lbnRSZWZlcmVuY2Uge1xyXG4gICAgY29uc3RydWN0b3IoZmlyZXN0b3JlLCBfZGVsZWdhdGUpIHtcclxuICAgICAgICB0aGlzLmZpcmVzdG9yZSA9IGZpcmVzdG9yZTtcclxuICAgICAgICB0aGlzLl9kZWxlZ2F0ZSA9IF9kZWxlZ2F0ZTtcclxuICAgICAgICB0aGlzLl91c2VyRGF0YVdyaXRlciA9IG5ldyBVc2VyRGF0YVdyaXRlcihmaXJlc3RvcmUpO1xyXG4gICAgfVxyXG4gICAgc3RhdGljIGZvclBhdGgocGF0aCwgZmlyZXN0b3JlLCBjb252ZXJ0ZXIpIHtcclxuICAgICAgICBpZiAocGF0aC5sZW5ndGggJSAyICE9PSAwKSB7XHJcbiAgICAgICAgICAgIHRocm93IG5ldyBGaXJlc3RvcmVFcnJvcignaW52YWxpZC1hcmd1bWVudCcsICdJbnZhbGlkIGRvY3VtZW50IHJlZmVyZW5jZS4gRG9jdW1lbnQgJyArXHJcbiAgICAgICAgICAgICAgICAncmVmZXJlbmNlcyBtdXN0IGhhdmUgYW4gZXZlbiBudW1iZXIgb2Ygc2VnbWVudHMsIGJ1dCAnICtcclxuICAgICAgICAgICAgICAgIGAke3BhdGguY2Fub25pY2FsU3RyaW5nKCl9IGhhcyAke3BhdGgubGVuZ3RofWApO1xyXG4gICAgICAgIH1cclxuICAgICAgICByZXR1cm4gbmV3IERvY3VtZW50UmVmZXJlbmNlKGZpcmVzdG9yZSwgbmV3IERvY3VtZW50UmVmZXJlbmNlJDEoZmlyZXN0b3JlLl9kZWxlZ2F0ZSwgY29udmVydGVyLCBuZXcgX0RvY3VtZW50S2V5KHBhdGgpKSk7XHJcbiAgICB9XHJcbiAgICBzdGF0aWMgZm9yS2V5KGtleSwgZmlyZXN0b3JlLCBjb252ZXJ0ZXIpIHtcclxuICAgICAgICByZXR1cm4gbmV3IERvY3VtZW50UmVmZXJlbmNlKGZpcmVzdG9yZSwgbmV3IERvY3VtZW50UmVmZXJlbmNlJDEoZmlyZXN0b3JlLl9kZWxlZ2F0ZSwgY29udmVydGVyLCBrZXkpKTtcclxuICAgIH1cclxuICAgIGdldCBpZCgpIHtcclxuICAgICAgICByZXR1cm4gdGhpcy5fZGVsZWdhdGUuaWQ7XHJcbiAgICB9XHJcbiAgICBnZXQgcGFyZW50KCkge1xyXG4gICAgICAgIHJldHVybiBuZXcgQ29sbGVjdGlvblJlZmVyZW5jZSh0aGlzLmZpcmVzdG9yZSwgdGhpcy5fZGVsZWdhdGUucGFyZW50KTtcclxuICAgIH1cclxuICAgIGdldCBwYXRoKCkge1xyXG4gICAgICAgIHJldHVybiB0aGlzLl9kZWxlZ2F0ZS5wYXRoO1xyXG4gICAgfVxyXG4gICAgY29sbGVjdGlvbihwYXRoU3RyaW5nKSB7XHJcbiAgICAgICAgdHJ5IHtcclxuICAgICAgICAgICAgcmV0dXJuIG5ldyBDb2xsZWN0aW9uUmVmZXJlbmNlKHRoaXMuZmlyZXN0b3JlLCBjb2xsZWN0aW9uKHRoaXMuX2RlbGVnYXRlLCBwYXRoU3RyaW5nKSk7XHJcbiAgICAgICAgfVxyXG4gICAgICAgIGNhdGNoIChlKSB7XHJcbiAgICAgICAgICAgIHRocm93IHJlcGxhY2VGdW5jdGlvbk5hbWUoZSwgJ2NvbGxlY3Rpb24oKScsICdEb2N1bWVudFJlZmVyZW5jZS5jb2xsZWN0aW9uKCknKTtcclxuICAgICAgICB9XHJcbiAgICB9XHJcbiAgICBpc0VxdWFsKG90aGVyKSB7XHJcbiAgICAgICAgb3RoZXIgPSBnZXRNb2R1bGFySW5zdGFuY2Uob3RoZXIpO1xyXG4gICAgICAgIGlmICghKG90aGVyIGluc3RhbmNlb2YgRG9jdW1lbnRSZWZlcmVuY2UkMSkpIHtcclxuICAgICAgICAgICAgcmV0dXJuIGZhbHNlO1xyXG4gICAgICAgIH1cclxuICAgICAgICByZXR1cm4gcmVmRXF1YWwodGhpcy5fZGVsZWdhdGUsIG90aGVyKTtcclxuICAgIH1cclxuICAgIHNldCh2YWx1ZSwgb3B0aW9ucykge1xyXG4gICAgICAgIG9wdGlvbnMgPSB2YWxpZGF0ZVNldE9wdGlvbnMoJ0RvY3VtZW50UmVmZXJlbmNlLnNldCcsIG9wdGlvbnMpO1xyXG4gICAgICAgIHRyeSB7XHJcbiAgICAgICAgICAgIGlmIChvcHRpb25zKSB7XHJcbiAgICAgICAgICAgICAgICByZXR1cm4gc2V0RG9jKHRoaXMuX2RlbGVnYXRlLCB2YWx1ZSwgb3B0aW9ucyk7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgZWxzZSB7XHJcbiAgICAgICAgICAgICAgICByZXR1cm4gc2V0RG9jKHRoaXMuX2RlbGVnYXRlLCB2YWx1ZSk7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICB9XHJcbiAgICAgICAgY2F0Y2ggKGUpIHtcclxuICAgICAgICAgICAgdGhyb3cgcmVwbGFjZUZ1bmN0aW9uTmFtZShlLCAnc2V0RG9jKCknLCAnRG9jdW1lbnRSZWZlcmVuY2Uuc2V0KCknKTtcclxuICAgICAgICB9XHJcbiAgICB9XHJcbiAgICB1cGRhdGUoZmllbGRPclVwZGF0ZURhdGEsIHZhbHVlLCAuLi5tb3JlRmllbGRzQW5kVmFsdWVzKSB7XHJcbiAgICAgICAgdHJ5IHtcclxuICAgICAgICAgICAgaWYgKGFyZ3VtZW50cy5sZW5ndGggPT09IDEpIHtcclxuICAgICAgICAgICAgICAgIHJldHVybiB1cGRhdGVEb2ModGhpcy5fZGVsZWdhdGUsIGZpZWxkT3JVcGRhdGVEYXRhKTtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICBlbHNlIHtcclxuICAgICAgICAgICAgICAgIHJldHVybiB1cGRhdGVEb2ModGhpcy5fZGVsZWdhdGUsIGZpZWxkT3JVcGRhdGVEYXRhLCB2YWx1ZSwgLi4ubW9yZUZpZWxkc0FuZFZhbHVlcyk7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICB9XHJcbiAgICAgICAgY2F0Y2ggKGUpIHtcclxuICAgICAgICAgICAgdGhyb3cgcmVwbGFjZUZ1bmN0aW9uTmFtZShlLCAndXBkYXRlRG9jKCknLCAnRG9jdW1lbnRSZWZlcmVuY2UudXBkYXRlKCknKTtcclxuICAgICAgICB9XHJcbiAgICB9XHJcbiAgICBkZWxldGUoKSB7XHJcbiAgICAgICAgcmV0dXJuIGRlbGV0ZURvYyh0aGlzLl9kZWxlZ2F0ZSk7XHJcbiAgICB9XHJcbiAgICBvblNuYXBzaG90KC4uLmFyZ3MpIHtcclxuICAgICAgICBjb25zdCBvcHRpb25zID0gZXh0cmFjdFNuYXBzaG90T3B0aW9ucyhhcmdzKTtcclxuICAgICAgICBjb25zdCBvYnNlcnZlciA9IHdyYXBPYnNlcnZlcihhcmdzLCByZXN1bHQgPT4gbmV3IERvY3VtZW50U25hcHNob3QodGhpcy5maXJlc3RvcmUsIG5ldyBEb2N1bWVudFNuYXBzaG90JDEodGhpcy5maXJlc3RvcmUuX2RlbGVnYXRlLCB0aGlzLl91c2VyRGF0YVdyaXRlciwgcmVzdWx0Ll9rZXksIHJlc3VsdC5fZG9jdW1lbnQsIHJlc3VsdC5tZXRhZGF0YSwgdGhpcy5fZGVsZWdhdGUuY29udmVydGVyKSkpO1xyXG4gICAgICAgIHJldHVybiBvblNuYXBzaG90KHRoaXMuX2RlbGVnYXRlLCBvcHRpb25zLCBvYnNlcnZlcik7XHJcbiAgICB9XHJcbiAgICBnZXQob3B0aW9ucykge1xyXG4gICAgICAgIGxldCBzbmFwO1xyXG4gICAgICAgIGlmICgob3B0aW9ucyA9PT0gbnVsbCB8fCBvcHRpb25zID09PSB2b2lkIDAgPyB2b2lkIDAgOiBvcHRpb25zLnNvdXJjZSkgPT09ICdjYWNoZScpIHtcclxuICAgICAgICAgICAgc25hcCA9IGdldERvY0Zyb21DYWNoZSh0aGlzLl9kZWxlZ2F0ZSk7XHJcbiAgICAgICAgfVxyXG4gICAgICAgIGVsc2UgaWYgKChvcHRpb25zID09PSBudWxsIHx8IG9wdGlvbnMgPT09IHZvaWQgMCA/IHZvaWQgMCA6IG9wdGlvbnMuc291cmNlKSA9PT0gJ3NlcnZlcicpIHtcclxuICAgICAgICAgICAgc25hcCA9IGdldERvY0Zyb21TZXJ2ZXIodGhpcy5fZGVsZWdhdGUpO1xyXG4gICAgICAgIH1cclxuICAgICAgICBlbHNlIHtcclxuICAgICAgICAgICAgc25hcCA9IGdldERvYyh0aGlzLl9kZWxlZ2F0ZSk7XHJcbiAgICAgICAgfVxyXG4gICAgICAgIHJldHVybiBzbmFwLnRoZW4ocmVzdWx0ID0+IG5ldyBEb2N1bWVudFNuYXBzaG90KHRoaXMuZmlyZXN0b3JlLCBuZXcgRG9jdW1lbnRTbmFwc2hvdCQxKHRoaXMuZmlyZXN0b3JlLl9kZWxlZ2F0ZSwgdGhpcy5fdXNlckRhdGFXcml0ZXIsIHJlc3VsdC5fa2V5LCByZXN1bHQuX2RvY3VtZW50LCByZXN1bHQubWV0YWRhdGEsIHRoaXMuX2RlbGVnYXRlLmNvbnZlcnRlcikpKTtcclxuICAgIH1cclxuICAgIHdpdGhDb252ZXJ0ZXIoY29udmVydGVyKSB7XHJcbiAgICAgICAgcmV0dXJuIG5ldyBEb2N1bWVudFJlZmVyZW5jZSh0aGlzLmZpcmVzdG9yZSwgY29udmVydGVyXHJcbiAgICAgICAgICAgID8gdGhpcy5fZGVsZWdhdGUud2l0aENvbnZlcnRlcihGaXJlc3RvcmVEYXRhQ29udmVydGVyLmdldEluc3RhbmNlKHRoaXMuZmlyZXN0b3JlLCBjb252ZXJ0ZXIpKVxyXG4gICAgICAgICAgICA6IHRoaXMuX2RlbGVnYXRlLndpdGhDb252ZXJ0ZXIobnVsbCkpO1xyXG4gICAgfVxyXG59XHJcbi8qKlxyXG4gKiBSZXBsYWNlcyB0aGUgZnVuY3Rpb24gbmFtZSBpbiBhbiBlcnJvciB0aHJvd24gYnkgdGhlIGZpcmVzdG9yZS1leHAgQVBJXHJcbiAqIHdpdGggdGhlIGZ1bmN0aW9uIG5hbWVzIHVzZWQgaW4gdGhlIGNsYXNzaWMgQVBJLlxyXG4gKi9cclxuZnVuY3Rpb24gcmVwbGFjZUZ1bmN0aW9uTmFtZShlLCBvcmlnaW5hbCwgdXBkYXRlZCkge1xyXG4gICAgZS5tZXNzYWdlID0gZS5tZXNzYWdlLnJlcGxhY2Uob3JpZ2luYWwsIHVwZGF0ZWQpO1xyXG4gICAgcmV0dXJuIGU7XHJcbn1cclxuLyoqXHJcbiAqIEl0ZXJhdGVzIHRoZSBsaXN0IG9mIGFyZ3VtZW50cyBmcm9tIGFuIGBvblNuYXBzaG90YCBjYWxsIGFuZCByZXR1cm5zIHRoZVxyXG4gKiBmaXJzdCBhcmd1bWVudCB0aGF0IG1heSBiZSBhbiBgU25hcHNob3RMaXN0ZW5PcHRpb25zYCBvYmplY3QuIFJldHVybnMgYW5cclxuICogZW1wdHkgb2JqZWN0IGlmIG5vbmUgaXMgZm91bmQuXHJcbiAqL1xyXG5mdW5jdGlvbiBleHRyYWN0U25hcHNob3RPcHRpb25zKGFyZ3MpIHtcclxuICAgIGZvciAoY29uc3QgYXJnIG9mIGFyZ3MpIHtcclxuICAgICAgICBpZiAodHlwZW9mIGFyZyA9PT0gJ29iamVjdCcgJiYgIWlzUGFydGlhbE9ic2VydmVyKGFyZykpIHtcclxuICAgICAgICAgICAgcmV0dXJuIGFyZztcclxuICAgICAgICB9XHJcbiAgICB9XHJcbiAgICByZXR1cm4ge307XHJcbn1cclxuLyoqXHJcbiAqIENyZWF0ZXMgYW4gb2JzZXJ2ZXIgdGhhdCBjYW4gYmUgcGFzc2VkIHRvIHRoZSBmaXJlc3RvcmUtZXhwIFNESy4gVGhlXHJcbiAqIG9ic2VydmVyIGNvbnZlcnRzIGFsbCBvYnNlcnZlZCB2YWx1ZXMgaW50byB0aGUgZm9ybWF0IGV4cGVjdGVkIGJ5IHRoZSBjbGFzc2ljXHJcbiAqIFNESy5cclxuICpcclxuICogQHBhcmFtIGFyZ3MgLSBUaGUgbGlzdCBvZiBhcmd1bWVudHMgZnJvbSBhbiBgb25TbmFwc2hvdGAgY2FsbC5cclxuICogQHBhcmFtIHdyYXBwZXIgLSBUaGUgZnVuY3Rpb24gdGhhdCBjb252ZXJ0cyB0aGUgZmlyZXN0b3JlLWV4cCB0eXBlIGludG8gdGhlXHJcbiAqIHR5cGUgdXNlZCBieSB0aGlzIHNoaW0uXHJcbiAqL1xyXG5mdW5jdGlvbiB3cmFwT2JzZXJ2ZXIoYXJncywgd3JhcHBlcikge1xyXG4gICAgdmFyIF9hLCBfYjtcclxuICAgIGxldCB1c2VyT2JzZXJ2ZXI7XHJcbiAgICBpZiAoaXNQYXJ0aWFsT2JzZXJ2ZXIoYXJnc1swXSkpIHtcclxuICAgICAgICB1c2VyT2JzZXJ2ZXIgPSBhcmdzWzBdO1xyXG4gICAgfVxyXG4gICAgZWxzZSBpZiAoaXNQYXJ0aWFsT2JzZXJ2ZXIoYXJnc1sxXSkpIHtcclxuICAgICAgICB1c2VyT2JzZXJ2ZXIgPSBhcmdzWzFdO1xyXG4gICAgfVxyXG4gICAgZWxzZSBpZiAodHlwZW9mIGFyZ3NbMF0gPT09ICdmdW5jdGlvbicpIHtcclxuICAgICAgICB1c2VyT2JzZXJ2ZXIgPSB7XHJcbiAgICAgICAgICAgIG5leHQ6IGFyZ3NbMF0sXHJcbiAgICAgICAgICAgIGVycm9yOiBhcmdzWzFdLFxyXG4gICAgICAgICAgICBjb21wbGV0ZTogYXJnc1syXVxyXG4gICAgICAgIH07XHJcbiAgICB9XHJcbiAgICBlbHNlIHtcclxuICAgICAgICB1c2VyT2JzZXJ2ZXIgPSB7XHJcbiAgICAgICAgICAgIG5leHQ6IGFyZ3NbMV0sXHJcbiAgICAgICAgICAgIGVycm9yOiBhcmdzWzJdLFxyXG4gICAgICAgICAgICBjb21wbGV0ZTogYXJnc1szXVxyXG4gICAgICAgIH07XHJcbiAgICB9XHJcbiAgICByZXR1cm4ge1xyXG4gICAgICAgIG5leHQ6IHZhbCA9PiB7XHJcbiAgICAgICAgICAgIGlmICh1c2VyT2JzZXJ2ZXIubmV4dCkge1xyXG4gICAgICAgICAgICAgICAgdXNlck9ic2VydmVyLm5leHQod3JhcHBlcih2YWwpKTtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgIH0sXHJcbiAgICAgICAgZXJyb3I6IChfYSA9IHVzZXJPYnNlcnZlci5lcnJvcikgPT09IG51bGwgfHwgX2EgPT09IHZvaWQgMCA/IHZvaWQgMCA6IF9hLmJpbmQodXNlck9ic2VydmVyKSxcclxuICAgICAgICBjb21wbGV0ZTogKF9iID0gdXNlck9ic2VydmVyLmNvbXBsZXRlKSA9PT0gbnVsbCB8fCBfYiA9PT0gdm9pZCAwID8gdm9pZCAwIDogX2IuYmluZCh1c2VyT2JzZXJ2ZXIpXHJcbiAgICB9O1xyXG59XHJcbmNsYXNzIERvY3VtZW50U25hcHNob3Qge1xyXG4gICAgY29uc3RydWN0b3IoX2ZpcmVzdG9yZSwgX2RlbGVnYXRlKSB7XHJcbiAgICAgICAgdGhpcy5fZmlyZXN0b3JlID0gX2ZpcmVzdG9yZTtcclxuICAgICAgICB0aGlzLl9kZWxlZ2F0ZSA9IF9kZWxlZ2F0ZTtcclxuICAgIH1cclxuICAgIGdldCByZWYoKSB7XHJcbiAgICAgICAgcmV0dXJuIG5ldyBEb2N1bWVudFJlZmVyZW5jZSh0aGlzLl9maXJlc3RvcmUsIHRoaXMuX2RlbGVnYXRlLnJlZik7XHJcbiAgICB9XHJcbiAgICBnZXQgaWQoKSB7XHJcbiAgICAgICAgcmV0dXJuIHRoaXMuX2RlbGVnYXRlLmlkO1xyXG4gICAgfVxyXG4gICAgZ2V0IG1ldGFkYXRhKCkge1xyXG4gICAgICAgIHJldHVybiB0aGlzLl9kZWxlZ2F0ZS5tZXRhZGF0YTtcclxuICAgIH1cclxuICAgIGdldCBleGlzdHMoKSB7XHJcbiAgICAgICAgcmV0dXJuIHRoaXMuX2RlbGVnYXRlLmV4aXN0cygpO1xyXG4gICAgfVxyXG4gICAgZGF0YShvcHRpb25zKSB7XHJcbiAgICAgICAgcmV0dXJuIHRoaXMuX2RlbGVnYXRlLmRhdGEob3B0aW9ucyk7XHJcbiAgICB9XHJcbiAgICBnZXQoZmllbGRQYXRoLCBvcHRpb25zXHJcbiAgICAvLyBXZSBhcmUgdXNpbmcgYGFueWAgaGVyZSB0byBhdm9pZCBhbiBleHBsaWNpdCBjYXN0IGJ5IG91ciB1c2Vycy5cclxuICAgIC8vIGVzbGludC1kaXNhYmxlLW5leHQtbGluZSBAdHlwZXNjcmlwdC1lc2xpbnQvbm8tZXhwbGljaXQtYW55XHJcbiAgICApIHtcclxuICAgICAgICByZXR1cm4gdGhpcy5fZGVsZWdhdGUuZ2V0KGZpZWxkUGF0aCwgb3B0aW9ucyk7XHJcbiAgICB9XHJcbiAgICBpc0VxdWFsKG90aGVyKSB7XHJcbiAgICAgICAgcmV0dXJuIHNuYXBzaG90RXF1YWwodGhpcy5fZGVsZWdhdGUsIG90aGVyLl9kZWxlZ2F0ZSk7XHJcbiAgICB9XHJcbn1cclxuY2xhc3MgUXVlcnlEb2N1bWVudFNuYXBzaG90IGV4dGVuZHMgRG9jdW1lbnRTbmFwc2hvdCB7XHJcbiAgICBkYXRhKG9wdGlvbnMpIHtcclxuICAgICAgICBjb25zdCBkYXRhID0gdGhpcy5fZGVsZWdhdGUuZGF0YShvcHRpb25zKTtcclxuICAgICAgICBfZGVidWdBc3NlcnQoZGF0YSAhPT0gdW5kZWZpbmVkLCAnRG9jdW1lbnQgaW4gYSBRdWVyeURvY3VtZW50U25hcHNob3Qgc2hvdWxkIGV4aXN0Jyk7XHJcbiAgICAgICAgcmV0dXJuIGRhdGE7XHJcbiAgICB9XHJcbn1cclxuY2xhc3MgUXVlcnkge1xyXG4gICAgY29uc3RydWN0b3IoZmlyZXN0b3JlLCBfZGVsZWdhdGUpIHtcclxuICAgICAgICB0aGlzLmZpcmVzdG9yZSA9IGZpcmVzdG9yZTtcclxuICAgICAgICB0aGlzLl9kZWxlZ2F0ZSA9IF9kZWxlZ2F0ZTtcclxuICAgICAgICB0aGlzLl91c2VyRGF0YVdyaXRlciA9IG5ldyBVc2VyRGF0YVdyaXRlcihmaXJlc3RvcmUpO1xyXG4gICAgfVxyXG4gICAgd2hlcmUoZmllbGRQYXRoLCBvcFN0ciwgdmFsdWUpIHtcclxuICAgICAgICB0cnkge1xyXG4gICAgICAgICAgICAvLyBUaGUgXCJhcyBzdHJpbmdcIiBjYXN0IGlzIGEgbGl0dGxlIGJpdCBvZiBhIGhhY2suIGB3aGVyZWAgYWNjZXB0cyB0aGVcclxuICAgICAgICAgICAgLy8gRmllbGRQYXRoIENvbXBhdCB0eXBlIGFzIGlucHV0LCBidXQgaXMgbm90IHR5cGVkIGFzIHN1Y2ggaW4gb3JkZXIgdG9cclxuICAgICAgICAgICAgLy8gbm90IGV4cG9zZSB0aGlzIHZpYSBvdXIgcHVibGljIHR5cGluZ3MgZmlsZS5cclxuICAgICAgICAgICAgcmV0dXJuIG5ldyBRdWVyeSh0aGlzLmZpcmVzdG9yZSwgcXVlcnkodGhpcy5fZGVsZWdhdGUsIHdoZXJlKGZpZWxkUGF0aCwgb3BTdHIsIHZhbHVlKSkpO1xyXG4gICAgICAgIH1cclxuICAgICAgICBjYXRjaCAoZSkge1xyXG4gICAgICAgICAgICB0aHJvdyByZXBsYWNlRnVuY3Rpb25OYW1lKGUsIC8ob3JkZXJCeXx3aGVyZSlcXChcXCkvLCAnUXVlcnkuJDEoKScpO1xyXG4gICAgICAgIH1cclxuICAgIH1cclxuICAgIG9yZGVyQnkoZmllbGRQYXRoLCBkaXJlY3Rpb25TdHIpIHtcclxuICAgICAgICB0cnkge1xyXG4gICAgICAgICAgICAvLyBUaGUgXCJhcyBzdHJpbmdcIiBjYXN0IGlzIGEgbGl0dGxlIGJpdCBvZiBhIGhhY2suIGBvcmRlckJ5YCBhY2NlcHRzIHRoZVxyXG4gICAgICAgICAgICAvLyBGaWVsZFBhdGggQ29tcGF0IHR5cGUgYXMgaW5wdXQsIGJ1dCBpcyBub3QgdHlwZWQgYXMgc3VjaCBpbiBvcmRlciB0b1xyXG4gICAgICAgICAgICAvLyBub3QgZXhwb3NlIHRoaXMgdmlhIG91ciBwdWJsaWMgdHlwaW5ncyBmaWxlLlxyXG4gICAgICAgICAgICByZXR1cm4gbmV3IFF1ZXJ5KHRoaXMuZmlyZXN0b3JlLCBxdWVyeSh0aGlzLl9kZWxlZ2F0ZSwgb3JkZXJCeShmaWVsZFBhdGgsIGRpcmVjdGlvblN0cikpKTtcclxuICAgICAgICB9XHJcbiAgICAgICAgY2F0Y2ggKGUpIHtcclxuICAgICAgICAgICAgdGhyb3cgcmVwbGFjZUZ1bmN0aW9uTmFtZShlLCAvKG9yZGVyQnl8d2hlcmUpXFwoXFwpLywgJ1F1ZXJ5LiQxKCknKTtcclxuICAgICAgICB9XHJcbiAgICB9XHJcbiAgICBsaW1pdChuKSB7XHJcbiAgICAgICAgdHJ5IHtcclxuICAgICAgICAgICAgcmV0dXJuIG5ldyBRdWVyeSh0aGlzLmZpcmVzdG9yZSwgcXVlcnkodGhpcy5fZGVsZWdhdGUsIGxpbWl0KG4pKSk7XHJcbiAgICAgICAgfVxyXG4gICAgICAgIGNhdGNoIChlKSB7XHJcbiAgICAgICAgICAgIHRocm93IHJlcGxhY2VGdW5jdGlvbk5hbWUoZSwgJ2xpbWl0KCknLCAnUXVlcnkubGltaXQoKScpO1xyXG4gICAgICAgIH1cclxuICAgIH1cclxuICAgIGxpbWl0VG9MYXN0KG4pIHtcclxuICAgICAgICB0cnkge1xyXG4gICAgICAgICAgICByZXR1cm4gbmV3IFF1ZXJ5KHRoaXMuZmlyZXN0b3JlLCBxdWVyeSh0aGlzLl9kZWxlZ2F0ZSwgbGltaXRUb0xhc3QobikpKTtcclxuICAgICAgICB9XHJcbiAgICAgICAgY2F0Y2ggKGUpIHtcclxuICAgICAgICAgICAgdGhyb3cgcmVwbGFjZUZ1bmN0aW9uTmFtZShlLCAnbGltaXRUb0xhc3QoKScsICdRdWVyeS5saW1pdFRvTGFzdCgpJyk7XHJcbiAgICAgICAgfVxyXG4gICAgfVxyXG4gICAgc3RhcnRBdCguLi5hcmdzKSB7XHJcbiAgICAgICAgdHJ5IHtcclxuICAgICAgICAgICAgcmV0dXJuIG5ldyBRdWVyeSh0aGlzLmZpcmVzdG9yZSwgcXVlcnkodGhpcy5fZGVsZWdhdGUsIHN0YXJ0QXQoLi4uYXJncykpKTtcclxuICAgICAgICB9XHJcbiAgICAgICAgY2F0Y2ggKGUpIHtcclxuICAgICAgICAgICAgdGhyb3cgcmVwbGFjZUZ1bmN0aW9uTmFtZShlLCAnc3RhcnRBdCgpJywgJ1F1ZXJ5LnN0YXJ0QXQoKScpO1xyXG4gICAgICAgIH1cclxuICAgIH1cclxuICAgIHN0YXJ0QWZ0ZXIoLi4uYXJncykge1xyXG4gICAgICAgIHRyeSB7XHJcbiAgICAgICAgICAgIHJldHVybiBuZXcgUXVlcnkodGhpcy5maXJlc3RvcmUsIHF1ZXJ5KHRoaXMuX2RlbGVnYXRlLCBzdGFydEFmdGVyKC4uLmFyZ3MpKSk7XHJcbiAgICAgICAgfVxyXG4gICAgICAgIGNhdGNoIChlKSB7XHJcbiAgICAgICAgICAgIHRocm93IHJlcGxhY2VGdW5jdGlvbk5hbWUoZSwgJ3N0YXJ0QWZ0ZXIoKScsICdRdWVyeS5zdGFydEFmdGVyKCknKTtcclxuICAgICAgICB9XHJcbiAgICB9XHJcbiAgICBlbmRCZWZvcmUoLi4uYXJncykge1xyXG4gICAgICAgIHRyeSB7XHJcbiAgICAgICAgICAgIHJldHVybiBuZXcgUXVlcnkodGhpcy5maXJlc3RvcmUsIHF1ZXJ5KHRoaXMuX2RlbGVnYXRlLCBlbmRCZWZvcmUoLi4uYXJncykpKTtcclxuICAgICAgICB9XHJcbiAgICAgICAgY2F0Y2ggKGUpIHtcclxuICAgICAgICAgICAgdGhyb3cgcmVwbGFjZUZ1bmN0aW9uTmFtZShlLCAnZW5kQmVmb3JlKCknLCAnUXVlcnkuZW5kQmVmb3JlKCknKTtcclxuICAgICAgICB9XHJcbiAgICB9XHJcbiAgICBlbmRBdCguLi5hcmdzKSB7XHJcbiAgICAgICAgdHJ5IHtcclxuICAgICAgICAgICAgcmV0dXJuIG5ldyBRdWVyeSh0aGlzLmZpcmVzdG9yZSwgcXVlcnkodGhpcy5fZGVsZWdhdGUsIGVuZEF0KC4uLmFyZ3MpKSk7XHJcbiAgICAgICAgfVxyXG4gICAgICAgIGNhdGNoIChlKSB7XHJcbiAgICAgICAgICAgIHRocm93IHJlcGxhY2VGdW5jdGlvbk5hbWUoZSwgJ2VuZEF0KCknLCAnUXVlcnkuZW5kQXQoKScpO1xyXG4gICAgICAgIH1cclxuICAgIH1cclxuICAgIGlzRXF1YWwob3RoZXIpIHtcclxuICAgICAgICByZXR1cm4gcXVlcnlFcXVhbCh0aGlzLl9kZWxlZ2F0ZSwgb3RoZXIuX2RlbGVnYXRlKTtcclxuICAgIH1cclxuICAgIGdldChvcHRpb25zKSB7XHJcbiAgICAgICAgbGV0IHF1ZXJ5O1xyXG4gICAgICAgIGlmICgob3B0aW9ucyA9PT0gbnVsbCB8fCBvcHRpb25zID09PSB2b2lkIDAgPyB2b2lkIDAgOiBvcHRpb25zLnNvdXJjZSkgPT09ICdjYWNoZScpIHtcclxuICAgICAgICAgICAgcXVlcnkgPSBnZXREb2NzRnJvbUNhY2hlKHRoaXMuX2RlbGVnYXRlKTtcclxuICAgICAgICB9XHJcbiAgICAgICAgZWxzZSBpZiAoKG9wdGlvbnMgPT09IG51bGwgfHwgb3B0aW9ucyA9PT0gdm9pZCAwID8gdm9pZCAwIDogb3B0aW9ucy5zb3VyY2UpID09PSAnc2VydmVyJykge1xyXG4gICAgICAgICAgICBxdWVyeSA9IGdldERvY3NGcm9tU2VydmVyKHRoaXMuX2RlbGVnYXRlKTtcclxuICAgICAgICB9XHJcbiAgICAgICAgZWxzZSB7XHJcbiAgICAgICAgICAgIHF1ZXJ5ID0gZ2V0RG9jcyh0aGlzLl9kZWxlZ2F0ZSk7XHJcbiAgICAgICAgfVxyXG4gICAgICAgIHJldHVybiBxdWVyeS50aGVuKHJlc3VsdCA9PiBuZXcgUXVlcnlTbmFwc2hvdCh0aGlzLmZpcmVzdG9yZSwgbmV3IFF1ZXJ5U25hcHNob3QkMSh0aGlzLmZpcmVzdG9yZS5fZGVsZWdhdGUsIHRoaXMuX3VzZXJEYXRhV3JpdGVyLCB0aGlzLl9kZWxlZ2F0ZSwgcmVzdWx0Ll9zbmFwc2hvdCkpKTtcclxuICAgIH1cclxuICAgIG9uU25hcHNob3QoLi4uYXJncykge1xyXG4gICAgICAgIGNvbnN0IG9wdGlvbnMgPSBleHRyYWN0U25hcHNob3RPcHRpb25zKGFyZ3MpO1xyXG4gICAgICAgIGNvbnN0IG9ic2VydmVyID0gd3JhcE9ic2VydmVyKGFyZ3MsIHNuYXAgPT4gbmV3IFF1ZXJ5U25hcHNob3QodGhpcy5maXJlc3RvcmUsIG5ldyBRdWVyeVNuYXBzaG90JDEodGhpcy5maXJlc3RvcmUuX2RlbGVnYXRlLCB0aGlzLl91c2VyRGF0YVdyaXRlciwgdGhpcy5fZGVsZWdhdGUsIHNuYXAuX3NuYXBzaG90KSkpO1xyXG4gICAgICAgIHJldHVybiBvblNuYXBzaG90KHRoaXMuX2RlbGVnYXRlLCBvcHRpb25zLCBvYnNlcnZlcik7XHJcbiAgICB9XHJcbiAgICB3aXRoQ29udmVydGVyKGNvbnZlcnRlcikge1xyXG4gICAgICAgIHJldHVybiBuZXcgUXVlcnkodGhpcy5maXJlc3RvcmUsIGNvbnZlcnRlclxyXG4gICAgICAgICAgICA/IHRoaXMuX2RlbGVnYXRlLndpdGhDb252ZXJ0ZXIoRmlyZXN0b3JlRGF0YUNvbnZlcnRlci5nZXRJbnN0YW5jZSh0aGlzLmZpcmVzdG9yZSwgY29udmVydGVyKSlcclxuICAgICAgICAgICAgOiB0aGlzLl9kZWxlZ2F0ZS53aXRoQ29udmVydGVyKG51bGwpKTtcclxuICAgIH1cclxufVxyXG5jbGFzcyBEb2N1bWVudENoYW5nZSB7XHJcbiAgICBjb25zdHJ1Y3RvcihfZmlyZXN0b3JlLCBfZGVsZWdhdGUpIHtcclxuICAgICAgICB0aGlzLl9maXJlc3RvcmUgPSBfZmlyZXN0b3JlO1xyXG4gICAgICAgIHRoaXMuX2RlbGVnYXRlID0gX2RlbGVnYXRlO1xyXG4gICAgfVxyXG4gICAgZ2V0IHR5cGUoKSB7XHJcbiAgICAgICAgcmV0dXJuIHRoaXMuX2RlbGVnYXRlLnR5cGU7XHJcbiAgICB9XHJcbiAgICBnZXQgZG9jKCkge1xyXG4gICAgICAgIHJldHVybiBuZXcgUXVlcnlEb2N1bWVudFNuYXBzaG90KHRoaXMuX2ZpcmVzdG9yZSwgdGhpcy5fZGVsZWdhdGUuZG9jKTtcclxuICAgIH1cclxuICAgIGdldCBvbGRJbmRleCgpIHtcclxuICAgICAgICByZXR1cm4gdGhpcy5fZGVsZWdhdGUub2xkSW5kZXg7XHJcbiAgICB9XHJcbiAgICBnZXQgbmV3SW5kZXgoKSB7XHJcbiAgICAgICAgcmV0dXJuIHRoaXMuX2RlbGVnYXRlLm5ld0luZGV4O1xyXG4gICAgfVxyXG59XHJcbmNsYXNzIFF1ZXJ5U25hcHNob3Qge1xyXG4gICAgY29uc3RydWN0b3IoX2ZpcmVzdG9yZSwgX2RlbGVnYXRlKSB7XHJcbiAgICAgICAgdGhpcy5fZmlyZXN0b3JlID0gX2ZpcmVzdG9yZTtcclxuICAgICAgICB0aGlzLl9kZWxlZ2F0ZSA9IF9kZWxlZ2F0ZTtcclxuICAgIH1cclxuICAgIGdldCBxdWVyeSgpIHtcclxuICAgICAgICByZXR1cm4gbmV3IFF1ZXJ5KHRoaXMuX2ZpcmVzdG9yZSwgdGhpcy5fZGVsZWdhdGUucXVlcnkpO1xyXG4gICAgfVxyXG4gICAgZ2V0IG1ldGFkYXRhKCkge1xyXG4gICAgICAgIHJldHVybiB0aGlzLl9kZWxlZ2F0ZS5tZXRhZGF0YTtcclxuICAgIH1cclxuICAgIGdldCBzaXplKCkge1xyXG4gICAgICAgIHJldHVybiB0aGlzLl9kZWxlZ2F0ZS5zaXplO1xyXG4gICAgfVxyXG4gICAgZ2V0IGVtcHR5KCkge1xyXG4gICAgICAgIHJldHVybiB0aGlzLl9kZWxlZ2F0ZS5lbXB0eTtcclxuICAgIH1cclxuICAgIGdldCBkb2NzKCkge1xyXG4gICAgICAgIHJldHVybiB0aGlzLl9kZWxlZ2F0ZS5kb2NzLm1hcChkb2MgPT4gbmV3IFF1ZXJ5RG9jdW1lbnRTbmFwc2hvdCh0aGlzLl9maXJlc3RvcmUsIGRvYykpO1xyXG4gICAgfVxyXG4gICAgZG9jQ2hhbmdlcyhvcHRpb25zKSB7XHJcbiAgICAgICAgcmV0dXJuIHRoaXMuX2RlbGVnYXRlXHJcbiAgICAgICAgICAgIC5kb2NDaGFuZ2VzKG9wdGlvbnMpXHJcbiAgICAgICAgICAgIC5tYXAoZG9jQ2hhbmdlID0+IG5ldyBEb2N1bWVudENoYW5nZSh0aGlzLl9maXJlc3RvcmUsIGRvY0NoYW5nZSkpO1xyXG4gICAgfVxyXG4gICAgZm9yRWFjaChjYWxsYmFjaywgdGhpc0FyZykge1xyXG4gICAgICAgIHRoaXMuX2RlbGVnYXRlLmZvckVhY2goc25hcHNob3QgPT4ge1xyXG4gICAgICAgICAgICBjYWxsYmFjay5jYWxsKHRoaXNBcmcsIG5ldyBRdWVyeURvY3VtZW50U25hcHNob3QodGhpcy5fZmlyZXN0b3JlLCBzbmFwc2hvdCkpO1xyXG4gICAgICAgIH0pO1xyXG4gICAgfVxyXG4gICAgaXNFcXVhbChvdGhlcikge1xyXG4gICAgICAgIHJldHVybiBzbmFwc2hvdEVxdWFsKHRoaXMuX2RlbGVnYXRlLCBvdGhlci5fZGVsZWdhdGUpO1xyXG4gICAgfVxyXG59XHJcbmNsYXNzIENvbGxlY3Rpb25SZWZlcmVuY2UgZXh0ZW5kcyBRdWVyeSB7XHJcbiAgICBjb25zdHJ1Y3RvcihmaXJlc3RvcmUsIF9kZWxlZ2F0ZSkge1xyXG4gICAgICAgIHN1cGVyKGZpcmVzdG9yZSwgX2RlbGVnYXRlKTtcclxuICAgICAgICB0aGlzLmZpcmVzdG9yZSA9IGZpcmVzdG9yZTtcclxuICAgICAgICB0aGlzLl9kZWxlZ2F0ZSA9IF9kZWxlZ2F0ZTtcclxuICAgIH1cclxuICAgIGdldCBpZCgpIHtcclxuICAgICAgICByZXR1cm4gdGhpcy5fZGVsZWdhdGUuaWQ7XHJcbiAgICB9XHJcbiAgICBnZXQgcGF0aCgpIHtcclxuICAgICAgICByZXR1cm4gdGhpcy5fZGVsZWdhdGUucGF0aDtcclxuICAgIH1cclxuICAgIGdldCBwYXJlbnQoKSB7XHJcbiAgICAgICAgY29uc3QgZG9jUmVmID0gdGhpcy5fZGVsZWdhdGUucGFyZW50O1xyXG4gICAgICAgIHJldHVybiBkb2NSZWYgPyBuZXcgRG9jdW1lbnRSZWZlcmVuY2UodGhpcy5maXJlc3RvcmUsIGRvY1JlZikgOiBudWxsO1xyXG4gICAgfVxyXG4gICAgZG9jKGRvY3VtZW50UGF0aCkge1xyXG4gICAgICAgIHRyeSB7XHJcbiAgICAgICAgICAgIGlmIChkb2N1bWVudFBhdGggPT09IHVuZGVmaW5lZCkge1xyXG4gICAgICAgICAgICAgICAgLy8gQ2FsbCBgZG9jYCB3aXRob3V0IGBkb2N1bWVudFBhdGhgIGlmIGBkb2N1bWVudFBhdGhgIGlzIGB1bmRlZmluZWRgXHJcbiAgICAgICAgICAgICAgICAvLyBhcyBgZG9jYCB2YWxpZGF0ZXMgdGhlIG51bWJlciBvZiBhcmd1bWVudHMgdG8gcHJldmVudCB1c2VycyBmcm9tXHJcbiAgICAgICAgICAgICAgICAvLyBhY2NpZGVudGFsbHkgcGFzc2luZyBgdW5kZWZpbmVkYC5cclxuICAgICAgICAgICAgICAgIHJldHVybiBuZXcgRG9jdW1lbnRSZWZlcmVuY2UodGhpcy5maXJlc3RvcmUsIGRvYyh0aGlzLl9kZWxlZ2F0ZSkpO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIGVsc2Uge1xyXG4gICAgICAgICAgICAgICAgcmV0dXJuIG5ldyBEb2N1bWVudFJlZmVyZW5jZSh0aGlzLmZpcmVzdG9yZSwgZG9jKHRoaXMuX2RlbGVnYXRlLCBkb2N1bWVudFBhdGgpKTtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgIH1cclxuICAgICAgICBjYXRjaCAoZSkge1xyXG4gICAgICAgICAgICB0aHJvdyByZXBsYWNlRnVuY3Rpb25OYW1lKGUsICdkb2MoKScsICdDb2xsZWN0aW9uUmVmZXJlbmNlLmRvYygpJyk7XHJcbiAgICAgICAgfVxyXG4gICAgfVxyXG4gICAgYWRkKGRhdGEpIHtcclxuICAgICAgICByZXR1cm4gYWRkRG9jKHRoaXMuX2RlbGVnYXRlLCBkYXRhKS50aGVuKGRvY1JlZiA9PiBuZXcgRG9jdW1lbnRSZWZlcmVuY2UodGhpcy5maXJlc3RvcmUsIGRvY1JlZikpO1xyXG4gICAgfVxyXG4gICAgaXNFcXVhbChvdGhlcikge1xyXG4gICAgICAgIHJldHVybiByZWZFcXVhbCh0aGlzLl9kZWxlZ2F0ZSwgb3RoZXIuX2RlbGVnYXRlKTtcclxuICAgIH1cclxuICAgIHdpdGhDb252ZXJ0ZXIoY29udmVydGVyKSB7XHJcbiAgICAgICAgcmV0dXJuIG5ldyBDb2xsZWN0aW9uUmVmZXJlbmNlKHRoaXMuZmlyZXN0b3JlLCBjb252ZXJ0ZXJcclxuICAgICAgICAgICAgPyB0aGlzLl9kZWxlZ2F0ZS53aXRoQ29udmVydGVyKEZpcmVzdG9yZURhdGFDb252ZXJ0ZXIuZ2V0SW5zdGFuY2UodGhpcy5maXJlc3RvcmUsIGNvbnZlcnRlcikpXHJcbiAgICAgICAgICAgIDogdGhpcy5fZGVsZWdhdGUud2l0aENvbnZlcnRlcihudWxsKSk7XHJcbiAgICB9XHJcbn1cclxuZnVuY3Rpb24gY2FzdFJlZmVyZW5jZShkb2N1bWVudFJlZikge1xyXG4gICAgcmV0dXJuIF9jYXN0KGRvY3VtZW50UmVmLCBEb2N1bWVudFJlZmVyZW5jZSQxKTtcclxufVxuXG4vKipcclxuICogQGxpY2Vuc2VcclxuICogQ29weXJpZ2h0IDIwMTcgR29vZ2xlIExMQ1xyXG4gKlxyXG4gKiBMaWNlbnNlZCB1bmRlciB0aGUgQXBhY2hlIExpY2Vuc2UsIFZlcnNpb24gMi4wICh0aGUgXCJMaWNlbnNlXCIpO1xyXG4gKiB5b3UgbWF5IG5vdCB1c2UgdGhpcyBmaWxlIGV4Y2VwdCBpbiBjb21wbGlhbmNlIHdpdGggdGhlIExpY2Vuc2UuXHJcbiAqIFlvdSBtYXkgb2J0YWluIGEgY29weSBvZiB0aGUgTGljZW5zZSBhdFxyXG4gKlxyXG4gKiAgIGh0dHA6Ly93d3cuYXBhY2hlLm9yZy9saWNlbnNlcy9MSUNFTlNFLTIuMFxyXG4gKlxyXG4gKiBVbmxlc3MgcmVxdWlyZWQgYnkgYXBwbGljYWJsZSBsYXcgb3IgYWdyZWVkIHRvIGluIHdyaXRpbmcsIHNvZnR3YXJlXHJcbiAqIGRpc3RyaWJ1dGVkIHVuZGVyIHRoZSBMaWNlbnNlIGlzIGRpc3RyaWJ1dGVkIG9uIGFuIFwiQVMgSVNcIiBCQVNJUyxcclxuICogV0lUSE9VVCBXQVJSQU5USUVTIE9SIENPTkRJVElPTlMgT0YgQU5ZIEtJTkQsIGVpdGhlciBleHByZXNzIG9yIGltcGxpZWQuXHJcbiAqIFNlZSB0aGUgTGljZW5zZSBmb3IgdGhlIHNwZWNpZmljIGxhbmd1YWdlIGdvdmVybmluZyBwZXJtaXNzaW9ucyBhbmRcclxuICogbGltaXRhdGlvbnMgdW5kZXIgdGhlIExpY2Vuc2UuXHJcbiAqL1xyXG4vLyBUaGUgb2JqZWN0cyB0aGF0IGFyZSBhIHBhcnQgb2YgdGhpcyBBUEkgYXJlIGV4cG9zZWQgdG8gdGhpcmQtcGFydGllcyBhc1xyXG4vLyBjb21waWxlZCBqYXZhc2NyaXB0IHNvIHdlIHdhbnQgdG8gZmxhZyBvdXIgcHJpdmF0ZSBtZW1iZXJzIHdpdGggYSBsZWFkaW5nXHJcbi8vIHVuZGVyc2NvcmUgdG8gZGlzY291cmFnZSB0aGVpciB1c2UuXHJcbi8qKlxyXG4gKiBBIGBGaWVsZFBhdGhgIHJlZmVycyB0byBhIGZpZWxkIGluIGEgZG9jdW1lbnQuIFRoZSBwYXRoIG1heSBjb25zaXN0IG9mIGFcclxuICogc2luZ2xlIGZpZWxkIG5hbWUgKHJlZmVycmluZyB0byBhIHRvcC1sZXZlbCBmaWVsZCBpbiB0aGUgZG9jdW1lbnQpLCBvciBhIGxpc3RcclxuICogb2YgZmllbGQgbmFtZXMgKHJlZmVycmluZyB0byBhIG5lc3RlZCBmaWVsZCBpbiB0aGUgZG9jdW1lbnQpLlxyXG4gKi9cclxuY2xhc3MgRmllbGRQYXRoIHtcclxuICAgIC8qKlxyXG4gICAgICogQ3JlYXRlcyBhIEZpZWxkUGF0aCBmcm9tIHRoZSBwcm92aWRlZCBmaWVsZCBuYW1lcy4gSWYgbW9yZSB0aGFuIG9uZSBmaWVsZFxyXG4gICAgICogbmFtZSBpcyBwcm92aWRlZCwgdGhlIHBhdGggd2lsbCBwb2ludCB0byBhIG5lc3RlZCBmaWVsZCBpbiBhIGRvY3VtZW50LlxyXG4gICAgICpcclxuICAgICAqIEBwYXJhbSBmaWVsZE5hbWVzIC0gQSBsaXN0IG9mIGZpZWxkIG5hbWVzLlxyXG4gICAgICovXHJcbiAgICBjb25zdHJ1Y3RvciguLi5maWVsZE5hbWVzKSB7XHJcbiAgICAgICAgdGhpcy5fZGVsZWdhdGUgPSBuZXcgRmllbGRQYXRoJDEoLi4uZmllbGROYW1lcyk7XHJcbiAgICB9XHJcbiAgICBzdGF0aWMgZG9jdW1lbnRJZCgpIHtcclxuICAgICAgICAvKipcclxuICAgICAgICAgKiBJbnRlcm5hbCBOb3RlOiBUaGUgYmFja2VuZCBkb2Vzbid0IHRlY2huaWNhbGx5IHN1cHBvcnQgcXVlcnlpbmcgYnlcclxuICAgICAgICAgKiBkb2N1bWVudCBJRC4gSW5zdGVhZCBpdCBxdWVyaWVzIGJ5IHRoZSBlbnRpcmUgZG9jdW1lbnQgbmFtZSAoZnVsbCBwYXRoXHJcbiAgICAgICAgICogaW5jbHVkZWQpLCBidXQgaW4gdGhlIGNhc2VzIHdlIGN1cnJlbnRseSBzdXBwb3J0IGRvY3VtZW50SWQoKSwgdGhlIG5ldFxyXG4gICAgICAgICAqIGVmZmVjdCBpcyB0aGUgc2FtZS5cclxuICAgICAgICAgKi9cclxuICAgICAgICByZXR1cm4gbmV3IEZpZWxkUGF0aChfRmllbGRQYXRoLmtleUZpZWxkKCkuY2Fub25pY2FsU3RyaW5nKCkpO1xyXG4gICAgfVxyXG4gICAgaXNFcXVhbChvdGhlcikge1xyXG4gICAgICAgIG90aGVyID0gZ2V0TW9kdWxhckluc3RhbmNlKG90aGVyKTtcclxuICAgICAgICBpZiAoIShvdGhlciBpbnN0YW5jZW9mIEZpZWxkUGF0aCQxKSkge1xyXG4gICAgICAgICAgICByZXR1cm4gZmFsc2U7XHJcbiAgICAgICAgfVxyXG4gICAgICAgIHJldHVybiB0aGlzLl9kZWxlZ2F0ZS5faW50ZXJuYWxQYXRoLmlzRXF1YWwob3RoZXIuX2ludGVybmFsUGF0aCk7XHJcbiAgICB9XHJcbn1cblxuLyoqXHJcbiAqIEBsaWNlbnNlXHJcbiAqIENvcHlyaWdodCAyMDE3IEdvb2dsZSBMTENcclxuICpcclxuICogTGljZW5zZWQgdW5kZXIgdGhlIEFwYWNoZSBMaWNlbnNlLCBWZXJzaW9uIDIuMCAodGhlIFwiTGljZW5zZVwiKTtcclxuICogeW91IG1heSBub3QgdXNlIHRoaXMgZmlsZSBleGNlcHQgaW4gY29tcGxpYW5jZSB3aXRoIHRoZSBMaWNlbnNlLlxyXG4gKiBZb3UgbWF5IG9idGFpbiBhIGNvcHkgb2YgdGhlIExpY2Vuc2UgYXRcclxuICpcclxuICogICBodHRwOi8vd3d3LmFwYWNoZS5vcmcvbGljZW5zZXMvTElDRU5TRS0yLjBcclxuICpcclxuICogVW5sZXNzIHJlcXVpcmVkIGJ5IGFwcGxpY2FibGUgbGF3IG9yIGFncmVlZCB0byBpbiB3cml0aW5nLCBzb2Z0d2FyZVxyXG4gKiBkaXN0cmlidXRlZCB1bmRlciB0aGUgTGljZW5zZSBpcyBkaXN0cmlidXRlZCBvbiBhbiBcIkFTIElTXCIgQkFTSVMsXHJcbiAqIFdJVEhPVVQgV0FSUkFOVElFUyBPUiBDT05ESVRJT05TIE9GIEFOWSBLSU5ELCBlaXRoZXIgZXhwcmVzcyBvciBpbXBsaWVkLlxyXG4gKiBTZWUgdGhlIExpY2Vuc2UgZm9yIHRoZSBzcGVjaWZpYyBsYW5ndWFnZSBnb3Zlcm5pbmcgcGVybWlzc2lvbnMgYW5kXHJcbiAqIGxpbWl0YXRpb25zIHVuZGVyIHRoZSBMaWNlbnNlLlxyXG4gKi9cclxuY2xhc3MgRmllbGRWYWx1ZSB7XHJcbiAgICBjb25zdHJ1Y3RvcihfZGVsZWdhdGUpIHtcclxuICAgICAgICB0aGlzLl9kZWxlZ2F0ZSA9IF9kZWxlZ2F0ZTtcclxuICAgIH1cclxuICAgIHN0YXRpYyBzZXJ2ZXJUaW1lc3RhbXAoKSB7XHJcbiAgICAgICAgY29uc3QgZGVsZWdhdGUgPSBzZXJ2ZXJUaW1lc3RhbXAoKTtcclxuICAgICAgICBkZWxlZ2F0ZS5fbWV0aG9kTmFtZSA9ICdGaWVsZFZhbHVlLnNlcnZlclRpbWVzdGFtcCc7XHJcbiAgICAgICAgcmV0dXJuIG5ldyBGaWVsZFZhbHVlKGRlbGVnYXRlKTtcclxuICAgIH1cclxuICAgIHN0YXRpYyBkZWxldGUoKSB7XHJcbiAgICAgICAgY29uc3QgZGVsZWdhdGUgPSBkZWxldGVGaWVsZCgpO1xyXG4gICAgICAgIGRlbGVnYXRlLl9tZXRob2ROYW1lID0gJ0ZpZWxkVmFsdWUuZGVsZXRlJztcclxuICAgICAgICByZXR1cm4gbmV3IEZpZWxkVmFsdWUoZGVsZWdhdGUpO1xyXG4gICAgfVxyXG4gICAgc3RhdGljIGFycmF5VW5pb24oLi4uZWxlbWVudHMpIHtcclxuICAgICAgICBjb25zdCBkZWxlZ2F0ZSA9IGFycmF5VW5pb24oLi4uZWxlbWVudHMpO1xyXG4gICAgICAgIGRlbGVnYXRlLl9tZXRob2ROYW1lID0gJ0ZpZWxkVmFsdWUuYXJyYXlVbmlvbic7XHJcbiAgICAgICAgcmV0dXJuIG5ldyBGaWVsZFZhbHVlKGRlbGVnYXRlKTtcclxuICAgIH1cclxuICAgIHN0YXRpYyBhcnJheVJlbW92ZSguLi5lbGVtZW50cykge1xyXG4gICAgICAgIGNvbnN0IGRlbGVnYXRlID0gYXJyYXlSZW1vdmUoLi4uZWxlbWVudHMpO1xyXG4gICAgICAgIGRlbGVnYXRlLl9tZXRob2ROYW1lID0gJ0ZpZWxkVmFsdWUuYXJyYXlSZW1vdmUnO1xyXG4gICAgICAgIHJldHVybiBuZXcgRmllbGRWYWx1ZShkZWxlZ2F0ZSk7XHJcbiAgICB9XHJcbiAgICBzdGF0aWMgaW5jcmVtZW50KG4pIHtcclxuICAgICAgICBjb25zdCBkZWxlZ2F0ZSA9IGluY3JlbWVudChuKTtcclxuICAgICAgICBkZWxlZ2F0ZS5fbWV0aG9kTmFtZSA9ICdGaWVsZFZhbHVlLmluY3JlbWVudCc7XHJcbiAgICAgICAgcmV0dXJuIG5ldyBGaWVsZFZhbHVlKGRlbGVnYXRlKTtcclxuICAgIH1cclxuICAgIGlzRXF1YWwob3RoZXIpIHtcclxuICAgICAgICByZXR1cm4gdGhpcy5fZGVsZWdhdGUuaXNFcXVhbChvdGhlci5fZGVsZWdhdGUpO1xyXG4gICAgfVxyXG59XG5cbi8qKlxyXG4gKiBAbGljZW5zZVxyXG4gKiBDb3B5cmlnaHQgMjAyMSBHb29nbGUgTExDXHJcbiAqXHJcbiAqIExpY2Vuc2VkIHVuZGVyIHRoZSBBcGFjaGUgTGljZW5zZSwgVmVyc2lvbiAyLjAgKHRoZSBcIkxpY2Vuc2VcIik7XHJcbiAqIHlvdSBtYXkgbm90IHVzZSB0aGlzIGZpbGUgZXhjZXB0IGluIGNvbXBsaWFuY2Ugd2l0aCB0aGUgTGljZW5zZS5cclxuICogWW91IG1heSBvYnRhaW4gYSBjb3B5IG9mIHRoZSBMaWNlbnNlIGF0XHJcbiAqXHJcbiAqICAgaHR0cDovL3d3dy5hcGFjaGUub3JnL2xpY2Vuc2VzL0xJQ0VOU0UtMi4wXHJcbiAqXHJcbiAqIFVubGVzcyByZXF1aXJlZCBieSBhcHBsaWNhYmxlIGxhdyBvciBhZ3JlZWQgdG8gaW4gd3JpdGluZywgc29mdHdhcmVcclxuICogZGlzdHJpYnV0ZWQgdW5kZXIgdGhlIExpY2Vuc2UgaXMgZGlzdHJpYnV0ZWQgb24gYW4gXCJBUyBJU1wiIEJBU0lTLFxyXG4gKiBXSVRIT1VUIFdBUlJBTlRJRVMgT1IgQ09ORElUSU9OUyBPRiBBTlkgS0lORCwgZWl0aGVyIGV4cHJlc3Mgb3IgaW1wbGllZC5cclxuICogU2VlIHRoZSBMaWNlbnNlIGZvciB0aGUgc3BlY2lmaWMgbGFuZ3VhZ2UgZ292ZXJuaW5nIHBlcm1pc3Npb25zIGFuZFxyXG4gKiBsaW1pdGF0aW9ucyB1bmRlciB0aGUgTGljZW5zZS5cclxuICovXHJcbmNvbnN0IGZpcmVzdG9yZU5hbWVzcGFjZSA9IHtcclxuICAgIEZpcmVzdG9yZSxcclxuICAgIEdlb1BvaW50LFxyXG4gICAgVGltZXN0YW1wLFxyXG4gICAgQmxvYixcclxuICAgIFRyYW5zYWN0aW9uLFxyXG4gICAgV3JpdGVCYXRjaCxcclxuICAgIERvY3VtZW50UmVmZXJlbmNlLFxyXG4gICAgRG9jdW1lbnRTbmFwc2hvdCxcclxuICAgIFF1ZXJ5LFxyXG4gICAgUXVlcnlEb2N1bWVudFNuYXBzaG90LFxyXG4gICAgUXVlcnlTbmFwc2hvdCxcclxuICAgIENvbGxlY3Rpb25SZWZlcmVuY2UsXHJcbiAgICBGaWVsZFBhdGgsXHJcbiAgICBGaWVsZFZhbHVlLFxyXG4gICAgc2V0TG9nTGV2ZWwsXHJcbiAgICBDQUNIRV9TSVpFX1VOTElNSVRFRFxyXG59O1xyXG4vKipcclxuICogQ29uZmlndXJlcyBGaXJlc3RvcmUgYXMgcGFydCBvZiB0aGUgRmlyZWJhc2UgU0RLIGJ5IGNhbGxpbmcgcmVnaXN0ZXJDb21wb25lbnQuXHJcbiAqXHJcbiAqIEBwYXJhbSBmaXJlYmFzZSAtIFRoZSBGaXJlYmFzZU5hbWVzcGFjZSB0byByZWdpc3RlciBGaXJlc3RvcmUgd2l0aFxyXG4gKiBAcGFyYW0gZmlyZXN0b3JlRmFjdG9yeSAtIEEgZmFjdG9yeSBmdW5jdGlvbiB0aGF0IHJldHVybnMgYSBuZXcgRmlyZXN0b3JlXHJcbiAqICAgIGluc3RhbmNlLlxyXG4gKi9cclxuZnVuY3Rpb24gY29uZmlndXJlRm9yRmlyZWJhc2UoZmlyZWJhc2UsIGZpcmVzdG9yZUZhY3RvcnkpIHtcclxuICAgIGZpcmViYXNlLklOVEVSTkFMLnJlZ2lzdGVyQ29tcG9uZW50KG5ldyBDb21wb25lbnQoJ2ZpcmVzdG9yZS1jb21wYXQnLCBjb250YWluZXIgPT4ge1xyXG4gICAgICAgIGNvbnN0IGFwcCA9IGNvbnRhaW5lci5nZXRQcm92aWRlcignYXBwLWNvbXBhdCcpLmdldEltbWVkaWF0ZSgpO1xyXG4gICAgICAgIGNvbnN0IGZpcmVzdG9yZUV4cCA9IGNvbnRhaW5lci5nZXRQcm92aWRlcignZmlyZXN0b3JlJykuZ2V0SW1tZWRpYXRlKCk7XHJcbiAgICAgICAgcmV0dXJuIGZpcmVzdG9yZUZhY3RvcnkoYXBwLCBmaXJlc3RvcmVFeHApO1xyXG4gICAgfSwgJ1BVQkxJQycpLnNldFNlcnZpY2VQcm9wcyhPYmplY3QuYXNzaWduKHt9LCBmaXJlc3RvcmVOYW1lc3BhY2UpKSk7XHJcbn1cblxuLyoqXHJcbiAqIEBsaWNlbnNlXHJcbiAqIENvcHlyaWdodCAyMDIwIEdvb2dsZSBMTENcclxuICpcclxuICogTGljZW5zZWQgdW5kZXIgdGhlIEFwYWNoZSBMaWNlbnNlLCBWZXJzaW9uIDIuMCAodGhlIFwiTGljZW5zZVwiKTtcclxuICogeW91IG1heSBub3QgdXNlIHRoaXMgZmlsZSBleGNlcHQgaW4gY29tcGxpYW5jZSB3aXRoIHRoZSBMaWNlbnNlLlxyXG4gKiBZb3UgbWF5IG9idGFpbiBhIGNvcHkgb2YgdGhlIExpY2Vuc2UgYXRcclxuICpcclxuICogICBodHRwOi8vd3d3LmFwYWNoZS5vcmcvbGljZW5zZXMvTElDRU5TRS0yLjBcclxuICpcclxuICogVW5sZXNzIHJlcXVpcmVkIGJ5IGFwcGxpY2FibGUgbGF3IG9yIGFncmVlZCB0byBpbiB3cml0aW5nLCBzb2Z0d2FyZVxyXG4gKiBkaXN0cmlidXRlZCB1bmRlciB0aGUgTGljZW5zZSBpcyBkaXN0cmlidXRlZCBvbiBhbiBcIkFTIElTXCIgQkFTSVMsXHJcbiAqIFdJVEhPVVQgV0FSUkFOVElFUyBPUiBDT05ESVRJT05TIE9GIEFOWSBLSU5ELCBlaXRoZXIgZXhwcmVzcyBvciBpbXBsaWVkLlxyXG4gKiBTZWUgdGhlIExpY2Vuc2UgZm9yIHRoZSBzcGVjaWZpYyBsYW5ndWFnZSBnb3Zlcm5pbmcgcGVybWlzc2lvbnMgYW5kXHJcbiAqIGxpbWl0YXRpb25zIHVuZGVyIHRoZSBMaWNlbnNlLlxyXG4gKi9cclxuLyoqXHJcbiAqIFJlZ2lzdGVycyB0aGUgbWFpbiBGaXJlc3RvcmUgYnVpbGQgd2l0aCB0aGUgY29tcG9uZW50cyBmcmFtZXdvcmsuXHJcbiAqIFBlcnNpc3RlbmNlIGNhbiBiZSBlbmFibGVkIHZpYSBgZmlyZWJhc2UuZmlyZXN0b3JlKCkuZW5hYmxlUGVyc2lzdGVuY2UoKWAuXHJcbiAqL1xyXG5mdW5jdGlvbiByZWdpc3RlckZpcmVzdG9yZShpbnN0YW5jZSkge1xyXG4gICAgY29uZmlndXJlRm9yRmlyZWJhc2UoaW5zdGFuY2UsIChhcHAsIGZpcmVzdG9yZUV4cCkgPT4gbmV3IEZpcmVzdG9yZShhcHAsIGZpcmVzdG9yZUV4cCwgbmV3IEluZGV4ZWREYlBlcnNpc3RlbmNlUHJvdmlkZXIoKSkpO1xyXG4gICAgaW5zdGFuY2UucmVnaXN0ZXJWZXJzaW9uKG5hbWUsIHZlcnNpb24pO1xyXG59XHJcbnJlZ2lzdGVyRmlyZXN0b3JlKGZpcmViYXNlKTtcblxuZXhwb3J0IHsgcmVnaXN0ZXJGaXJlc3RvcmUgfTtcbi8vIyBzb3VyY2VNYXBwaW5nVVJMPWluZGV4LmVzbTIwMTcuanMubWFwXG4iXSwibmFtZXMiOltdLCJzb3VyY2VSb290IjoiIn0=\n//# sourceURL=webpack-internal:///./node_modules/@firebase/firestore-compat/dist/index.esm2017.js\n");

/***/ }),

/***/ "./node_modules/firebase/compat/analytics/dist/index.esm.js":
/*!******************************************************************!*\
  !*** ./node_modules/firebase/compat/analytics/dist/index.esm.js ***!
  \******************************************************************/
/***/ (function(__unused_webpack_module, __webpack_exports__, __webpack_require__) {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony import */ var _firebase_analytics_compat__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! @firebase/analytics-compat */ \"./node_modules/@firebase/analytics-compat/dist/esm/index.esm2017.js\");\n\n//# sourceMappingURL=index.esm.js.map\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiLi9ub2RlX21vZHVsZXMvZmlyZWJhc2UvY29tcGF0L2FuYWx5dGljcy9kaXN0L2luZGV4LmVzbS5qcy5qcyIsIm1hcHBpbmdzIjoiOztBQUFvQztBQUNwQyIsInNvdXJjZXMiOlsid2VicGFjazovL19OX0UvLi9ub2RlX21vZHVsZXMvZmlyZWJhc2UvY29tcGF0L2FuYWx5dGljcy9kaXN0L2luZGV4LmVzbS5qcz9jY2JlIl0sInNvdXJjZXNDb250ZW50IjpbImltcG9ydCAnQGZpcmViYXNlL2FuYWx5dGljcy1jb21wYXQnO1xuLy8jIHNvdXJjZU1hcHBpbmdVUkw9aW5kZXguZXNtLmpzLm1hcFxuIl0sIm5hbWVzIjpbXSwic291cmNlUm9vdCI6IiJ9\n//# sourceURL=webpack-internal:///./node_modules/firebase/compat/analytics/dist/index.esm.js\n");

/***/ }),

/***/ "./node_modules/firebase/compat/app/dist/index.esm.js":
/*!************************************************************!*\
  !*** ./node_modules/firebase/compat/app/dist/index.esm.js ***!
  \************************************************************/
/***/ (function(__unused_webpack_module, __webpack_exports__, __webpack_require__) {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   \"default\": function() { return /* reexport safe */ _firebase_app_compat__WEBPACK_IMPORTED_MODULE_0__[\"default\"]; }\n/* harmony export */ });\n/* harmony import */ var _firebase_app_compat__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! @firebase/app-compat */ \"./node_modules/@firebase/app-compat/dist/esm/index.esm2017.js\");\n\n\n\nvar name = \"firebase\";\nvar version = \"9.8.3\";\n\n/**\r\n * @license\r\n * Copyright 2020 Google LLC\r\n *\r\n * Licensed under the Apache License, Version 2.0 (the \"License\");\r\n * you may not use this file except in compliance with the License.\r\n * You may obtain a copy of the License at\r\n *\r\n *   http://www.apache.org/licenses/LICENSE-2.0\r\n *\r\n * Unless required by applicable law or agreed to in writing, software\r\n * distributed under the License is distributed on an \"AS IS\" BASIS,\r\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\r\n * See the License for the specific language governing permissions and\r\n * limitations under the License.\r\n */\r\n_firebase_app_compat__WEBPACK_IMPORTED_MODULE_0__[\"default\"].registerVersion(name, version, 'app-compat');\n//# sourceMappingURL=index.esm.js.map\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiLi9ub2RlX21vZHVsZXMvZmlyZWJhc2UvY29tcGF0L2FwcC9kaXN0L2luZGV4LmVzbS5qcy5qcyIsIm1hcHBpbmdzIjoiOzs7OztBQUE0QztBQUNHOztBQUUvQztBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsNEVBQXdCO0FBQ3hCIiwic291cmNlcyI6WyJ3ZWJwYWNrOi8vX05fRS8uL25vZGVfbW9kdWxlcy9maXJlYmFzZS9jb21wYXQvYXBwL2Rpc3QvaW5kZXguZXNtLmpzPzZjNGEiXSwic291cmNlc0NvbnRlbnQiOlsiaW1wb3J0IGZpcmViYXNlIGZyb20gJ0BmaXJlYmFzZS9hcHAtY29tcGF0JztcbmV4cG9ydCB7IGRlZmF1bHQgfSBmcm9tICdAZmlyZWJhc2UvYXBwLWNvbXBhdCc7XG5cbnZhciBuYW1lID0gXCJmaXJlYmFzZVwiO1xudmFyIHZlcnNpb24gPSBcIjkuOC4zXCI7XG5cbi8qKlxyXG4gKiBAbGljZW5zZVxyXG4gKiBDb3B5cmlnaHQgMjAyMCBHb29nbGUgTExDXHJcbiAqXHJcbiAqIExpY2Vuc2VkIHVuZGVyIHRoZSBBcGFjaGUgTGljZW5zZSwgVmVyc2lvbiAyLjAgKHRoZSBcIkxpY2Vuc2VcIik7XHJcbiAqIHlvdSBtYXkgbm90IHVzZSB0aGlzIGZpbGUgZXhjZXB0IGluIGNvbXBsaWFuY2Ugd2l0aCB0aGUgTGljZW5zZS5cclxuICogWW91IG1heSBvYnRhaW4gYSBjb3B5IG9mIHRoZSBMaWNlbnNlIGF0XHJcbiAqXHJcbiAqICAgaHR0cDovL3d3dy5hcGFjaGUub3JnL2xpY2Vuc2VzL0xJQ0VOU0UtMi4wXHJcbiAqXHJcbiAqIFVubGVzcyByZXF1aXJlZCBieSBhcHBsaWNhYmxlIGxhdyBvciBhZ3JlZWQgdG8gaW4gd3JpdGluZywgc29mdHdhcmVcclxuICogZGlzdHJpYnV0ZWQgdW5kZXIgdGhlIExpY2Vuc2UgaXMgZGlzdHJpYnV0ZWQgb24gYW4gXCJBUyBJU1wiIEJBU0lTLFxyXG4gKiBXSVRIT1VUIFdBUlJBTlRJRVMgT1IgQ09ORElUSU9OUyBPRiBBTlkgS0lORCwgZWl0aGVyIGV4cHJlc3Mgb3IgaW1wbGllZC5cclxuICogU2VlIHRoZSBMaWNlbnNlIGZvciB0aGUgc3BlY2lmaWMgbGFuZ3VhZ2UgZ292ZXJuaW5nIHBlcm1pc3Npb25zIGFuZFxyXG4gKiBsaW1pdGF0aW9ucyB1bmRlciB0aGUgTGljZW5zZS5cclxuICovXHJcbmZpcmViYXNlLnJlZ2lzdGVyVmVyc2lvbihuYW1lLCB2ZXJzaW9uLCAnYXBwLWNvbXBhdCcpO1xuLy8jIHNvdXJjZU1hcHBpbmdVUkw9aW5kZXguZXNtLmpzLm1hcFxuIl0sIm5hbWVzIjpbXSwic291cmNlUm9vdCI6IiJ9\n//# sourceURL=webpack-internal:///./node_modules/firebase/compat/app/dist/index.esm.js\n");

/***/ }),

/***/ "./node_modules/firebase/compat/auth/dist/index.esm.js":
/*!*************************************************************!*\
  !*** ./node_modules/firebase/compat/auth/dist/index.esm.js ***!
  \*************************************************************/
/***/ (function(__unused_webpack_module, __webpack_exports__, __webpack_require__) {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony import */ var _firebase_auth_compat__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! @firebase/auth-compat */ \"./node_modules/@firebase/auth-compat/dist/index.esm2017.js\");\n\n//# sourceMappingURL=index.esm.js.map\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiLi9ub2RlX21vZHVsZXMvZmlyZWJhc2UvY29tcGF0L2F1dGgvZGlzdC9pbmRleC5lc20uanMuanMiLCJtYXBwaW5ncyI6Ijs7QUFBK0I7QUFDL0IiLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly9fTl9FLy4vbm9kZV9tb2R1bGVzL2ZpcmViYXNlL2NvbXBhdC9hdXRoL2Rpc3QvaW5kZXguZXNtLmpzPzY4M2UiXSwic291cmNlc0NvbnRlbnQiOlsiaW1wb3J0ICdAZmlyZWJhc2UvYXV0aC1jb21wYXQnO1xuLy8jIHNvdXJjZU1hcHBpbmdVUkw9aW5kZXguZXNtLmpzLm1hcFxuIl0sIm5hbWVzIjpbXSwic291cmNlUm9vdCI6IiJ9\n//# sourceURL=webpack-internal:///./node_modules/firebase/compat/auth/dist/index.esm.js\n");

/***/ }),

/***/ "./node_modules/firebase/compat/firestore/dist/index.esm.js":
/*!******************************************************************!*\
  !*** ./node_modules/firebase/compat/firestore/dist/index.esm.js ***!
  \******************************************************************/
/***/ (function(__unused_webpack_module, __webpack_exports__, __webpack_require__) {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony import */ var _firebase_firestore_compat__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! @firebase/firestore-compat */ \"./node_modules/@firebase/firestore-compat/dist/index.esm2017.js\");\n\n//# sourceMappingURL=index.esm.js.map\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiLi9ub2RlX21vZHVsZXMvZmlyZWJhc2UvY29tcGF0L2ZpcmVzdG9yZS9kaXN0L2luZGV4LmVzbS5qcy5qcyIsIm1hcHBpbmdzIjoiOztBQUFvQztBQUNwQyIsInNvdXJjZXMiOlsid2VicGFjazovL19OX0UvLi9ub2RlX21vZHVsZXMvZmlyZWJhc2UvY29tcGF0L2ZpcmVzdG9yZS9kaXN0L2luZGV4LmVzbS5qcz80OTg4Il0sInNvdXJjZXNDb250ZW50IjpbImltcG9ydCAnQGZpcmViYXNlL2ZpcmVzdG9yZS1jb21wYXQnO1xuLy8jIHNvdXJjZU1hcHBpbmdVUkw9aW5kZXguZXNtLmpzLm1hcFxuIl0sIm5hbWVzIjpbXSwic291cmNlUm9vdCI6IiJ9\n//# sourceURL=webpack-internal:///./node_modules/firebase/compat/firestore/dist/index.esm.js\n");

/***/ }),

/***/ "./components/firebase/firebase-config.js":
/*!************************************************!*\
  !*** ./components/firebase/firebase-config.js ***!
  \************************************************/
/***/ (function(module, __webpack_exports__, __webpack_require__) {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   \"addDoc\": function() { return /* reexport safe */ firebase_firestore__WEBPACK_IMPORTED_MODULE_7__.addDoc; },\n/* harmony export */   \"analytics\": function() { return /* binding */ analytics; },\n/* harmony export */   \"auth\": function() { return /* binding */ auth; },\n/* harmony export */   \"collection\": function() { return /* reexport safe */ firebase_firestore__WEBPACK_IMPORTED_MODULE_7__.collection; },\n/* harmony export */   \"db\": function() { return /* binding */ db; },\n/* harmony export */   \"doc\": function() { return /* reexport safe */ firebase_firestore__WEBPACK_IMPORTED_MODULE_7__.doc; },\n/* harmony export */   \"firebaseApp\": function() { return /* binding */ firebaseApp; },\n/* harmony export */   \"getDocs\": function() { return /* reexport safe */ firebase_firestore__WEBPACK_IMPORTED_MODULE_7__.getDocs; },\n/* harmony export */   \"googleAuthProvider\": function() { return /* binding */ googleAuthProvider; },\n/* harmony export */   \"setDoc\": function() { return /* reexport safe */ firebase_firestore__WEBPACK_IMPORTED_MODULE_7__.setDoc; }\n/* harmony export */ });\n/* harmony import */ var firebase_compat_firestore__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! firebase/compat/firestore */ \"./node_modules/firebase/compat/firestore/dist/index.esm.js\");\n/* harmony import */ var firebase_compat_auth__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! firebase/compat/auth */ \"./node_modules/firebase/compat/auth/dist/index.esm.js\");\n/* harmony import */ var firebase_compat_app__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! firebase/compat/app */ \"./node_modules/firebase/compat/app/dist/index.esm.js\");\n/* harmony import */ var firebase_compat_analytics__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! firebase/compat/analytics */ \"./node_modules/firebase/compat/analytics/dist/index.esm.js\");\n/* harmony import */ var firebase_app__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! firebase/app */ \"./node_modules/firebase/app/dist/index.esm.js\");\n/* harmony import */ var firebase_auth__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__(/*! firebase/auth */ \"./node_modules/firebase/auth/dist/index.esm.js\");\n/* harmony import */ var firebase_analytics__WEBPACK_IMPORTED_MODULE_6__ = __webpack_require__(/*! firebase/analytics */ \"./node_modules/firebase/analytics/dist/index.esm.js\");\n/* harmony import */ var firebase_firestore__WEBPACK_IMPORTED_MODULE_7__ = __webpack_require__(/*! firebase/firestore */ \"./node_modules/firebase/firestore/dist/index.esm.js\");\n\n\n\n\n// Import the functions you need from the SDKs you need\n\n\n// Import the functions you need from the SDKs you need\n\n\n// Your web app's Firebase configuration\nvar firebaseConfig = {\n    apiKey: \"AIzaSyBW4BkytN0_cFYzAk9a0ufSFMoAy4QiJpU\",\n    authDomain: \"proyecto2-4854e.firebaseapp.com\",\n    projectId: \"proyecto2-4854e\",\n    storageBucket: \"proyecto2-4854e.appspot.com\",\n    messagingSenderId: \"724845553486\",\n    appId: \"1:724845553486:web:a8518c1626be89fc6d201f\",\n    measurementId: \"G-VYBXPQJ48J\"\n};\nvar analytics;\nvar db;\nvar googleAuthProvider;\nvar auth;\nvar firebaseApp;\nif (firebaseConfig === null || firebaseConfig === void 0 ? void 0 : firebaseConfig.projectId) {\n    // Initialize Firebase\n    firebaseApp = (0,firebase_app__WEBPACK_IMPORTED_MODULE_4__.initializeApp)(firebaseConfig);\n    auth = getAuth(firebaseApp);\n    if (firebaseApp.name && \"object\" !== \"undefined\") {\n        analytics = (0,firebase_analytics__WEBPACK_IMPORTED_MODULE_6__.getAnalytics)(firebaseApp);\n        (0,firebase_analytics__WEBPACK_IMPORTED_MODULE_6__.logEvent)(analytics, \"notification_received\");\n    }\n    // Access Firebase services using shorthand notation\n    db = (0,firebase_firestore__WEBPACK_IMPORTED_MODULE_7__.getFirestore)();\n    googleAuthProvider = new firebase_auth__WEBPACK_IMPORTED_MODULE_5__.GoogleAuthProvider();\n}\n// Initialize Firebase\n\n\n\n;\n    // Wrapped in an IIFE to avoid polluting the global scope\n    ;\n    (function () {\n        var _a, _b;\n        // Legacy CSS implementations will `eval` browser code in a Node.js context\n        // to extract CSS. For backwards compatibility, we need to check we're in a\n        // browser context before continuing.\n        if (typeof self !== 'undefined' &&\n            // AMP / No-JS mode does not inject these helpers:\n            '$RefreshHelpers$' in self) {\n            // @ts-ignore __webpack_module__ is global\n            var currentExports = module.exports;\n            // @ts-ignore __webpack_module__ is global\n            var prevExports = (_b = (_a = module.hot.data) === null || _a === void 0 ? void 0 : _a.prevExports) !== null && _b !== void 0 ? _b : null;\n            // This cannot happen in MainTemplate because the exports mismatch between\n            // templating and execution.\n            self.$RefreshHelpers$.registerExportsForReactRefresh(currentExports, module.id);\n            // A module can be accepted automatically based on its exports, e.g. when\n            // it is a Refresh Boundary.\n            if (self.$RefreshHelpers$.isReactRefreshBoundary(currentExports)) {\n                // Save the previous exports on update so we can compare the boundary\n                // signatures.\n                module.hot.dispose(function (data) {\n                    data.prevExports = currentExports;\n                });\n                // Unconditionally accept an update to this module, we'll check if it's\n                // still a Refresh Boundary later.\n                // @ts-ignore importMeta is replaced in the loader\n                module.hot.accept();\n                // This field is set when the previous version of this module was a\n                // Refresh Boundary, letting us know we need to check for invalidation or\n                // enqueue an update.\n                if (prevExports !== null) {\n                    // A boundary can become ineligible if its exports are incompatible\n                    // with the previous exports.\n                    //\n                    // For example, if you add/remove/change exports, we'll want to\n                    // re-execute the importing modules, and force those components to\n                    // re-render. Similarly, if you convert a class component to a\n                    // function, we want to invalidate the boundary.\n                    if (self.$RefreshHelpers$.shouldInvalidateReactRefreshBoundary(prevExports, currentExports)) {\n                        module.hot.invalidate();\n                    }\n                    else {\n                        self.$RefreshHelpers$.scheduleUpdate();\n                    }\n                }\n            }\n            else {\n                // Since we just executed the code for the module, it's possible that the\n                // new exports made it ineligible for being a boundary.\n                // We only care about the case when we were _previously_ a boundary,\n                // because we already accepted this update (accidental side effect).\n                var isNoLongerABoundary = prevExports !== null;\n                if (isNoLongerABoundary) {\n                    module.hot.invalidate();\n                }\n            }\n        }\n    })();\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiLi9jb21wb25lbnRzL2ZpcmViYXNlL2ZpcmViYXNlLWNvbmZpZy5qcy5qcyIsIm1hcHBpbmdzIjoiOzs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7QUFBbUM7QUFDTDtBQUNEO0FBQ007QUFDbkMsdURBQXVEO0FBQ1Y7QUFFTTtBQU1uRCx1REFBdUQ7QUFFSztBQVNoQztBQUU1Qix3Q0FBd0M7QUFHeEMsSUFBTVUsY0FBYyxHQUFHO0lBQ3JCQyxNQUFNLEVBQUUseUNBQXlDO0lBQ2pEQyxVQUFVLEVBQUUsaUNBQWlDO0lBQzdDQyxTQUFTLEVBQUUsaUJBQWlCO0lBQzVCQyxhQUFhLEVBQUUsNkJBQTZCO0lBQzVDQyxpQkFBaUIsRUFBRSxjQUFjO0lBQ2pDQyxLQUFLLEVBQUUsMkNBQTJDO0lBQ2xEQyxhQUFhLEVBQUUsY0FBYztDQUM5QjtBQU1ELElBQUlDLFNBQVM7QUFBRSxJQUFJQyxFQUFFO0FBQUUsSUFBSUMsa0JBQWtCO0FBQUMsSUFBSUMsSUFBSTtBQUFDLElBQUlDLFdBQVc7QUFDdEUsSUFBSVosY0FBYyxhQUFkQSxjQUFjLFdBQVcsR0FBekJBLEtBQUFBLENBQXlCLEdBQXpCQSxjQUFjLENBQUVHLFNBQVMsRUFBRTtJQUM3QixzQkFBc0I7SUFDdEJTLFdBQVcsR0FBR3RCLDJEQUFhLENBQUNVLGNBQWMsQ0FBQyxDQUFDO0lBRTVDVyxJQUFJLEdBQUdFLE9BQU8sQ0FBQ0QsV0FBVyxDQUFDLENBQUM7SUFFNUIsSUFBSUEsV0FBVyxDQUFDRSxJQUFJLElBQUksUUFBYSxLQUFLLFdBQVcsRUFBRTtRQUNyRE4sU0FBUyxHQUFHaEIsZ0VBQVksQ0FBQ29CLFdBQVcsQ0FBQyxDQUFDO1FBQ3RDbkIsNERBQVEsQ0FBQ2UsU0FBUyxFQUFFLHVCQUF1QixDQUFDLENBQUM7S0FDOUM7SUFFRCxvREFBb0Q7SUFDcERDLEVBQUUsR0FBR2YsZ0VBQVksRUFBRSxDQUFDO0lBQ3BCZ0Isa0JBQWtCLEdBQUcsSUFBSW5CLDZEQUFrQixFQUFFLENBQUM7Q0FDN0M7QUFJSCxzQkFBc0I7QUFzQnBCIiwic291cmNlcyI6WyJ3ZWJwYWNrOi8vX05fRS8uL2NvbXBvbmVudHMvZmlyZWJhc2UvZmlyZWJhc2UtY29uZmlnLmpzP2VmMDUiXSwic291cmNlc0NvbnRlbnQiOlsiaW1wb3J0IFwiZmlyZWJhc2UvY29tcGF0L2ZpcmVzdG9yZVwiO1xyXG5pbXBvcnQgXCJmaXJlYmFzZS9jb21wYXQvYXV0aFwiO1xyXG5pbXBvcnQgXCJmaXJlYmFzZS9jb21wYXQvYXBwXCI7XHJcbmltcG9ydCBcImZpcmViYXNlL2NvbXBhdC9hbmFseXRpY3NcIjtcclxuLy8gSW1wb3J0IHRoZSBmdW5jdGlvbnMgeW91IG5lZWQgZnJvbSB0aGUgU0RLcyB5b3UgbmVlZFxyXG5pbXBvcnQgeyBpbml0aWFsaXplQXBwIH0gZnJvbSBcImZpcmViYXNlL2FwcFwiO1xyXG5cclxuaW1wb3J0IHsgR29vZ2xlQXV0aFByb3ZpZGVyIH0gZnJvbSBcImZpcmViYXNlL2F1dGhcIjtcclxuXHJcblxyXG5cclxuXHJcblxyXG4vLyBJbXBvcnQgdGhlIGZ1bmN0aW9ucyB5b3UgbmVlZCBmcm9tIHRoZSBTREtzIHlvdSBuZWVkXHJcblxyXG5pbXBvcnQgeyBnZXRBbmFseXRpY3MsIGxvZ0V2ZW50IH0gZnJvbSBcImZpcmViYXNlL2FuYWx5dGljc1wiO1xyXG5pbXBvcnQge1xyXG4gIGdldEZpcmVzdG9yZSxcclxuICBkb2MsXHJcbiAgc2V0RG9jLFxyXG4gIFxyXG4gIGNvbGxlY3Rpb24sXHJcbiAgYWRkRG9jLFxyXG4gIGdldERvY3MsXHJcbn0gZnJvbSBcImZpcmViYXNlL2ZpcmVzdG9yZVwiO1xyXG5cclxuLy8gWW91ciB3ZWIgYXBwJ3MgRmlyZWJhc2UgY29uZmlndXJhdGlvblxyXG5cclxuXHJcbmNvbnN0IGZpcmViYXNlQ29uZmlnID0ge1xyXG4gIGFwaUtleTogXCJBSXphU3lCVzRCa3l0TjBfY0ZZekFrOWEwdWZTRk1vQXk0UWlKcFVcIixcclxuICBhdXRoRG9tYWluOiBcInByb3llY3RvMi00ODU0ZS5maXJlYmFzZWFwcC5jb21cIixcclxuICBwcm9qZWN0SWQ6IFwicHJveWVjdG8yLTQ4NTRlXCIsXHJcbiAgc3RvcmFnZUJ1Y2tldDogXCJwcm95ZWN0bzItNDg1NGUuYXBwc3BvdC5jb21cIixcclxuICBtZXNzYWdpbmdTZW5kZXJJZDogXCI3MjQ4NDU1NTM0ODZcIixcclxuICBhcHBJZDogXCIxOjcyNDg0NTU1MzQ4Njp3ZWI6YTg1MThjMTYyNmJlODlmYzZkMjAxZlwiLFxyXG4gIG1lYXN1cmVtZW50SWQ6IFwiRy1WWUJYUFFKNDhKXCJcclxufTtcclxuXHJcblxyXG5cclxuXHJcblxyXG5sZXQgYW5hbHl0aWNzOyBsZXQgZGI7IGxldCBnb29nbGVBdXRoUHJvdmlkZXI7bGV0IGF1dGg7bGV0IGZpcmViYXNlQXBwO1xyXG5pZiAoZmlyZWJhc2VDb25maWc/LnByb2plY3RJZCkge1xyXG4gIC8vIEluaXRpYWxpemUgRmlyZWJhc2VcclxuICBmaXJlYmFzZUFwcCA9IGluaXRpYWxpemVBcHAoZmlyZWJhc2VDb25maWcpO1xyXG4gIFxyXG4gIGF1dGggPSBnZXRBdXRoKGZpcmViYXNlQXBwKTtcclxuICBcclxuICBpZiAoZmlyZWJhc2VBcHAubmFtZSAmJiB0eXBlb2Ygd2luZG93ICE9PSAndW5kZWZpbmVkJykge1xyXG4gICAgYW5hbHl0aWNzID0gZ2V0QW5hbHl0aWNzKGZpcmViYXNlQXBwKTtcclxuICAgIGxvZ0V2ZW50KGFuYWx5dGljcywgJ25vdGlmaWNhdGlvbl9yZWNlaXZlZCcpO1xyXG4gIH1cclxuICBcclxuICAvLyBBY2Nlc3MgRmlyZWJhc2Ugc2VydmljZXMgdXNpbmcgc2hvcnRoYW5kIG5vdGF0aW9uXHJcbiAgZGIgPSBnZXRGaXJlc3RvcmUoKTtcclxuICBnb29nbGVBdXRoUHJvdmlkZXIgPSBuZXcgR29vZ2xlQXV0aFByb3ZpZGVyKCk7XHJcbiAgfVxyXG5cclxuXHJcblxyXG4vLyBJbml0aWFsaXplIEZpcmViYXNlXHJcblxyXG5cclxuXHJcblxyXG5cclxuXHJcblxyXG5cclxuXHJcbmV4cG9ydCB7XHJcbiAgXHJcbiAgYXV0aCxcclxuICBkYixcclxuICBmaXJlYmFzZUFwcCxcclxuICBkb2MsIC8vUmVmZXJlbmNpYSBhIGRvY3VtZW50byBlbiBGaXJlc3RvcmVcclxuICBzZXREb2MsIC8vIFNldGVhIERhdG9zIGVuIGxhIGJhc2UgZGUgRmlyZXN0b3JlLFxyXG4gIGNvbGxlY3Rpb24sXHJcbiAgZ2V0RG9jcyxcclxuICBhZGREb2MsXHJcbiAgZ29vZ2xlQXV0aFByb3ZpZGVyLFxyXG4gIGFuYWx5dGljc1xyXG59OyBcclxuXHJcblxyXG5cclxuIl0sIm5hbWVzIjpbImluaXRpYWxpemVBcHAiLCJHb29nbGVBdXRoUHJvdmlkZXIiLCJnZXRBbmFseXRpY3MiLCJsb2dFdmVudCIsImdldEZpcmVzdG9yZSIsImRvYyIsInNldERvYyIsImNvbGxlY3Rpb24iLCJhZGREb2MiLCJnZXREb2NzIiwiZmlyZWJhc2VDb25maWciLCJhcGlLZXkiLCJhdXRoRG9tYWluIiwicHJvamVjdElkIiwic3RvcmFnZUJ1Y2tldCIsIm1lc3NhZ2luZ1NlbmRlcklkIiwiYXBwSWQiLCJtZWFzdXJlbWVudElkIiwiYW5hbHl0aWNzIiwiZGIiLCJnb29nbGVBdXRoUHJvdmlkZXIiLCJhdXRoIiwiZmlyZWJhc2VBcHAiLCJnZXRBdXRoIiwibmFtZSJdLCJzb3VyY2VSb290IjoiIn0=\n//# sourceURL=webpack-internal:///./components/firebase/firebase-config.js\n");

/***/ }),

/***/ "./node_modules/@firebase/analytics-compat/dist/esm/index.esm2017.js":
/*!***************************************************************************!*\
  !*** ./node_modules/@firebase/analytics-compat/dist/esm/index.esm2017.js ***!
  \***************************************************************************/
/***/ (function(__unused_webpack___webpack_module__, __webpack_exports__, __webpack_require__) {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   \"registerAnalytics\": function() { return /* binding */ registerAnalytics; }\n/* harmony export */ });\n/* harmony import */ var _firebase_app_compat__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! @firebase/app-compat */ \"./node_modules/@firebase/app-compat/dist/esm/index.esm2017.js\");\n/* harmony import */ var _firebase_analytics__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! @firebase/analytics */ \"./node_modules/@firebase/analytics/dist/esm/index.esm2017.js\");\n/* harmony import */ var _firebase_component__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! @firebase/component */ \"./node_modules/@firebase/component/dist/esm/index.esm2017.js\");\n\n\n\n\nconst name = \"@firebase/analytics-compat\";\nconst version = \"0.1.11\";\n\n/**\r\n * @license\r\n * Copyright 2020 Google LLC\r\n *\r\n * Licensed under the Apache License, Version 2.0 (the \"License\");\r\n * you may not use this file except in compliance with the License.\r\n * You may obtain a copy of the License at\r\n *\r\n *   http://www.apache.org/licenses/LICENSE-2.0\r\n *\r\n * Unless required by applicable law or agreed to in writing, software\r\n * distributed under the License is distributed on an \"AS IS\" BASIS,\r\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\r\n * See the License for the specific language governing permissions and\r\n * limitations under the License.\r\n */\r\nclass AnalyticsService {\r\n    constructor(app, _delegate) {\r\n        this.app = app;\r\n        this._delegate = _delegate;\r\n    }\r\n    logEvent(eventName, eventParams, options) {\r\n        (0,_firebase_analytics__WEBPACK_IMPORTED_MODULE_1__.logEvent)(this._delegate, eventName, eventParams, options);\r\n    }\r\n    /**\r\n     * @deprecated Use {@link logEvent} with `eventName` as 'screen_view' and add relevant `eventParams`.\r\n     * See {@link https://firebase.google.com/docs/analytics/screenviews | Track Screenviews}.\r\n     */\r\n    setCurrentScreen(screenName, options) {\r\n        (0,_firebase_analytics__WEBPACK_IMPORTED_MODULE_1__.setCurrentScreen)(this._delegate, screenName, options);\r\n    }\r\n    setUserId(id, options) {\r\n        (0,_firebase_analytics__WEBPACK_IMPORTED_MODULE_1__.setUserId)(this._delegate, id, options);\r\n    }\r\n    setUserProperties(properties, options) {\r\n        (0,_firebase_analytics__WEBPACK_IMPORTED_MODULE_1__.setUserProperties)(this._delegate, properties, options);\r\n    }\r\n    setAnalyticsCollectionEnabled(enabled) {\r\n        (0,_firebase_analytics__WEBPACK_IMPORTED_MODULE_1__.setAnalyticsCollectionEnabled)(this._delegate, enabled);\r\n    }\r\n}\n\n/**\r\n * @license\r\n * Copyright 2021 Google LLC\r\n *\r\n * Licensed under the Apache License, Version 2.0 (the \"License\");\r\n * you may not use this file except in compliance with the License.\r\n * You may obtain a copy of the License at\r\n *\r\n *   http://www.apache.org/licenses/LICENSE-2.0\r\n *\r\n * Unless required by applicable law or agreed to in writing, software\r\n * distributed under the License is distributed on an \"AS IS\" BASIS,\r\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\r\n * See the License for the specific language governing permissions and\r\n * limitations under the License.\r\n */\r\n/**\r\n * Officially recommended event names for gtag.js\r\n * Any other string is also allowed.\r\n */\r\nvar EventName;\r\n(function (EventName) {\r\n    EventName[\"ADD_SHIPPING_INFO\"] = \"add_shipping_info\";\r\n    EventName[\"ADD_PAYMENT_INFO\"] = \"add_payment_info\";\r\n    EventName[\"ADD_TO_CART\"] = \"add_to_cart\";\r\n    EventName[\"ADD_TO_WISHLIST\"] = \"add_to_wishlist\";\r\n    EventName[\"BEGIN_CHECKOUT\"] = \"begin_checkout\";\r\n    /**\r\n     * @deprecated\r\n     * This event name is deprecated and is unsupported in updated\r\n     * Enhanced Ecommerce reports.\r\n     */\r\n    EventName[\"CHECKOUT_PROGRESS\"] = \"checkout_progress\";\r\n    EventName[\"EXCEPTION\"] = \"exception\";\r\n    EventName[\"GENERATE_LEAD\"] = \"generate_lead\";\r\n    EventName[\"LOGIN\"] = \"login\";\r\n    EventName[\"PAGE_VIEW\"] = \"page_view\";\r\n    EventName[\"PURCHASE\"] = \"purchase\";\r\n    EventName[\"REFUND\"] = \"refund\";\r\n    EventName[\"REMOVE_FROM_CART\"] = \"remove_from_cart\";\r\n    EventName[\"SCREEN_VIEW\"] = \"screen_view\";\r\n    EventName[\"SEARCH\"] = \"search\";\r\n    EventName[\"SELECT_CONTENT\"] = \"select_content\";\r\n    EventName[\"SELECT_ITEM\"] = \"select_item\";\r\n    EventName[\"SELECT_PROMOTION\"] = \"select_promotion\";\r\n    /** @deprecated */\r\n    EventName[\"SET_CHECKOUT_OPTION\"] = \"set_checkout_option\";\r\n    EventName[\"SHARE\"] = \"share\";\r\n    EventName[\"SIGN_UP\"] = \"sign_up\";\r\n    EventName[\"TIMING_COMPLETE\"] = \"timing_complete\";\r\n    EventName[\"VIEW_CART\"] = \"view_cart\";\r\n    EventName[\"VIEW_ITEM\"] = \"view_item\";\r\n    EventName[\"VIEW_ITEM_LIST\"] = \"view_item_list\";\r\n    EventName[\"VIEW_PROMOTION\"] = \"view_promotion\";\r\n    EventName[\"VIEW_SEARCH_RESULTS\"] = \"view_search_results\";\r\n})(EventName || (EventName = {}));\n\n/**\r\n * @license\r\n * Copyright 2021 Google LLC\r\n *\r\n * Licensed under the Apache License, Version 2.0 (the \"License\");\r\n * you may not use this file except in compliance with the License.\r\n * You may obtain a copy of the License at\r\n *\r\n *   http://www.apache.org/licenses/LICENSE-2.0\r\n *\r\n * Unless required by applicable law or agreed to in writing, software\r\n * distributed under the License is distributed on an \"AS IS\" BASIS,\r\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\r\n * See the License for the specific language governing permissions and\r\n * limitations under the License.\r\n */\r\nconst factory = (container) => {\r\n    // Dependencies\r\n    const app = container.getProvider('app-compat').getImmediate();\r\n    const analyticsServiceExp = container.getProvider('analytics').getImmediate();\r\n    return new AnalyticsService(app, analyticsServiceExp);\r\n};\r\nfunction registerAnalytics() {\r\n    const namespaceExports = {\r\n        Analytics: AnalyticsService,\r\n        settings: _firebase_analytics__WEBPACK_IMPORTED_MODULE_1__.settings,\r\n        isSupported: _firebase_analytics__WEBPACK_IMPORTED_MODULE_1__.isSupported,\r\n        // We removed this enum in exp so need to re-create it here for compat.\r\n        EventName\r\n    };\r\n    _firebase_app_compat__WEBPACK_IMPORTED_MODULE_0__[\"default\"].INTERNAL.registerComponent(new _firebase_component__WEBPACK_IMPORTED_MODULE_2__.Component('analytics-compat', factory, \"PUBLIC\" /* PUBLIC */)\r\n        .setServiceProps(namespaceExports)\r\n        .setMultipleInstances(true));\r\n}\r\nregisterAnalytics();\r\n_firebase_app_compat__WEBPACK_IMPORTED_MODULE_0__[\"default\"].registerVersion(name, version);\n\n\n//# sourceMappingURL=index.esm2017.js.map\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiLi9ub2RlX21vZHVsZXMvQGZpcmViYXNlL2FuYWx5dGljcy1jb21wYXQvZGlzdC9lc20vaW5kZXguZXNtMjAxNy5qcy5qcyIsIm1hcHBpbmdzIjoiOzs7Ozs7O0FBQTRDO0FBQ3lHO0FBQ3JHOztBQUVoRDtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsUUFBUSw2REFBUTtBQUNoQjtBQUNBO0FBQ0Esd0JBQXdCLGdCQUFnQjtBQUN4QyxZQUFZLGlGQUFpRjtBQUM3RjtBQUNBO0FBQ0EsUUFBUSxxRUFBZ0I7QUFDeEI7QUFDQTtBQUNBLFFBQVEsOERBQVM7QUFDakI7QUFDQTtBQUNBLFFBQVEsc0VBQWlCO0FBQ3pCO0FBQ0E7QUFDQSxRQUFRLGtGQUE2QjtBQUNyQztBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsQ0FBQyw4QkFBOEI7O0FBRS9CO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0Esa0JBQWtCLHlEQUFRO0FBQzFCLHFCQUFxQiw0REFBVztBQUNoQztBQUNBO0FBQ0E7QUFDQSxJQUFJLHVGQUFtQyxLQUFLLDBEQUFTO0FBQ3JEO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsNEVBQXdCOztBQUVLO0FBQzdCIiwic291cmNlcyI6WyJ3ZWJwYWNrOi8vX05fRS8uL25vZGVfbW9kdWxlcy9AZmlyZWJhc2UvYW5hbHl0aWNzLWNvbXBhdC9kaXN0L2VzbS9pbmRleC5lc20yMDE3LmpzPzE0MWUiXSwic291cmNlc0NvbnRlbnQiOlsiaW1wb3J0IGZpcmViYXNlIGZyb20gJ0BmaXJlYmFzZS9hcHAtY29tcGF0JztcbmltcG9ydCB7IGxvZ0V2ZW50LCBzZXRDdXJyZW50U2NyZWVuLCBzZXRVc2VySWQsIHNldFVzZXJQcm9wZXJ0aWVzLCBzZXRBbmFseXRpY3NDb2xsZWN0aW9uRW5hYmxlZCwgc2V0dGluZ3MsIGlzU3VwcG9ydGVkIH0gZnJvbSAnQGZpcmViYXNlL2FuYWx5dGljcyc7XG5pbXBvcnQgeyBDb21wb25lbnQgfSBmcm9tICdAZmlyZWJhc2UvY29tcG9uZW50JztcblxuY29uc3QgbmFtZSA9IFwiQGZpcmViYXNlL2FuYWx5dGljcy1jb21wYXRcIjtcbmNvbnN0IHZlcnNpb24gPSBcIjAuMS4xMVwiO1xuXG4vKipcclxuICogQGxpY2Vuc2VcclxuICogQ29weXJpZ2h0IDIwMjAgR29vZ2xlIExMQ1xyXG4gKlxyXG4gKiBMaWNlbnNlZCB1bmRlciB0aGUgQXBhY2hlIExpY2Vuc2UsIFZlcnNpb24gMi4wICh0aGUgXCJMaWNlbnNlXCIpO1xyXG4gKiB5b3UgbWF5IG5vdCB1c2UgdGhpcyBmaWxlIGV4Y2VwdCBpbiBjb21wbGlhbmNlIHdpdGggdGhlIExpY2Vuc2UuXHJcbiAqIFlvdSBtYXkgb2J0YWluIGEgY29weSBvZiB0aGUgTGljZW5zZSBhdFxyXG4gKlxyXG4gKiAgIGh0dHA6Ly93d3cuYXBhY2hlLm9yZy9saWNlbnNlcy9MSUNFTlNFLTIuMFxyXG4gKlxyXG4gKiBVbmxlc3MgcmVxdWlyZWQgYnkgYXBwbGljYWJsZSBsYXcgb3IgYWdyZWVkIHRvIGluIHdyaXRpbmcsIHNvZnR3YXJlXHJcbiAqIGRpc3RyaWJ1dGVkIHVuZGVyIHRoZSBMaWNlbnNlIGlzIGRpc3RyaWJ1dGVkIG9uIGFuIFwiQVMgSVNcIiBCQVNJUyxcclxuICogV0lUSE9VVCBXQVJSQU5USUVTIE9SIENPTkRJVElPTlMgT0YgQU5ZIEtJTkQsIGVpdGhlciBleHByZXNzIG9yIGltcGxpZWQuXHJcbiAqIFNlZSB0aGUgTGljZW5zZSBmb3IgdGhlIHNwZWNpZmljIGxhbmd1YWdlIGdvdmVybmluZyBwZXJtaXNzaW9ucyBhbmRcclxuICogbGltaXRhdGlvbnMgdW5kZXIgdGhlIExpY2Vuc2UuXHJcbiAqL1xyXG5jbGFzcyBBbmFseXRpY3NTZXJ2aWNlIHtcclxuICAgIGNvbnN0cnVjdG9yKGFwcCwgX2RlbGVnYXRlKSB7XHJcbiAgICAgICAgdGhpcy5hcHAgPSBhcHA7XHJcbiAgICAgICAgdGhpcy5fZGVsZWdhdGUgPSBfZGVsZWdhdGU7XHJcbiAgICB9XHJcbiAgICBsb2dFdmVudChldmVudE5hbWUsIGV2ZW50UGFyYW1zLCBvcHRpb25zKSB7XHJcbiAgICAgICAgbG9nRXZlbnQodGhpcy5fZGVsZWdhdGUsIGV2ZW50TmFtZSwgZXZlbnRQYXJhbXMsIG9wdGlvbnMpO1xyXG4gICAgfVxyXG4gICAgLyoqXHJcbiAgICAgKiBAZGVwcmVjYXRlZCBVc2Uge0BsaW5rIGxvZ0V2ZW50fSB3aXRoIGBldmVudE5hbWVgIGFzICdzY3JlZW5fdmlldycgYW5kIGFkZCByZWxldmFudCBgZXZlbnRQYXJhbXNgLlxyXG4gICAgICogU2VlIHtAbGluayBodHRwczovL2ZpcmViYXNlLmdvb2dsZS5jb20vZG9jcy9hbmFseXRpY3Mvc2NyZWVudmlld3MgfCBUcmFjayBTY3JlZW52aWV3c30uXHJcbiAgICAgKi9cclxuICAgIHNldEN1cnJlbnRTY3JlZW4oc2NyZWVuTmFtZSwgb3B0aW9ucykge1xyXG4gICAgICAgIHNldEN1cnJlbnRTY3JlZW4odGhpcy5fZGVsZWdhdGUsIHNjcmVlbk5hbWUsIG9wdGlvbnMpO1xyXG4gICAgfVxyXG4gICAgc2V0VXNlcklkKGlkLCBvcHRpb25zKSB7XHJcbiAgICAgICAgc2V0VXNlcklkKHRoaXMuX2RlbGVnYXRlLCBpZCwgb3B0aW9ucyk7XHJcbiAgICB9XHJcbiAgICBzZXRVc2VyUHJvcGVydGllcyhwcm9wZXJ0aWVzLCBvcHRpb25zKSB7XHJcbiAgICAgICAgc2V0VXNlclByb3BlcnRpZXModGhpcy5fZGVsZWdhdGUsIHByb3BlcnRpZXMsIG9wdGlvbnMpO1xyXG4gICAgfVxyXG4gICAgc2V0QW5hbHl0aWNzQ29sbGVjdGlvbkVuYWJsZWQoZW5hYmxlZCkge1xyXG4gICAgICAgIHNldEFuYWx5dGljc0NvbGxlY3Rpb25FbmFibGVkKHRoaXMuX2RlbGVnYXRlLCBlbmFibGVkKTtcclxuICAgIH1cclxufVxuXG4vKipcclxuICogQGxpY2Vuc2VcclxuICogQ29weXJpZ2h0IDIwMjEgR29vZ2xlIExMQ1xyXG4gKlxyXG4gKiBMaWNlbnNlZCB1bmRlciB0aGUgQXBhY2hlIExpY2Vuc2UsIFZlcnNpb24gMi4wICh0aGUgXCJMaWNlbnNlXCIpO1xyXG4gKiB5b3UgbWF5IG5vdCB1c2UgdGhpcyBmaWxlIGV4Y2VwdCBpbiBjb21wbGlhbmNlIHdpdGggdGhlIExpY2Vuc2UuXHJcbiAqIFlvdSBtYXkgb2J0YWluIGEgY29weSBvZiB0aGUgTGljZW5zZSBhdFxyXG4gKlxyXG4gKiAgIGh0dHA6Ly93d3cuYXBhY2hlLm9yZy9saWNlbnNlcy9MSUNFTlNFLTIuMFxyXG4gKlxyXG4gKiBVbmxlc3MgcmVxdWlyZWQgYnkgYXBwbGljYWJsZSBsYXcgb3IgYWdyZWVkIHRvIGluIHdyaXRpbmcsIHNvZnR3YXJlXHJcbiAqIGRpc3RyaWJ1dGVkIHVuZGVyIHRoZSBMaWNlbnNlIGlzIGRpc3RyaWJ1dGVkIG9uIGFuIFwiQVMgSVNcIiBCQVNJUyxcclxuICogV0lUSE9VVCBXQVJSQU5USUVTIE9SIENPTkRJVElPTlMgT0YgQU5ZIEtJTkQsIGVpdGhlciBleHByZXNzIG9yIGltcGxpZWQuXHJcbiAqIFNlZSB0aGUgTGljZW5zZSBmb3IgdGhlIHNwZWNpZmljIGxhbmd1YWdlIGdvdmVybmluZyBwZXJtaXNzaW9ucyBhbmRcclxuICogbGltaXRhdGlvbnMgdW5kZXIgdGhlIExpY2Vuc2UuXHJcbiAqL1xyXG4vKipcclxuICogT2ZmaWNpYWxseSByZWNvbW1lbmRlZCBldmVudCBuYW1lcyBmb3IgZ3RhZy5qc1xyXG4gKiBBbnkgb3RoZXIgc3RyaW5nIGlzIGFsc28gYWxsb3dlZC5cclxuICovXHJcbnZhciBFdmVudE5hbWU7XHJcbihmdW5jdGlvbiAoRXZlbnROYW1lKSB7XHJcbiAgICBFdmVudE5hbWVbXCJBRERfU0hJUFBJTkdfSU5GT1wiXSA9IFwiYWRkX3NoaXBwaW5nX2luZm9cIjtcclxuICAgIEV2ZW50TmFtZVtcIkFERF9QQVlNRU5UX0lORk9cIl0gPSBcImFkZF9wYXltZW50X2luZm9cIjtcclxuICAgIEV2ZW50TmFtZVtcIkFERF9UT19DQVJUXCJdID0gXCJhZGRfdG9fY2FydFwiO1xyXG4gICAgRXZlbnROYW1lW1wiQUREX1RPX1dJU0hMSVNUXCJdID0gXCJhZGRfdG9fd2lzaGxpc3RcIjtcclxuICAgIEV2ZW50TmFtZVtcIkJFR0lOX0NIRUNLT1VUXCJdID0gXCJiZWdpbl9jaGVja291dFwiO1xyXG4gICAgLyoqXHJcbiAgICAgKiBAZGVwcmVjYXRlZFxyXG4gICAgICogVGhpcyBldmVudCBuYW1lIGlzIGRlcHJlY2F0ZWQgYW5kIGlzIHVuc3VwcG9ydGVkIGluIHVwZGF0ZWRcclxuICAgICAqIEVuaGFuY2VkIEVjb21tZXJjZSByZXBvcnRzLlxyXG4gICAgICovXHJcbiAgICBFdmVudE5hbWVbXCJDSEVDS09VVF9QUk9HUkVTU1wiXSA9IFwiY2hlY2tvdXRfcHJvZ3Jlc3NcIjtcclxuICAgIEV2ZW50TmFtZVtcIkVYQ0VQVElPTlwiXSA9IFwiZXhjZXB0aW9uXCI7XHJcbiAgICBFdmVudE5hbWVbXCJHRU5FUkFURV9MRUFEXCJdID0gXCJnZW5lcmF0ZV9sZWFkXCI7XHJcbiAgICBFdmVudE5hbWVbXCJMT0dJTlwiXSA9IFwibG9naW5cIjtcclxuICAgIEV2ZW50TmFtZVtcIlBBR0VfVklFV1wiXSA9IFwicGFnZV92aWV3XCI7XHJcbiAgICBFdmVudE5hbWVbXCJQVVJDSEFTRVwiXSA9IFwicHVyY2hhc2VcIjtcclxuICAgIEV2ZW50TmFtZVtcIlJFRlVORFwiXSA9IFwicmVmdW5kXCI7XHJcbiAgICBFdmVudE5hbWVbXCJSRU1PVkVfRlJPTV9DQVJUXCJdID0gXCJyZW1vdmVfZnJvbV9jYXJ0XCI7XHJcbiAgICBFdmVudE5hbWVbXCJTQ1JFRU5fVklFV1wiXSA9IFwic2NyZWVuX3ZpZXdcIjtcclxuICAgIEV2ZW50TmFtZVtcIlNFQVJDSFwiXSA9IFwic2VhcmNoXCI7XHJcbiAgICBFdmVudE5hbWVbXCJTRUxFQ1RfQ09OVEVOVFwiXSA9IFwic2VsZWN0X2NvbnRlbnRcIjtcclxuICAgIEV2ZW50TmFtZVtcIlNFTEVDVF9JVEVNXCJdID0gXCJzZWxlY3RfaXRlbVwiO1xyXG4gICAgRXZlbnROYW1lW1wiU0VMRUNUX1BST01PVElPTlwiXSA9IFwic2VsZWN0X3Byb21vdGlvblwiO1xyXG4gICAgLyoqIEBkZXByZWNhdGVkICovXHJcbiAgICBFdmVudE5hbWVbXCJTRVRfQ0hFQ0tPVVRfT1BUSU9OXCJdID0gXCJzZXRfY2hlY2tvdXRfb3B0aW9uXCI7XHJcbiAgICBFdmVudE5hbWVbXCJTSEFSRVwiXSA9IFwic2hhcmVcIjtcclxuICAgIEV2ZW50TmFtZVtcIlNJR05fVVBcIl0gPSBcInNpZ25fdXBcIjtcclxuICAgIEV2ZW50TmFtZVtcIlRJTUlOR19DT01QTEVURVwiXSA9IFwidGltaW5nX2NvbXBsZXRlXCI7XHJcbiAgICBFdmVudE5hbWVbXCJWSUVXX0NBUlRcIl0gPSBcInZpZXdfY2FydFwiO1xyXG4gICAgRXZlbnROYW1lW1wiVklFV19JVEVNXCJdID0gXCJ2aWV3X2l0ZW1cIjtcclxuICAgIEV2ZW50TmFtZVtcIlZJRVdfSVRFTV9MSVNUXCJdID0gXCJ2aWV3X2l0ZW1fbGlzdFwiO1xyXG4gICAgRXZlbnROYW1lW1wiVklFV19QUk9NT1RJT05cIl0gPSBcInZpZXdfcHJvbW90aW9uXCI7XHJcbiAgICBFdmVudE5hbWVbXCJWSUVXX1NFQVJDSF9SRVNVTFRTXCJdID0gXCJ2aWV3X3NlYXJjaF9yZXN1bHRzXCI7XHJcbn0pKEV2ZW50TmFtZSB8fCAoRXZlbnROYW1lID0ge30pKTtcblxuLyoqXHJcbiAqIEBsaWNlbnNlXHJcbiAqIENvcHlyaWdodCAyMDIxIEdvb2dsZSBMTENcclxuICpcclxuICogTGljZW5zZWQgdW5kZXIgdGhlIEFwYWNoZSBMaWNlbnNlLCBWZXJzaW9uIDIuMCAodGhlIFwiTGljZW5zZVwiKTtcclxuICogeW91IG1heSBub3QgdXNlIHRoaXMgZmlsZSBleGNlcHQgaW4gY29tcGxpYW5jZSB3aXRoIHRoZSBMaWNlbnNlLlxyXG4gKiBZb3UgbWF5IG9idGFpbiBhIGNvcHkgb2YgdGhlIExpY2Vuc2UgYXRcclxuICpcclxuICogICBodHRwOi8vd3d3LmFwYWNoZS5vcmcvbGljZW5zZXMvTElDRU5TRS0yLjBcclxuICpcclxuICogVW5sZXNzIHJlcXVpcmVkIGJ5IGFwcGxpY2FibGUgbGF3IG9yIGFncmVlZCB0byBpbiB3cml0aW5nLCBzb2Z0d2FyZVxyXG4gKiBkaXN0cmlidXRlZCB1bmRlciB0aGUgTGljZW5zZSBpcyBkaXN0cmlidXRlZCBvbiBhbiBcIkFTIElTXCIgQkFTSVMsXHJcbiAqIFdJVEhPVVQgV0FSUkFOVElFUyBPUiBDT05ESVRJT05TIE9GIEFOWSBLSU5ELCBlaXRoZXIgZXhwcmVzcyBvciBpbXBsaWVkLlxyXG4gKiBTZWUgdGhlIExpY2Vuc2UgZm9yIHRoZSBzcGVjaWZpYyBsYW5ndWFnZSBnb3Zlcm5pbmcgcGVybWlzc2lvbnMgYW5kXHJcbiAqIGxpbWl0YXRpb25zIHVuZGVyIHRoZSBMaWNlbnNlLlxyXG4gKi9cclxuY29uc3QgZmFjdG9yeSA9IChjb250YWluZXIpID0+IHtcclxuICAgIC8vIERlcGVuZGVuY2llc1xyXG4gICAgY29uc3QgYXBwID0gY29udGFpbmVyLmdldFByb3ZpZGVyKCdhcHAtY29tcGF0JykuZ2V0SW1tZWRpYXRlKCk7XHJcbiAgICBjb25zdCBhbmFseXRpY3NTZXJ2aWNlRXhwID0gY29udGFpbmVyLmdldFByb3ZpZGVyKCdhbmFseXRpY3MnKS5nZXRJbW1lZGlhdGUoKTtcclxuICAgIHJldHVybiBuZXcgQW5hbHl0aWNzU2VydmljZShhcHAsIGFuYWx5dGljc1NlcnZpY2VFeHApO1xyXG59O1xyXG5mdW5jdGlvbiByZWdpc3RlckFuYWx5dGljcygpIHtcclxuICAgIGNvbnN0IG5hbWVzcGFjZUV4cG9ydHMgPSB7XHJcbiAgICAgICAgQW5hbHl0aWNzOiBBbmFseXRpY3NTZXJ2aWNlLFxyXG4gICAgICAgIHNldHRpbmdzOiBzZXR0aW5ncyxcclxuICAgICAgICBpc1N1cHBvcnRlZDogaXNTdXBwb3J0ZWQsXHJcbiAgICAgICAgLy8gV2UgcmVtb3ZlZCB0aGlzIGVudW0gaW4gZXhwIHNvIG5lZWQgdG8gcmUtY3JlYXRlIGl0IGhlcmUgZm9yIGNvbXBhdC5cclxuICAgICAgICBFdmVudE5hbWVcclxuICAgIH07XHJcbiAgICBmaXJlYmFzZS5JTlRFUk5BTC5yZWdpc3RlckNvbXBvbmVudChuZXcgQ29tcG9uZW50KCdhbmFseXRpY3MtY29tcGF0JywgZmFjdG9yeSwgXCJQVUJMSUNcIiAvKiBQVUJMSUMgKi8pXHJcbiAgICAgICAgLnNldFNlcnZpY2VQcm9wcyhuYW1lc3BhY2VFeHBvcnRzKVxyXG4gICAgICAgIC5zZXRNdWx0aXBsZUluc3RhbmNlcyh0cnVlKSk7XHJcbn1cclxucmVnaXN0ZXJBbmFseXRpY3MoKTtcclxuZmlyZWJhc2UucmVnaXN0ZXJWZXJzaW9uKG5hbWUsIHZlcnNpb24pO1xuXG5leHBvcnQgeyByZWdpc3RlckFuYWx5dGljcyB9O1xuLy8jIHNvdXJjZU1hcHBpbmdVUkw9aW5kZXguZXNtMjAxNy5qcy5tYXBcbiJdLCJuYW1lcyI6W10sInNvdXJjZVJvb3QiOiIifQ==\n//# sourceURL=webpack-internal:///./node_modules/@firebase/analytics-compat/dist/esm/index.esm2017.js\n");

/***/ }),

/***/ "./node_modules/@firebase/app-compat/dist/esm/index.esm2017.js":
/*!*********************************************************************!*\
  !*** ./node_modules/@firebase/app-compat/dist/esm/index.esm2017.js ***!
  \*********************************************************************/
/***/ (function(__unused_webpack___webpack_module__, __webpack_exports__, __webpack_require__) {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   \"default\": function() { return /* binding */ firebase; }\n/* harmony export */ });\n/* harmony import */ var _firebase_util__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! @firebase/util */ \"./node_modules/@firebase/util/dist/index.esm2017.js\");\n/* harmony import */ var _firebase_component__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! @firebase/component */ \"./node_modules/@firebase/component/dist/esm/index.esm2017.js\");\n/* harmony import */ var _firebase_app__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! @firebase/app */ \"./node_modules/@firebase/app/dist/esm/index.esm2017.js\");\n/* harmony import */ var _firebase_logger__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! @firebase/logger */ \"./node_modules/@firebase/logger/dist/esm/index.esm2017.js\");\n\n\n\n\n\n\n/**\r\n * @license\r\n * Copyright 2020 Google LLC\r\n *\r\n * Licensed under the Apache License, Version 2.0 (the \"License\");\r\n * you may not use this file except in compliance with the License.\r\n * You may obtain a copy of the License at\r\n *\r\n *   http://www.apache.org/licenses/LICENSE-2.0\r\n *\r\n * Unless required by applicable law or agreed to in writing, software\r\n * distributed under the License is distributed on an \"AS IS\" BASIS,\r\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\r\n * See the License for the specific language governing permissions and\r\n * limitations under the License.\r\n */\r\n/**\r\n * Global context object for a collection of services using\r\n * a shared authentication state.\r\n *\r\n * marked as internal because it references internal types exported from @firebase/app\r\n * @internal\r\n */\r\nclass FirebaseAppImpl {\r\n    constructor(_delegate, firebase) {\r\n        this._delegate = _delegate;\r\n        this.firebase = firebase;\r\n        // add itself to container\r\n        (0,_firebase_app__WEBPACK_IMPORTED_MODULE_2__._addComponent)(_delegate, new _firebase_component__WEBPACK_IMPORTED_MODULE_1__.Component('app-compat', () => this, \"PUBLIC\" /* PUBLIC */));\r\n        this.container = _delegate.container;\r\n    }\r\n    get automaticDataCollectionEnabled() {\r\n        return this._delegate.automaticDataCollectionEnabled;\r\n    }\r\n    set automaticDataCollectionEnabled(val) {\r\n        this._delegate.automaticDataCollectionEnabled = val;\r\n    }\r\n    get name() {\r\n        return this._delegate.name;\r\n    }\r\n    get options() {\r\n        return this._delegate.options;\r\n    }\r\n    delete() {\r\n        return new Promise(resolve => {\r\n            this._delegate.checkDestroyed();\r\n            resolve();\r\n        }).then(() => {\r\n            this.firebase.INTERNAL.removeApp(this.name);\r\n            return (0,_firebase_app__WEBPACK_IMPORTED_MODULE_2__.deleteApp)(this._delegate);\r\n        });\r\n    }\r\n    /**\r\n     * Return a service instance associated with this app (creating it\r\n     * on demand), identified by the passed instanceIdentifier.\r\n     *\r\n     * NOTE: Currently storage and functions are the only ones that are leveraging this\r\n     * functionality. They invoke it by calling:\r\n     *\r\n     * ```javascript\r\n     * firebase.app().storage('STORAGE BUCKET ID')\r\n     * ```\r\n     *\r\n     * The service name is passed to this already\r\n     * @internal\r\n     */\r\n    _getService(name, instanceIdentifier = _firebase_app__WEBPACK_IMPORTED_MODULE_2__._DEFAULT_ENTRY_NAME) {\r\n        var _a;\r\n        this._delegate.checkDestroyed();\r\n        // Initialize instance if InstatiationMode is `EXPLICIT`.\r\n        const provider = this._delegate.container.getProvider(name);\r\n        if (!provider.isInitialized() &&\r\n            ((_a = provider.getComponent()) === null || _a === void 0 ? void 0 : _a.instantiationMode) === \"EXPLICIT\" /* EXPLICIT */) {\r\n            provider.initialize();\r\n        }\r\n        // getImmediate will always succeed because _getService is only called for registered components.\r\n        return provider.getImmediate({\r\n            identifier: instanceIdentifier\r\n        });\r\n    }\r\n    /**\r\n     * Remove a service instance from the cache, so we will create a new instance for this service\r\n     * when people try to get it again.\r\n     *\r\n     * NOTE: currently only firestore uses this functionality to support firestore shutdown.\r\n     *\r\n     * @param name The service name\r\n     * @param instanceIdentifier instance identifier in case multiple instances are allowed\r\n     * @internal\r\n     */\r\n    _removeServiceInstance(name, instanceIdentifier = _firebase_app__WEBPACK_IMPORTED_MODULE_2__._DEFAULT_ENTRY_NAME) {\r\n        this._delegate.container\r\n            // eslint-disable-next-line @typescript-eslint/no-explicit-any\r\n            .getProvider(name)\r\n            .clearInstance(instanceIdentifier);\r\n    }\r\n    /**\r\n     * @param component the component being added to this app's container\r\n     * @internal\r\n     */\r\n    _addComponent(component) {\r\n        (0,_firebase_app__WEBPACK_IMPORTED_MODULE_2__._addComponent)(this._delegate, component);\r\n    }\r\n    _addOrOverwriteComponent(component) {\r\n        (0,_firebase_app__WEBPACK_IMPORTED_MODULE_2__._addOrOverwriteComponent)(this._delegate, component);\r\n    }\r\n    toJSON() {\r\n        return {\r\n            name: this.name,\r\n            automaticDataCollectionEnabled: this.automaticDataCollectionEnabled,\r\n            options: this.options\r\n        };\r\n    }\r\n}\r\n// TODO: investigate why the following needs to be commented out\r\n// Prevent dead-code elimination of these methods w/o invalid property\r\n// copying.\r\n// (FirebaseAppImpl.prototype.name && FirebaseAppImpl.prototype.options) ||\r\n//   FirebaseAppImpl.prototype.delete ||\r\n//   console.log('dc');\n\n/**\r\n * @license\r\n * Copyright 2019 Google LLC\r\n *\r\n * Licensed under the Apache License, Version 2.0 (the \"License\");\r\n * you may not use this file except in compliance with the License.\r\n * You may obtain a copy of the License at\r\n *\r\n *   http://www.apache.org/licenses/LICENSE-2.0\r\n *\r\n * Unless required by applicable law or agreed to in writing, software\r\n * distributed under the License is distributed on an \"AS IS\" BASIS,\r\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\r\n * See the License for the specific language governing permissions and\r\n * limitations under the License.\r\n */\r\nconst ERRORS = {\r\n    [\"no-app\" /* NO_APP */]: \"No Firebase App '{$appName}' has been created - \" +\r\n        'call Firebase App.initializeApp()',\r\n    [\"invalid-app-argument\" /* INVALID_APP_ARGUMENT */]: 'firebase.{$appName}() takes either no argument or a ' +\r\n        'Firebase App instance.'\r\n};\r\nconst ERROR_FACTORY = new _firebase_util__WEBPACK_IMPORTED_MODULE_0__.ErrorFactory('app-compat', 'Firebase', ERRORS);\n\n/**\r\n * @license\r\n * Copyright 2019 Google LLC\r\n *\r\n * Licensed under the Apache License, Version 2.0 (the \"License\");\r\n * you may not use this file except in compliance with the License.\r\n * You may obtain a copy of the License at\r\n *\r\n *   http://www.apache.org/licenses/LICENSE-2.0\r\n *\r\n * Unless required by applicable law or agreed to in writing, software\r\n * distributed under the License is distributed on an \"AS IS\" BASIS,\r\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\r\n * See the License for the specific language governing permissions and\r\n * limitations under the License.\r\n */\r\n/**\r\n * Because auth can't share code with other components, we attach the utility functions\r\n * in an internal namespace to share code.\r\n * This function return a firebase namespace object without\r\n * any utility functions, so it can be shared between the regular firebaseNamespace and\r\n * the lite version.\r\n */\r\nfunction createFirebaseNamespaceCore(firebaseAppImpl) {\r\n    const apps = {};\r\n    // // eslint-disable-next-line @typescript-eslint/no-explicit-any\r\n    // const components = new Map<string, Component<any>>();\r\n    // A namespace is a plain JavaScript Object.\r\n    const namespace = {\r\n        // Hack to prevent Babel from modifying the object returned\r\n        // as the firebase namespace.\r\n        // @ts-ignore\r\n        __esModule: true,\r\n        initializeApp: initializeAppCompat,\r\n        // @ts-ignore\r\n        app,\r\n        registerVersion: _firebase_app__WEBPACK_IMPORTED_MODULE_2__.registerVersion,\r\n        setLogLevel: _firebase_app__WEBPACK_IMPORTED_MODULE_2__.setLogLevel,\r\n        onLog: _firebase_app__WEBPACK_IMPORTED_MODULE_2__.onLog,\r\n        // @ts-ignore\r\n        apps: null,\r\n        SDK_VERSION: _firebase_app__WEBPACK_IMPORTED_MODULE_2__.SDK_VERSION,\r\n        INTERNAL: {\r\n            registerComponent: registerComponentCompat,\r\n            removeApp,\r\n            useAsService,\r\n            modularAPIs: _firebase_app__WEBPACK_IMPORTED_MODULE_2__\r\n        }\r\n    };\r\n    // Inject a circular default export to allow Babel users who were previously\r\n    // using:\r\n    //\r\n    //   import firebase from 'firebase';\r\n    //   which becomes: var firebase = require('firebase').default;\r\n    //\r\n    // instead of\r\n    //\r\n    //   import * as firebase from 'firebase';\r\n    //   which becomes: var firebase = require('firebase');\r\n    // eslint-disable-next-line @typescript-eslint/no-explicit-any\r\n    namespace['default'] = namespace;\r\n    // firebase.apps is a read-only getter.\r\n    Object.defineProperty(namespace, 'apps', {\r\n        get: getApps\r\n    });\r\n    /**\r\n     * Called by App.delete() - but before any services associated with the App\r\n     * are deleted.\r\n     */\r\n    function removeApp(name) {\r\n        delete apps[name];\r\n    }\r\n    /**\r\n     * Get the App object for a given name (or DEFAULT).\r\n     */\r\n    function app(name) {\r\n        name = name || _firebase_app__WEBPACK_IMPORTED_MODULE_2__._DEFAULT_ENTRY_NAME;\r\n        if (!(0,_firebase_util__WEBPACK_IMPORTED_MODULE_0__.contains)(apps, name)) {\r\n            throw ERROR_FACTORY.create(\"no-app\" /* NO_APP */, { appName: name });\r\n        }\r\n        return apps[name];\r\n    }\r\n    // @ts-ignore\r\n    app['App'] = firebaseAppImpl;\r\n    /**\r\n     * Create a new App instance (name must be unique).\r\n     *\r\n     * This function is idempotent. It can be called more than once and return the same instance using the same options and config.\r\n     */\r\n    function initializeAppCompat(options, rawConfig = {}) {\r\n        const app = _firebase_app__WEBPACK_IMPORTED_MODULE_2__.initializeApp(options, rawConfig);\r\n        if ((0,_firebase_util__WEBPACK_IMPORTED_MODULE_0__.contains)(apps, app.name)) {\r\n            return apps[app.name];\r\n        }\r\n        const appCompat = new firebaseAppImpl(app, namespace);\r\n        apps[app.name] = appCompat;\r\n        return appCompat;\r\n    }\r\n    /*\r\n     * Return an array of all the non-deleted FirebaseApps.\r\n     */\r\n    function getApps() {\r\n        // Make a copy so caller cannot mutate the apps list.\r\n        return Object.keys(apps).map(name => apps[name]);\r\n    }\r\n    function registerComponentCompat(component) {\r\n        const componentName = component.name;\r\n        const componentNameWithoutCompat = componentName.replace('-compat', '');\r\n        if (_firebase_app__WEBPACK_IMPORTED_MODULE_2__._registerComponent(component) &&\r\n            component.type === \"PUBLIC\" /* PUBLIC */) {\r\n            // create service namespace for public components\r\n            // The Service namespace is an accessor function ...\r\n            const serviceNamespace = (appArg = app()) => {\r\n                // eslint-disable-next-line @typescript-eslint/no-explicit-any\r\n                if (typeof appArg[componentNameWithoutCompat] !== 'function') {\r\n                    // Invalid argument.\r\n                    // This happens in the following case: firebase.storage('gs:/')\r\n                    throw ERROR_FACTORY.create(\"invalid-app-argument\" /* INVALID_APP_ARGUMENT */, {\r\n                        appName: componentName\r\n                    });\r\n                }\r\n                // Forward service instance lookup to the FirebaseApp.\r\n                // eslint-disable-next-line @typescript-eslint/no-explicit-any\r\n                return appArg[componentNameWithoutCompat]();\r\n            };\r\n            // ... and a container for service-level properties.\r\n            if (component.serviceProps !== undefined) {\r\n                (0,_firebase_util__WEBPACK_IMPORTED_MODULE_0__.deepExtend)(serviceNamespace, component.serviceProps);\r\n            }\r\n            // eslint-disable-next-line @typescript-eslint/no-explicit-any\r\n            namespace[componentNameWithoutCompat] = serviceNamespace;\r\n            // Patch the FirebaseAppImpl prototype\r\n            // eslint-disable-next-line @typescript-eslint/no-explicit-any\r\n            firebaseAppImpl.prototype[componentNameWithoutCompat] =\r\n                // TODO: The eslint disable can be removed and the 'ignoreRestArgs'\r\n                // option added to the no-explicit-any rule when ESlint releases it.\r\n                // eslint-disable-next-line @typescript-eslint/no-explicit-any\r\n                function (...args) {\r\n                    const serviceFxn = this._getService.bind(this, componentName);\r\n                    return serviceFxn.apply(this, component.multipleInstances ? args : []);\r\n                };\r\n        }\r\n        return component.type === \"PUBLIC\" /* PUBLIC */\r\n            ? // eslint-disable-next-line @typescript-eslint/no-explicit-any\r\n                namespace[componentNameWithoutCompat]\r\n            : null;\r\n    }\r\n    // Map the requested service to a registered service name\r\n    // (used to map auth to serverAuth service when needed).\r\n    function useAsService(app, name) {\r\n        if (name === 'serverAuth') {\r\n            return null;\r\n        }\r\n        const useService = name;\r\n        return useService;\r\n    }\r\n    return namespace;\r\n}\n\n/**\r\n * @license\r\n * Copyright 2019 Google LLC\r\n *\r\n * Licensed under the Apache License, Version 2.0 (the \"License\");\r\n * you may not use this file except in compliance with the License.\r\n * You may obtain a copy of the License at\r\n *\r\n *   http://www.apache.org/licenses/LICENSE-2.0\r\n *\r\n * Unless required by applicable law or agreed to in writing, software\r\n * distributed under the License is distributed on an \"AS IS\" BASIS,\r\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\r\n * See the License for the specific language governing permissions and\r\n * limitations under the License.\r\n */\r\n/**\r\n * Return a firebase namespace object.\r\n *\r\n * In production, this will be called exactly once and the result\r\n * assigned to the 'firebase' global.  It may be called multiple times\r\n * in unit tests.\r\n */\r\nfunction createFirebaseNamespace() {\r\n    const namespace = createFirebaseNamespaceCore(FirebaseAppImpl);\r\n    namespace.INTERNAL = Object.assign(Object.assign({}, namespace.INTERNAL), { createFirebaseNamespace,\r\n        extendNamespace,\r\n        createSubscribe: _firebase_util__WEBPACK_IMPORTED_MODULE_0__.createSubscribe,\r\n        ErrorFactory: _firebase_util__WEBPACK_IMPORTED_MODULE_0__.ErrorFactory,\r\n        deepExtend: _firebase_util__WEBPACK_IMPORTED_MODULE_0__.deepExtend });\r\n    /**\r\n     * Patch the top-level firebase namespace with additional properties.\r\n     *\r\n     * firebase.INTERNAL.extendNamespace()\r\n     */\r\n    function extendNamespace(props) {\r\n        (0,_firebase_util__WEBPACK_IMPORTED_MODULE_0__.deepExtend)(namespace, props);\r\n    }\r\n    return namespace;\r\n}\r\nconst firebase$1 = createFirebaseNamespace();\n\n/**\r\n * @license\r\n * Copyright 2019 Google LLC\r\n *\r\n * Licensed under the Apache License, Version 2.0 (the \"License\");\r\n * you may not use this file except in compliance with the License.\r\n * You may obtain a copy of the License at\r\n *\r\n *   http://www.apache.org/licenses/LICENSE-2.0\r\n *\r\n * Unless required by applicable law or agreed to in writing, software\r\n * distributed under the License is distributed on an \"AS IS\" BASIS,\r\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\r\n * See the License for the specific language governing permissions and\r\n * limitations under the License.\r\n */\r\nconst logger = new _firebase_logger__WEBPACK_IMPORTED_MODULE_3__.Logger('@firebase/app-compat');\n\nconst name = \"@firebase/app-compat\";\nconst version = \"0.1.27\";\n\n/**\r\n * @license\r\n * Copyright 2019 Google LLC\r\n *\r\n * Licensed under the Apache License, Version 2.0 (the \"License\");\r\n * you may not use this file except in compliance with the License.\r\n * You may obtain a copy of the License at\r\n *\r\n *   http://www.apache.org/licenses/LICENSE-2.0\r\n *\r\n * Unless required by applicable law or agreed to in writing, software\r\n * distributed under the License is distributed on an \"AS IS\" BASIS,\r\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\r\n * See the License for the specific language governing permissions and\r\n * limitations under the License.\r\n */\r\nfunction registerCoreComponents(variant) {\r\n    // Register `app` package.\r\n    (0,_firebase_app__WEBPACK_IMPORTED_MODULE_2__.registerVersion)(name, version, variant);\r\n}\n\n/**\r\n * @license\r\n * Copyright 2020 Google LLC\r\n *\r\n * Licensed under the Apache License, Version 2.0 (the \"License\");\r\n * you may not use this file except in compliance with the License.\r\n * You may obtain a copy of the License at\r\n *\r\n *   http://www.apache.org/licenses/LICENSE-2.0\r\n *\r\n * Unless required by applicable law or agreed to in writing, software\r\n * distributed under the License is distributed on an \"AS IS\" BASIS,\r\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\r\n * See the License for the specific language governing permissions and\r\n * limitations under the License.\r\n */\r\n// Firebase Lite detection\r\n// eslint-disable-next-line @typescript-eslint/no-explicit-any\r\nif ((0,_firebase_util__WEBPACK_IMPORTED_MODULE_0__.isBrowser)() && self.firebase !== undefined) {\r\n    logger.warn(`\n    Warning: Firebase is already defined in the global scope. Please make sure\n    Firebase library is only loaded once.\n  `);\r\n    // eslint-disable-next-line\r\n    const sdkVersion = self.firebase.SDK_VERSION;\r\n    if (sdkVersion && sdkVersion.indexOf('LITE') >= 0) {\r\n        logger.warn(`\n    Warning: You are trying to load Firebase while using Firebase Performance standalone script.\n    You should load Firebase Performance with this instance of Firebase to avoid loading duplicate code.\n    `);\r\n    }\r\n}\r\nconst firebase = firebase$1;\r\nregisterCoreComponents();\n\n\n//# sourceMappingURL=index.esm2017.js.map\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiLi9ub2RlX21vZHVsZXMvQGZpcmViYXNlL2FwcC1jb21wYXQvZGlzdC9lc20vaW5kZXguZXNtMjAxNy5qcy5qcyIsIm1hcHBpbmdzIjoiOzs7Ozs7OztBQUFnRztBQUNoRDtBQUNIO0FBQzRFO0FBQy9FOztBQUUxQztBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLFFBQVEsNERBQWEsZ0JBQWdCLDBEQUFTO0FBQzlDO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLFNBQVM7QUFDVDtBQUNBLG1CQUFtQix3REFBUztBQUM1QixTQUFTO0FBQ1Q7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsMkNBQTJDLDhEQUFtQjtBQUM5RDtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsU0FBUztBQUNUO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxzREFBc0QsOERBQW1CO0FBQ3pFO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsUUFBUSw0REFBYTtBQUNyQjtBQUNBO0FBQ0EsUUFBUSx1RUFBd0I7QUFDaEM7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FB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QGZpcmViYXNlL2FwcC1jb21wYXQvZGlzdC9lc20vaW5kZXguZXNtMjAxNy5qcz81OWMxIl0sInNvdXJjZXNDb250ZW50IjpbImltcG9ydCB7IEVycm9yRmFjdG9yeSwgY29udGFpbnMsIGRlZXBFeHRlbmQsIGNyZWF0ZVN1YnNjcmliZSwgaXNCcm93c2VyIH0gZnJvbSAnQGZpcmViYXNlL3V0aWwnO1xuaW1wb3J0IHsgQ29tcG9uZW50IH0gZnJvbSAnQGZpcmViYXNlL2NvbXBvbmVudCc7XG5pbXBvcnQgKiBhcyBtb2R1bGFyQVBJcyBmcm9tICdAZmlyZWJhc2UvYXBwJztcbmltcG9ydCB7IF9hZGRDb21wb25lbnQsIGRlbGV0ZUFwcCwgX0RFRkFVTFRfRU5UUllfTkFNRSwgX2FkZE9yT3ZlcndyaXRlQ29tcG9uZW50LCByZWdpc3RlclZlcnNpb24gfSBmcm9tICdAZmlyZWJhc2UvYXBwJztcbmltcG9ydCB7IExvZ2dlciB9IGZyb20gJ0BmaXJlYmFzZS9sb2dnZXInO1xuXG4vKipcclxuICogQGxpY2Vuc2VcclxuICogQ29weXJpZ2h0IDIwMjAgR29vZ2xlIExMQ1xyXG4gKlxyXG4gKiBMaWNlbnNlZCB1bmRlciB0aGUgQXBhY2hlIExpY2Vuc2UsIFZlcnNpb24gMi4wICh0aGUgXCJMaWNlbnNlXCIpO1xyXG4gKiB5b3UgbWF5IG5vdCB1c2UgdGhpcyBmaWxlIGV4Y2VwdCBpbiBjb21wbGlhbmNlIHdpdGggdGhlIExpY2Vuc2UuXHJcbiAqIFlvdSBtYXkgb2J0YWluIGEgY29weSBvZiB0aGUgTGljZW5zZSBhdFxyXG4gKlxyXG4gKiAgIGh0dHA6Ly93d3cuYXBhY2hlLm9yZy9saWNlbnNlcy9MSUNFTlNFLTIuMFxyXG4gKlxyXG4gKiBVbmxlc3MgcmVxdWlyZWQgYnkgYXBwbGljYWJsZSBsYXcgb3IgYWdyZWVkIHRvIGluIHdyaXRpbmcsIHNvZnR3YXJlXHJcbiAqIGRpc3RyaWJ1dGVkIHVuZGVyIHRoZSBMaWNlbnNlIGlzIGRpc3RyaWJ1dGVkIG9uIGFuIFwiQVMgSVNcIiBCQVNJUyxcclxuICogV0lUSE9VVCBXQVJSQU5USUVTIE9SIENPTkRJVElPTlMgT0YgQU5ZIEtJTkQsIGVpdGhlciBleHByZXNzIG9yIGltcGxpZWQuXHJcbiAqIFNlZSB0aGUgTGljZW5zZSBmb3IgdGhlIHNwZWNpZmljIGxhbmd1YWdlIGdvdmVybmluZyBwZXJtaXNzaW9ucyBhbmRcclxuICogbGltaXRhdGlvbnMgdW5kZXIgdGhlIExpY2Vuc2UuXHJcbiAqL1xyXG4vKipcclxuICogR2xvYmFsIGNvbnRleHQgb2JqZWN0IGZvciBhIGNvbGxlY3Rpb24gb2Ygc2VydmljZXMgdXNpbmdcclxuICogYSBzaGFyZWQgYXV0aGVudGljYXRpb24gc3RhdGUuXHJcbiAqXHJcbiAqIG1hcmtlZCBhcyBpbnRlcm5hbCBiZWNhdXNlIGl0IHJlZmVyZW5jZXMgaW50ZXJuYWwgdHlwZXMgZXhwb3J0ZWQgZnJvbSBAZmlyZWJhc2UvYXBwXHJcbiAqIEBpbnRlcm5hbFxyXG4gKi9cclxuY2xhc3MgRmlyZWJhc2VBcHBJbXBsIHtcclxuICAgIGNvbnN0cnVjdG9yKF9kZWxlZ2F0ZSwgZmlyZWJhc2UpIHtcclxuICAgICAgICB0aGlzLl9kZWxlZ2F0ZSA9IF9kZWxlZ2F0ZTtcclxuICAgICAgICB0aGlzLmZpcmViYXNlID0gZmlyZWJhc2U7XHJcbiAgICAgICAgLy8gYWRkIGl0c2VsZiB0byBjb250YWluZXJcclxuICAgICAgICBfYWRkQ29tcG9uZW50KF9kZWxlZ2F0ZSwgbmV3IENvbXBvbmVudCgnYXBwLWNvbXBhdCcsICgpID0+IHRoaXMsIFwiUFVCTElDXCIgLyogUFVCTElDICovKSk7XHJcbiAgICAgICAgdGhpcy5jb250YWluZXIgPSBfZGVsZWdhdGUuY29udGFpbmVyO1xyXG4gICAgfVxyXG4gICAgZ2V0IGF1dG9tYXRpY0RhdGFDb2xsZWN0aW9uRW5hYmxlZCgpIHtcclxuICAgICAgICByZXR1cm4gdGhpcy5fZGVsZWdhdGUuYXV0b21hdGljRGF0YUNvbGxlY3Rpb25FbmFibGVkO1xyXG4gICAgfVxyXG4gICAgc2V0IGF1dG9tYXRpY0RhdGFDb2xsZWN0aW9uRW5hYmxlZCh2YWwpIHtcclxuICAgICAgICB0aGlzLl9kZWxlZ2F0ZS5hdXRvbWF0aWNEYXRhQ29sbGVjdGlvbkVuYWJsZWQgPSB2YWw7XHJcbiAgICB9XHJcbiAgICBnZXQgbmFtZSgpIHtcclxuICAgICAgICByZXR1cm4gdGhpcy5fZGVsZWdhdGUubmFtZTtcclxuICAgIH1cclxuICAgIGdldCBvcHRpb25zKCkge1xyXG4gICAgICAgIHJldHVybiB0aGlzLl9kZWxlZ2F0ZS5vcHRpb25zO1xyXG4gICAgfVxyXG4gICAgZGVsZXRlKCkge1xyXG4gICAgICAgIHJldHVybiBuZXcgUHJvbWlzZShyZXNvbHZlID0+IHtcclxuICAgICAgICAgICAgdGhpcy5fZGVsZWdhdGUuY2hlY2tEZXN0cm95ZWQoKTtcclxuICAgICAgICAgICAgcmVzb2x2ZSgpO1xyXG4gICAgICAgIH0pLnRoZW4oKCkgPT4ge1xyXG4gICAgICAgICAgICB0aGlzLmZpcmViYXNlLklOVEVSTkFMLnJlbW92ZUFwcCh0aGlzLm5hbWUpO1xyXG4gICAgICAgICAgICByZXR1cm4gZGVsZXRlQXBwKHRoaXMuX2RlbGVnYXRlKTtcclxuICAgICAgICB9KTtcclxuICAgIH1cclxuICAgIC8qKlxyXG4gICAgICogUmV0dXJuIGEgc2VydmljZSBpbnN0YW5jZSBhc3NvY2lhdGVkIHdpdGggdGhpcyBhcHAgKGNyZWF0aW5nIGl0XHJcbiAgICAgKiBvbiBkZW1hbmQpLCBpZGVudGlmaWVkIGJ5IHRoZSBwYXNzZWQgaW5zdGFuY2VJZGVudGlmaWVyLlxyXG4gICAgICpcclxuICAgICAqIE5PVEU6IEN1cnJlbnRseSBzdG9yYWdlIGFuZCBmdW5jdGlvbnMgYXJlIHRoZSBvbmx5IG9uZXMgdGhhdCBhcmUgbGV2ZXJhZ2luZyB0aGlzXHJcbiAgICAgKiBmdW5jdGlvbmFsaXR5LiBUaGV5IGludm9rZSBpdCBieSBjYWxsaW5nOlxyXG4gICAgICpcclxuICAgICAqIGBgYGphdmFzY3JpcHRcclxuICAgICAqIGZpcmViYXNlLmFwcCgpLnN0b3JhZ2UoJ1NUT1JBR0UgQlVDS0VUIElEJylcclxuICAgICAqIGBgYFxyXG4gICAgICpcclxuICAgICAqIFRoZSBzZXJ2aWNlIG5hbWUgaXMgcGFzc2VkIHRvIHRoaXMgYWxyZWFkeVxyXG4gICAgICogQGludGVybmFsXHJcbiAgICAgKi9cclxuICAgIF9nZXRTZXJ2aWNlKG5hbWUsIGluc3RhbmNlSWRlbnRpZmllciA9IF9ERUZBVUxUX0VOVFJZX05BTUUpIHtcclxuICAgICAgICB2YXIgX2E7XHJcbiAgICAgICAgdGhpcy5fZGVsZWdhdGUuY2hlY2tEZXN0cm95ZWQoKTtcclxuICAgICAgICAvLyBJbml0aWFsaXplIGluc3RhbmNlIGlmIEluc3RhdGlhdGlvbk1vZGUgaXMgYEVYUExJQ0lUYC5cclxuICAgICAgICBjb25zdCBwcm92aWRlciA9IHRoaXMuX2RlbGVnYXRlLmNvbnRhaW5lci5nZXRQcm92aWRlcihuYW1lKTtcclxuICAgICAgICBpZiAoIXByb3ZpZGVyLmlzSW5pdGlhbGl6ZWQoKSAmJlxyXG4gICAgICAgICAgICAoKF9hID0gcHJvdmlkZXIuZ2V0Q29tcG9uZW50KCkpID09PSBudWxsIHx8IF9hID09PSB2b2lkIDAgPyB2b2lkIDAgOiBfYS5pbnN0YW50aWF0aW9uTW9kZSkgPT09IFwiRVhQTElDSVRcIiAvKiBFWFBMSUNJVCAqLykge1xyXG4gICAgICAgICAgICBwcm92aWRlci5pbml0aWFsaXplKCk7XHJcbiAgICAgICAgfVxyXG4gICAgICAgIC8vIGdldEltbWVkaWF0ZSB3aWxsIGFsd2F5cyBzdWNjZWVkIGJlY2F1c2UgX2dldFNlcnZpY2UgaXMgb25seSBjYWxsZWQgZm9yIHJlZ2lzdGVyZWQgY29tcG9uZW50cy5cclxuICAgICAgICByZXR1cm4gcHJvdmlkZXIuZ2V0SW1tZWRpYXRlKHtcclxuICAgICAgICAgICAgaWRlbnRpZmllcjogaW5zdGFuY2VJZGVudGlmaWVyXHJcbiAgICAgICAgfSk7XHJcbiAgICB9XHJcbiAgICAvKipcclxuICAgICAqIFJlbW92ZSBhIHNlcnZpY2UgaW5zdGFuY2UgZnJvbSB0aGUgY2FjaGUsIHNvIHdlIHdpbGwgY3JlYXRlIGEgbmV3IGluc3RhbmNlIGZvciB0aGlzIHNlcnZpY2VcclxuICAgICAqIHdoZW4gcGVvcGxlIHRyeSB0byBnZXQgaXQgYWdhaW4uXHJcbiAgICAgKlxyXG4gICAgICogTk9URTogY3VycmVudGx5IG9ubHkgZmlyZXN0b3JlIHVzZXMgdGhpcyBmdW5jdGlvbmFsaXR5IHRvIHN1cHBvcnQgZmlyZXN0b3JlIHNodXRkb3duLlxyXG4gICAgICpcclxuICAgICAqIEBwYXJhbSBuYW1lIFRoZSBzZXJ2aWNlIG5hbWVcclxuICAgICAqIEBwYXJhbSBpbnN0YW5jZUlkZW50aWZpZXIgaW5zdGFuY2UgaWRlbnRpZmllciBpbiBjYXNlIG11bHRpcGxlIGluc3RhbmNlcyBhcmUgYWxsb3dlZFxyXG4gICAgICogQGludGVybmFsXHJcbiAgICAgKi9cclxuICAgIF9yZW1vdmVTZXJ2aWNlSW5zdGFuY2UobmFtZSwgaW5zdGFuY2VJZGVudGlmaWVyID0gX0RFRkFVTFRfRU5UUllfTkFNRSkge1xyXG4gICAgICAgIHRoaXMuX2RlbGVnYXRlLmNvbnRhaW5lclxyXG4gICAgICAgICAgICAvLyBlc2xpbnQtZGlzYWJsZS1uZXh0LWxpbmUgQHR5cGVzY3JpcHQtZXNsaW50L25vLWV4cGxpY2l0LWFueVxyXG4gICAgICAgICAgICAuZ2V0UHJvdmlkZXIobmFtZSlcclxuICAgICAgICAgICAgLmNsZWFySW5zdGFuY2UoaW5zdGFuY2VJZGVudGlmaWVyKTtcclxuICAgIH1cclxuICAgIC8qKlxyXG4gICAgICogQHBhcmFtIGNvbXBvbmVudCB0aGUgY29tcG9uZW50IGJlaW5nIGFkZGVkIHRvIHRoaXMgYXBwJ3MgY29udGFpbmVyXHJcbiAgICAgKiBAaW50ZXJuYWxcclxuICAgICAqL1xyXG4gICAgX2FkZENvbXBvbmVudChjb21wb25lbnQpIHtcclxuICAgICAgICBfYWRkQ29tcG9uZW50KHRoaXMuX2RlbGVnYXRlLCBjb21wb25lbnQpO1xyXG4gICAgfVxyXG4gICAgX2FkZE9yT3ZlcndyaXRlQ29tcG9uZW50KGNvbXBvbmVudCkge1xyXG4gICAgICAgIF9hZGRPck92ZXJ3cml0ZUNvbXBvbmVudCh0aGlzLl9kZWxlZ2F0ZSwgY29tcG9uZW50KTtcclxuICAgIH1cclxuICAgIHRvSlNPTigpIHtcclxuICAgICAgICByZXR1cm4ge1xyXG4gICAgICAgICAgICBuYW1lOiB0aGlzLm5hbWUsXHJcbiAgICAgICAgICAgIGF1dG9tYXRpY0RhdGFDb2xsZWN0aW9uRW5hYmxlZDogdGhpcy5hdXRvbWF0aWNEYXRhQ29sbGVjdGlvbkVuYWJsZWQsXHJcbiAgICAgICAgICAgIG9wdGlvbnM6IHRoaXMub3B0aW9uc1xyXG4gICAgICAgIH07XHJcbiAgICB9XHJcbn1cclxuLy8gVE9ETzogaW52ZXN0aWdhdGUgd2h5IHRoZSBmb2xsb3dpbmcgbmVlZHMgdG8gYmUgY29tbWVudGVkIG91dFxyXG4vLyBQcmV2ZW50IGRlYWQtY29kZSBlbGltaW5hdGlvbiBvZiB0aGVzZSBtZXRob2RzIHcvbyBpbnZhbGlkIHByb3BlcnR5XHJcbi8vIGNvcHlpbmcuXHJcbi8vIChGaXJlYmFzZUFwcEltcGwucHJvdG90eXBlLm5hbWUgJiYgRmlyZWJhc2VBcHBJbXBsLnByb3RvdHlwZS5vcHRpb25zKSB8fFxyXG4vLyAgIEZpcmViYXNlQXBwSW1wbC5wcm90b3R5cGUuZGVsZXRlIHx8XHJcbi8vICAgY29uc29sZS5sb2coJ2RjJyk7XG5cbi8qKlxyXG4gKiBAbGljZW5zZVxyXG4gKiBDb3B5cmlnaHQgMjAxOSBHb29nbGUgTExDXHJcbiAqXHJcbiAqIExpY2Vuc2VkIHVuZGVyIHRoZSBBcGFjaGUgTGljZW5zZSwgVmVyc2lvbiAyLjAgKHRoZSBcIkxpY2Vuc2VcIik7XHJcbiAqIHlvdSBtYXkgbm90IHVzZSB0aGlzIGZpbGUgZXhjZXB0IGluIGNvbXBsaWFuY2Ugd2l0aCB0aGUgTGljZW5zZS5cclxuICogWW91IG1heSBvYnRhaW4gYSBjb3B5IG9mIHRoZSBMaWNlbnNlIGF0XHJcbiAqXHJcbiAqICAgaHR0cDovL3d3dy5hcGFjaGUub3JnL2xpY2Vuc2VzL0xJQ0VOU0UtMi4wXHJcbiAqXHJcbiAqIFVubGVzcyByZXF1aXJlZCBieSBhcHBsaWNhYmxlIGxhdyBvciBhZ3JlZWQgdG8gaW4gd3JpdGluZywgc29mdHdhcmVcclxuICogZGlzdHJpYnV0ZWQgdW5kZXIgdGhlIExpY2Vuc2UgaXMgZGlzdHJpYnV0ZWQgb24gYW4gXCJBUyBJU1wiIEJBU0lTLFxyXG4gKiBXSVRIT1VUIFdBUlJBTlRJRVMgT1IgQ09ORElUSU9OUyBPRiBBTlkgS0lORCwgZWl0aGVyIGV4cHJlc3Mgb3IgaW1wbGllZC5cclxuICogU2VlIHRoZSBMaWNlbnNlIGZvciB0aGUgc3BlY2lmaWMgbGFuZ3VhZ2UgZ292ZXJuaW5nIHBlcm1pc3Npb25zIGFuZFxyXG4gKiBsaW1pdGF0aW9ucyB1bmRlciB0aGUgTGljZW5zZS5cclxuICovXHJcbmNvbnN0IEVSUk9SUyA9IHtcclxuICAgIFtcIm5vLWFwcFwiIC8qIE5PX0FQUCAqL106IFwiTm8gRmlyZWJhc2UgQXBwICd7JGFwcE5hbWV9JyBoYXMgYmVlbiBjcmVhdGVkIC0gXCIgK1xyXG4gICAgICAgICdjYWxsIEZpcmViYXNlIEFwcC5pbml0aWFsaXplQXBwKCknLFxyXG4gICAgW1wiaW52YWxpZC1hcHAtYXJndW1lbnRcIiAvKiBJTlZBTElEX0FQUF9BUkdVTUVOVCAqL106ICdmaXJlYmFzZS57JGFwcE5hbWV9KCkgdGFrZXMgZWl0aGVyIG5vIGFyZ3VtZW50IG9yIGEgJyArXHJcbiAgICAgICAgJ0ZpcmViYXNlIEFwcCBpbnN0YW5jZS4nXHJcbn07XHJcbmNvbnN0IEVSUk9SX0ZBQ1RPUlkgPSBuZXcgRXJyb3JGYWN0b3J5KCdhcHAtY29tcGF0JywgJ0ZpcmViYXNlJywgRVJST1JTKTtcblxuLyoqXHJcbiAqIEBsaWNlbnNlXHJcbiAqIENvcHlyaWdodCAyMDE5IEdvb2dsZSBMTENcclxuICpcclxuICogTGljZW5zZWQgdW5kZXIgdGhlIEFwYWNoZSBMaWNlbnNlLCBWZXJzaW9uIDIuMCAodGhlIFwiTGljZW5zZVwiKTtcclxuICogeW91IG1heSBub3QgdXNlIHRoaXMgZmlsZSBleGNlcHQgaW4gY29tcGxpYW5jZSB3aXRoIHRoZSBMaWNlbnNlLlxyXG4gKiBZb3UgbWF5IG9idGFpbiBhIGNvcHkgb2YgdGhlIExpY2Vuc2UgYXRcclxuICpcclxuICogICBodHRwOi8vd3d3LmFwYWNoZS5vcmcvbGljZW5zZXMvTElDRU5TRS0yLjBcclxuICpcclxuICogVW5sZXNzIHJlcXVpcmVkIGJ5IGFwcGxpY2FibGUgbGF3IG9yIGFncmVlZCB0byBpbiB3cml0aW5nLCBzb2Z0d2FyZVxyXG4gKiBkaXN0cmlidXRlZCB1bmRlciB0aGUgTGljZW5zZSBpcyBkaXN0cmlidXRlZCBvbiBhbiBcIkFTIElTXCIgQkFTSVMsXHJcbiAqIFdJVEhPVVQgV0FSUkFOVElFUyBPUiBDT05ESVRJT05TIE9GIEFOWSBLSU5ELCBlaXRoZXIgZXhwcmVzcyBvciBpbXBsaWVkLlxyXG4gKiBTZWUgdGhlIExpY2Vuc2UgZm9yIHRoZSBzcGVjaWZpYyBsYW5ndWFnZSBnb3Zlcm5pbmcgcGVybWlzc2lvbnMgYW5kXHJcbiAqIGxpbWl0YXRpb25zIHVuZGVyIHRoZSBMaWNlbnNlLlxyXG4gKi9cclxuLyoqXHJcbiAqIEJlY2F1c2UgYXV0aCBjYW4ndCBzaGFyZSBjb2RlIHdpdGggb3RoZXIgY29tcG9uZW50cywgd2UgYXR0YWNoIHRoZSB1dGlsaXR5IGZ1bmN0aW9uc1xyXG4gKiBpbiBhbiBpbnRlcm5hbCBuYW1lc3BhY2UgdG8gc2hhcmUgY29kZS5cclxuICogVGhpcyBmdW5jdGlvbiByZXR1cm4gYSBmaXJlYmFzZSBuYW1lc3BhY2Ugb2JqZWN0IHdpdGhvdXRcclxuICogYW55IHV0aWxpdHkgZnVuY3Rpb25zLCBzbyBpdCBjYW4gYmUgc2hhcmVkIGJldHdlZW4gdGhlIHJlZ3VsYXIgZmlyZWJhc2VOYW1lc3BhY2UgYW5kXHJcbiAqIHRoZSBsaXRlIHZlcnNpb24uXHJcbiAqL1xyXG5mdW5jdGlvbiBjcmVhdGVGaXJlYmFzZU5hbWVzcGFjZUNvcmUoZmlyZWJhc2VBcHBJbXBsKSB7XHJcbiAgICBjb25zdCBhcHBzID0ge307XHJcbiAgICAvLyAvLyBlc2xpbnQtZGlzYWJsZS1uZXh0LWxpbmUgQHR5cGVzY3JpcHQtZXNsaW50L25vLWV4cGxpY2l0LWFueVxyXG4gICAgLy8gY29uc3QgY29tcG9uZW50cyA9IG5ldyBNYXA8c3RyaW5nLCBDb21wb25lbnQ8YW55Pj4oKTtcclxuICAgIC8vIEEgbmFtZXNwYWNlIGlzIGEgcGxhaW4gSmF2YVNjcmlwdCBPYmplY3QuXHJcbiAgICBjb25zdCBuYW1lc3BhY2UgPSB7XHJcbiAgICAgICAgLy8gSGFjayB0byBwcmV2ZW50IEJhYmVsIGZyb20gbW9kaWZ5aW5nIHRoZSBvYmplY3QgcmV0dXJuZWRcclxuICAgICAgICAvLyBhcyB0aGUgZmlyZWJhc2UgbmFtZXNwYWNlLlxyXG4gICAgICAgIC8vIEB0cy1pZ25vcmVcclxuICAgICAgICBfX2VzTW9kdWxlOiB0cnVlLFxyXG4gICAgICAgIGluaXRpYWxpemVBcHA6IGluaXRpYWxpemVBcHBDb21wYXQsXHJcbiAgICAgICAgLy8gQHRzLWlnbm9yZVxyXG4gICAgICAgIGFwcCxcclxuICAgICAgICByZWdpc3RlclZlcnNpb246IG1vZHVsYXJBUElzLnJlZ2lzdGVyVmVyc2lvbixcclxuICAgICAgICBzZXRMb2dMZXZlbDogbW9kdWxhckFQSXMuc2V0TG9nTGV2ZWwsXHJcbiAgICAgICAgb25Mb2c6IG1vZHVsYXJBUElzLm9uTG9nLFxyXG4gICAgICAgIC8vIEB0cy1pZ25vcmVcclxuICAgICAgICBhcHBzOiBudWxsLFxyXG4gICAgICAgIFNES19WRVJTSU9OOiBtb2R1bGFyQVBJcy5TREtfVkVSU0lPTixcclxuICAgICAgICBJTlRFUk5BTDoge1xyXG4gICAgICAgICAgICByZWdpc3RlckNvbXBvbmVudDogcmVnaXN0ZXJDb21wb25lbnRDb21wYXQsXHJcbiAgICAgICAgICAgIHJlbW92ZUFwcCxcclxuICAgICAgICAgICAgdXNlQXNTZXJ2aWNlLFxyXG4gICAgICAgICAgICBtb2R1bGFyQVBJc1xyXG4gICAgICAgIH1cclxuICAgIH07XHJcbiAgICAvLyBJbmplY3QgYSBjaXJjdWxhciBkZWZhdWx0IGV4cG9ydCB0byBhbGxvdyBCYWJlbCB1c2VycyB3aG8gd2VyZSBwcmV2aW91c2x5XHJcbiAgICAvLyB1c2luZzpcclxuICAgIC8vXHJcbiAgICAvLyAgIGltcG9ydCBmaXJlYmFzZSBmcm9tICdmaXJlYmFzZSc7XHJcbiAgICAvLyAgIHdoaWNoIGJlY29tZXM6IHZhciBmaXJlYmFzZSA9IHJlcXVpcmUoJ2ZpcmViYXNlJykuZGVmYXVsdDtcclxuICAgIC8vXHJcbiAgICAvLyBpbnN0ZWFkIG9mXHJcbiAgICAvL1xyXG4gICAgLy8gICBpbXBvcnQgKiBhcyBmaXJlYmFzZSBmcm9tICdmaXJlYmFzZSc7XHJcbiAgICAvLyAgIHdoaWNoIGJlY29tZXM6IHZhciBmaXJlYmFzZSA9IHJlcXVpcmUoJ2ZpcmViYXNlJyk7XHJcbiAgICAvLyBlc2xpbnQtZGlzYWJsZS1uZXh0LWxpbmUgQHR5cGVzY3JpcHQtZXNsaW50L25vLWV4cGxpY2l0LWFueVxyXG4gICAgbmFtZXNwYWNlWydkZWZhdWx0J10gPSBuYW1lc3BhY2U7XHJcbiAgICAvLyBmaXJlYmFzZS5hcHBzIGlzIGEgcmVhZC1vbmx5IGdldHRlci5cclxuICAgIE9iamVjdC5kZWZpbmVQcm9wZXJ0eShuYW1lc3BhY2UsICdhcHBzJywge1xyXG4gICAgICAgIGdldDogZ2V0QXBwc1xyXG4gICAgfSk7XHJcbiAgICAvKipcclxuICAgICAqIENhbGxlZCBieSBBcHAuZGVsZXRlKCkgLSBidXQgYmVmb3JlIGFueSBzZXJ2aWNlcyBhc3NvY2lhdGVkIHdpdGggdGhlIEFwcFxyXG4gICAgICogYXJlIGRlbGV0ZWQuXHJcbiAgICAgKi9cclxuICAgIGZ1bmN0aW9uIHJlbW92ZUFwcChuYW1lKSB7XHJcbiAgICAgICAgZGVsZXRlIGFwcHNbbmFtZV07XHJcbiAgICB9XHJcbiAgICAvKipcclxuICAgICAqIEdldCB0aGUgQXBwIG9iamVjdCBmb3IgYSBnaXZlbiBuYW1lIChvciBERUZBVUxUKS5cclxuICAgICAqL1xyXG4gICAgZnVuY3Rpb24gYXBwKG5hbWUpIHtcclxuICAgICAgICBuYW1lID0gbmFtZSB8fCBtb2R1bGFyQVBJcy5fREVGQVVMVF9FTlRSWV9OQU1FO1xyXG4gICAgICAgIGlmICghY29udGFpbnMoYXBwcywgbmFtZSkpIHtcclxuICAgICAgICAgICAgdGhyb3cgRVJST1JfRkFDVE9SWS5jcmVhdGUoXCJuby1hcHBcIiAvKiBOT19BUFAgKi8sIHsgYXBwTmFtZTogbmFtZSB9KTtcclxuICAgICAgICB9XHJcbiAgICAgICAgcmV0dXJuIGFwcHNbbmFtZV07XHJcbiAgICB9XHJcbiAgICAvLyBAdHMtaWdub3JlXHJcbiAgICBhcHBbJ0FwcCddID0gZmlyZWJhc2VBcHBJbXBsO1xyXG4gICAgLyoqXHJcbiAgICAgKiBDcmVhdGUgYSBuZXcgQXBwIGluc3RhbmNlIChuYW1lIG11c3QgYmUgdW5pcXVlKS5cclxuICAgICAqXHJcbiAgICAgKiBUaGlzIGZ1bmN0aW9uIGlzIGlkZW1wb3RlbnQuIEl0IGNhbiBiZSBjYWxsZWQgbW9yZSB0aGFuIG9uY2UgYW5kIHJldHVybiB0aGUgc2FtZSBpbnN0YW5jZSB1c2luZyB0aGUgc2FtZSBvcHRpb25zIGFuZCBjb25maWcuXHJcbiAgICAgKi9cclxuICAgIGZ1bmN0aW9uIGluaXRpYWxpemVBcHBDb21wYXQob3B0aW9ucywgcmF3Q29uZmlnID0ge30pIHtcclxuICAgICAgICBjb25zdCBhcHAgPSBtb2R1bGFyQVBJcy5pbml0aWFsaXplQXBwKG9wdGlvbnMsIHJhd0NvbmZpZyk7XHJcbiAgICAgICAgaWYgKGNvbnRhaW5zKGFwcHMsIGFwcC5uYW1lKSkge1xyXG4gICAgICAgICAgICByZXR1cm4gYXBwc1thcHAubmFtZV07XHJcbiAgICAgICAgfVxyXG4gICAgICAgIGNvbnN0IGFwcENvbXBhdCA9IG5ldyBmaXJlYmFzZUFwcEltcGwoYXBwLCBuYW1lc3BhY2UpO1xyXG4gICAgICAgIGFwcHNbYXBwLm5hbWVdID0gYXBwQ29tcGF0O1xyXG4gICAgICAgIHJldHVybiBhcHBDb21wYXQ7XHJcbiAgICB9XHJcbiAgICAvKlxyXG4gICAgICogUmV0dXJuIGFuIGFycmF5IG9mIGFsbCB0aGUgbm9uLWRlbGV0ZWQgRmlyZWJhc2VBcHBzLlxyXG4gICAgICovXHJcbiAgICBmdW5jdGlvbiBnZXRBcHBzKCkge1xyXG4gICAgICAgIC8vIE1ha2UgYSBjb3B5IHNvIGNhbGxlciBjYW5ub3QgbXV0YXRlIHRoZSBhcHBzIGxpc3QuXHJcbiAgICAgICAgcmV0dXJuIE9iamVjdC5rZXlzKGFwcHMpLm1hcChuYW1lID0+IGFwcHNbbmFtZV0pO1xyXG4gICAgfVxyXG4gICAgZnVuY3Rpb24gcmVnaXN0ZXJDb21wb25lbnRDb21wYXQoY29tcG9uZW50KSB7XHJcbiAgICAgICAgY29uc3QgY29tcG9uZW50TmFtZSA9IGNvbXBvbmVudC5uYW1lO1xyXG4gICAgICAgIGNvbnN0IGNvbXBvbmVudE5hbWVXaXRob3V0Q29tcGF0ID0gY29tcG9uZW50TmFtZS5yZXBsYWNlKCctY29tcGF0JywgJycpO1xyXG4gICAgICAgIGlmIChtb2R1bGFyQVBJcy5fcmVnaXN0ZXJDb21wb25lbnQoY29tcG9uZW50KSAmJlxyXG4gICAgICAgICAgICBjb21wb25lbnQudHlwZSA9PT0gXCJQVUJMSUNcIiAvKiBQVUJMSUMgKi8pIHtcclxuICAgICAgICAgICAgLy8gY3JlYXRlIHNlcnZpY2UgbmFtZXNwYWNlIGZvciBwdWJsaWMgY29tcG9uZW50c1xyXG4gICAgICAgICAgICAvLyBUaGUgU2VydmljZSBuYW1lc3BhY2UgaXMgYW4gYWNjZXNzb3IgZnVuY3Rpb24gLi4uXHJcbiAgICAgICAgICAgIGNvbnN0IHNlcnZpY2VOYW1lc3BhY2UgPSAoYXBwQXJnID0gYXBwKCkpID0+IHtcclxuICAgICAgICAgICAgICAgIC8vIGVzbGludC1kaXNhYmxlLW5leHQtbGluZSBAdHlwZXNjcmlwdC1lc2xpbnQvbm8tZXhwbGljaXQtYW55XHJcbiAgICAgICAgICAgICAgICBpZiAodHlwZW9mIGFwcEFyZ1tjb21wb25lbnROYW1lV2l0aG91dENvbXBhdF0gIT09ICdmdW5jdGlvbicpIHtcclxuICAgICAgICAgICAgICAgICAgICAvLyBJbnZhbGlkIGFyZ3VtZW50LlxyXG4gICAgICAgICAgICAgICAgICAgIC8vIFRoaXMgaGFwcGVucyBpbiB0aGUgZm9sbG93aW5nIGNhc2U6IGZpcmViYXNlLnN0b3JhZ2UoJ2dzOi8nKVxyXG4gICAgICAgICAgICAgICAgICAgIHRocm93IEVSUk9SX0ZBQ1RPUlkuY3JlYXRlKFwiaW52YWxpZC1hcHAtYXJndW1lbnRcIiAvKiBJTlZBTElEX0FQUF9BUkdVTUVOVCAqLywge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICBhcHBOYW1lOiBjb21wb25lbnROYW1lXHJcbiAgICAgICAgICAgICAgICAgICAgfSk7XHJcbiAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICAvLyBGb3J3YXJkIHNlcnZpY2UgaW5zdGFuY2UgbG9va3VwIHRvIHRoZSBGaXJlYmFzZUFwcC5cclxuICAgICAgICAgICAgICAgIC8vIGVzbGludC1kaXNhYmxlLW5leHQtbGluZSBAdHlwZXNjcmlwdC1lc2xpbnQvbm8tZXhwbGljaXQtYW55XHJcbiAgICAgICAgICAgICAgICByZXR1cm4gYXBwQXJnW2NvbXBvbmVudE5hbWVXaXRob3V0Q29tcGF0XSgpO1xyXG4gICAgICAgICAgICB9O1xyXG4gICAgICAgICAgICAvLyAuLi4gYW5kIGEgY29udGFpbmVyIGZvciBzZXJ2aWNlLWxldmVsIHByb3BlcnRpZXMuXHJcbiAgICAgICAgICAgIGlmIChjb21wb25lbnQuc2VydmljZVByb3BzICE9PSB1bmRlZmluZWQpIHtcclxuICAgICAgICAgICAgICAgIGRlZXBFeHRlbmQoc2VydmljZU5hbWVzcGFjZSwgY29tcG9uZW50LnNlcnZpY2VQcm9wcyk7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgLy8gZXNsaW50LWRpc2FibGUtbmV4dC1saW5lIEB0eXBlc2NyaXB0LWVzbGludC9uby1leHBsaWNpdC1hbnlcclxuICAgICAgICAgICAgbmFtZXNwYWNlW2NvbXBvbmVudE5hbWVXaXRob3V0Q29tcGF0XSA9IHNlcnZpY2VOYW1lc3BhY2U7XHJcbiAgICAgICAgICAgIC8vIFBhdGNoIHRoZSBGaXJlYmFzZUFwcEltcGwgcHJvdG90eXBlXHJcbiAgICAgICAgICAgIC8vIGVzbGludC1kaXNhYmxlLW5leHQtbGluZSBAdHlwZXNjcmlwdC1lc2xpbnQvbm8tZXhwbGljaXQtYW55XHJcbiAgICAgICAgICAgIGZpcmViYXNlQXBwSW1wbC5wcm90b3R5cGVbY29tcG9uZW50TmFtZVdpdGhvdXRDb21wYXRdID1cclxuICAgICAgICAgICAgICAgIC8vIFRPRE86IFRoZSBlc2xpbnQgZGlzYWJsZSBjYW4gYmUgcmVtb3ZlZCBhbmQgdGhlICdpZ25vcmVSZXN0QXJncydcclxuICAgICAgICAgICAgICAgIC8vIG9wdGlvbiBhZGRlZCB0byB0aGUgbm8tZXhwbGljaXQtYW55IHJ1bGUgd2hlbiBFU2xpbnQgcmVsZWFzZXMgaXQuXHJcbiAgICAgICAgICAgICAgICAvLyBlc2xpbnQtZGlzYWJsZS1uZXh0LWxpbmUgQHR5cGVzY3JpcHQtZXNsaW50L25vLWV4cGxpY2l0LWFueVxyXG4gICAgICAgICAgICAgICAgZnVuY3Rpb24gKC4uLmFyZ3MpIHtcclxuICAgICAgICAgICAgICAgICAgICBjb25zdCBzZXJ2aWNlRnhuID0gdGhpcy5fZ2V0U2VydmljZS5iaW5kKHRoaXMsIGNvbXBvbmVudE5hbWUpO1xyXG4gICAgICAgICAgICAgICAgICAgIHJldHVybiBzZXJ2aWNlRnhuLmFwcGx5KHRoaXMsIGNvbXBvbmVudC5tdWx0aXBsZUluc3RhbmNlcyA/IGFyZ3MgOiBbXSk7XHJcbiAgICAgICAgICAgICAgICB9O1xyXG4gICAgICAgIH1cclxuICAgICAgICByZXR1cm4gY29tcG9uZW50LnR5cGUgPT09IFwiUFVCTElDXCIgLyogUFVCTElDICovXHJcbiAgICAgICAgICAgID8gLy8gZXNsaW50LWRpc2FibGUtbmV4dC1saW5lIEB0eXBlc2NyaXB0LWVzbGludC9uby1leHBsaWNpdC1hbnlcclxuICAgICAgICAgICAgICAgIG5hbWVzcGFjZVtjb21wb25lbnROYW1lV2l0aG91dENvbXBhdF1cclxuICAgICAgICAgICAgOiBudWxsO1xyXG4gICAgfVxyXG4gICAgLy8gTWFwIHRoZSByZXF1ZXN0ZWQgc2VydmljZSB0byBhIHJlZ2lzdGVyZWQgc2VydmljZSBuYW1lXHJcbiAgICAvLyAodXNlZCB0byBtYXAgYXV0aCB0byBzZXJ2ZXJBdXRoIHNlcnZpY2Ugd2hlbiBuZWVkZWQpLlxyXG4gICAgZnVuY3Rpb24gdXNlQXNTZXJ2aWNlKGFwcCwgbmFtZSkge1xyXG4gICAgICAgIGlmIChuYW1lID09PSAnc2VydmVyQXV0aCcpIHtcclxuICAgICAgICAgICAgcmV0dXJuIG51bGw7XHJcbiAgICAgICAgfVxyXG4gICAgICAgIGNvbnN0IHVzZVNlcnZpY2UgPSBuYW1lO1xyXG4gICAgICAgIHJldHVybiB1c2VTZXJ2aWNlO1xyXG4gICAgfVxyXG4gICAgcmV0dXJuIG5hbWVzcGFjZTtcclxufVxuXG4vKipcclxuICogQGxpY2Vuc2VcclxuICogQ29weXJpZ2h0IDIwMTkgR29vZ2xlIExMQ1xyXG4gKlxyXG4gKiBMaWNlbnNlZCB1bmRlciB0aGUgQXBhY2hlIExpY2Vuc2UsIFZlcnNpb24gMi4wICh0aGUgXCJMaWNlbnNlXCIpO1xyXG4gKiB5b3UgbWF5IG5vdCB1c2UgdGhpcyBmaWxlIGV4Y2VwdCBpbiBjb21wbGlhbmNlIHdpdGggdGhlIExpY2Vuc2UuXHJcbiAqIFlvdSBtYXkgb2J0YWluIGEgY29weSBvZiB0aGUgTGljZW5zZSBhdFxyXG4gKlxyXG4gKiAgIGh0dHA6Ly93d3cuYXBhY2hlLm9yZy9saWNlbnNlcy9MSUNFTlNFLTIuMFxyXG4gKlxyXG4gKiBVbmxlc3MgcmVxdWlyZWQgYnkgYXBwbGljYWJsZSBsYXcgb3IgYWdyZWVkIHRvIGluIHdyaXRpbmcsIHNvZnR3YXJlXHJcbiAqIGRpc3RyaWJ1dGVkIHVuZGVyIHRoZSBMaWNlbnNlIGlzIGRpc3RyaWJ1dGVkIG9uIGFuIFwiQVMgSVNcIiBCQVNJUyxcclxuICogV0lUSE9VVCBXQVJSQU5USUVTIE9SIENPTkRJVElPTlMgT0YgQU5ZIEtJTkQsIGVpdGhlciBleHByZXNzIG9yIGltcGxpZWQuXHJcbiAqIFNlZSB0aGUgTGljZW5zZSBmb3IgdGhlIHNwZWNpZmljIGxhbmd1YWdlIGdvdmVybmluZyBwZXJtaXNzaW9ucyBhbmRcclxuICogbGltaXRhdGlvbnMgdW5kZXIgdGhlIExpY2Vuc2UuXHJcbiAqL1xyXG4vKipcclxuICogUmV0dXJuIGEgZmlyZWJhc2UgbmFtZXNwYWNlIG9iamVjdC5cclxuICpcclxuICogSW4gcHJvZHVjdGlvbiwgdGhpcyB3aWxsIGJlIGNhbGxlZCBleGFjdGx5IG9uY2UgYW5kIHRoZSByZXN1bHRcclxuICogYXNzaWduZWQgdG8gdGhlICdmaXJlYmFzZScgZ2xvYmFsLiAgSXQgbWF5IGJlIGNhbGxlZCBtdWx0aXBsZSB0aW1lc1xyXG4gKiBpbiB1bml0IHRlc3RzLlxyXG4gKi9cclxuZnVuY3Rpb24gY3JlYXRlRmlyZWJhc2VOYW1lc3BhY2UoKSB7XHJcbiAgICBjb25zdCBuYW1lc3BhY2UgPSBjcmVhdGVGaXJlYmFzZU5hbWVzcGFjZUNvcmUoRmlyZWJhc2VBcHBJbXBsKTtcclxuICAgIG5hbWVzcGFjZS5JTlRFUk5BTCA9IE9iamVjdC5hc3NpZ24oT2JqZWN0LmFzc2lnbih7fSwgbmFtZXNwYWNlLklOVEVSTkFMKSwgeyBjcmVhdGVGaXJlYmFzZU5hbWVzcGFjZSxcclxuICAgICAgICBleHRlbmROYW1lc3BhY2UsXHJcbiAgICAgICAgY3JlYXRlU3Vic2NyaWJlLFxyXG4gICAgICAgIEVycm9yRmFjdG9yeSxcclxuICAgICAgICBkZWVwRXh0ZW5kIH0pO1xyXG4gICAgLyoqXHJcbiAgICAgKiBQYXRjaCB0aGUgdG9wLWxldmVsIGZpcmViYXNlIG5hbWVzcGFjZSB3aXRoIGFkZGl0aW9uYWwgcHJvcGVydGllcy5cclxuICAgICAqXHJcbiAgICAgKiBmaXJlYmFzZS5JTlRFUk5BTC5leHRlbmROYW1lc3BhY2UoKVxyXG4gICAgICovXHJcbiAgICBmdW5jdGlvbiBleHRlbmROYW1lc3BhY2UocHJvcHMpIHtcclxuICAgICAgICBkZWVwRXh0ZW5kKG5hbWVzcGFjZSwgcHJvcHMpO1xyXG4gICAgfVxyXG4gICAgcmV0dXJuIG5hbWVzcGFjZTtcclxufVxyXG5jb25zdCBmaXJlYmFzZSQxID0gY3JlYXRlRmlyZWJhc2VOYW1lc3BhY2UoKTtcblxuLyoqXHJcbiAqIEBsaWNlbnNlXHJcbiAqIENvcHlyaWdodCAyMDE5IEdvb2dsZSBMTENcclxuICpcclxuICogTGljZW5zZWQgdW5kZXIgdGhlIEFwYWNoZSBMaWNlbnNlLCBWZXJzaW9uIDIuMCAodGhlIFwiTGljZW5zZVwiKTtcclxuICogeW91IG1heSBub3QgdXNlIHRoaXMgZmlsZSBleGNlcHQgaW4gY29tcGxpYW5jZSB3aXRoIHRoZSBMaWNlbnNlLlxyXG4gKiBZb3UgbWF5IG9idGFpbiBhIGNvcHkgb2YgdGhlIExpY2Vuc2UgYXRcclxuICpcclxuICogICBodHRwOi8vd3d3LmFwYWNoZS5vcmcvbGljZW5zZXMvTElDRU5TRS0yLjBcclxuICpcclxuICogVW5sZXNzIHJlcXVpcmVkIGJ5IGFwcGxpY2FibGUgbGF3IG9yIGFncmVlZCB0byBpbiB3cml0aW5nLCBzb2Z0d2FyZVxyXG4gKiBkaXN0cmlidXRlZCB1bmRlciB0aGUgTGljZW5zZSBpcyBkaXN0cmlidXRlZCBvbiBhbiBcIkFTIElTXCIgQkFTSVMsXHJcbiAqIFdJVEhPVVQgV0FSUkFOVElFUyBPUiBDT05ESVRJT05TIE9GIEFOWSBLSU5ELCBlaXRoZXIgZXhwcmVzcyBvciBpbXBsaWVkLlxyXG4gKiBTZWUgdGhlIExpY2Vuc2UgZm9yIHRoZSBzcGVjaWZpYyBsYW5ndWFnZSBnb3Zlcm5pbmcgcGVybWlzc2lvbnMgYW5kXHJcbiAqIGxpbWl0YXRpb25zIHVuZGVyIHRoZSBMaWNlbnNlLlxyXG4gKi9cclxuY29uc3QgbG9nZ2VyID0gbmV3IExvZ2dlcignQGZpcmViYXNlL2FwcC1jb21wYXQnKTtcblxuY29uc3QgbmFtZSA9IFwiQGZpcmViYXNlL2FwcC1jb21wYXRcIjtcbmNvbnN0IHZlcnNpb24gPSBcIjAuMS4yN1wiO1xuXG4vKipcclxuICogQGxpY2Vuc2VcclxuICogQ29weXJpZ2h0IDIwMTkgR29vZ2xlIExMQ1xyXG4gKlxyXG4gKiBMaWNlbnNlZCB1bmRlciB0aGUgQXBhY2hlIExpY2Vuc2UsIFZlcnNpb24gMi4wICh0aGUgXCJMaWNlbnNlXCIpO1xyXG4gKiB5b3UgbWF5IG5vdCB1c2UgdGhpcyBmaWxlIGV4Y2VwdCBpbiBjb21wbGlhbmNlIHdpdGggdGhlIExpY2Vuc2UuXHJcbiAqIFlvdSBtYXkgb2J0YWluIGEgY29weSBvZiB0aGUgTGljZW5zZSBhdFxyXG4gKlxyXG4gKiAgIGh0dHA6Ly93d3cuYXBhY2hlLm9yZy9saWNlbnNlcy9MSUNFTlNFLTIuMFxyXG4gKlxyXG4gKiBVbmxlc3MgcmVxdWlyZWQgYnkgYXBwbGljYWJsZSBsYXcgb3IgYWdyZWVkIHRvIGluIHdyaXRpbmcsIHNvZnR3YXJlXHJcbiAqIGRpc3RyaWJ1dGVkIHVuZGVyIHRoZSBMaWNlbnNlIGlzIGRpc3RyaWJ1dGVkIG9uIGFuIFwiQVMgSVNcIiBCQVNJUyxcclxuICogV0lUSE9VVCBXQVJSQU5USUVTIE9SIENPTkRJVElPTlMgT0YgQU5ZIEtJTkQsIGVpdGhlciBleHByZXNzIG9yIGltcGxpZWQuXHJcbiAqIFNlZSB0aGUgTGljZW5zZSBmb3IgdGhlIHNwZWNpZmljIGxhbmd1YWdlIGdvdmVybmluZyBwZXJtaXNzaW9ucyBhbmRcclxuICogbGltaXRhdGlvbnMgdW5kZXIgdGhlIExpY2Vuc2UuXHJcbiAqL1xyXG5mdW5jdGlvbiByZWdpc3RlckNvcmVDb21wb25lbnRzKHZhcmlhbnQpIHtcclxuICAgIC8vIFJlZ2lzdGVyIGBhcHBgIHBhY2thZ2UuXHJcbiAgICByZWdpc3RlclZlcnNpb24obmFtZSwgdmVyc2lvbiwgdmFyaWFudCk7XHJcbn1cblxuLyoqXHJcbiAqIEBsaWNlbnNlXHJcbiAqIENvcHlyaWdodCAyMDIwIEdvb2dsZSBMTENcclxuICpcclxuICogTGljZW5zZWQgdW5kZXIgdGhlIEFwYWNoZSBMaWNlbnNlLCBWZXJzaW9uIDIuMCAodGhlIFwiTGljZW5zZVwiKTtcclxuICogeW91IG1heSBub3QgdXNlIHRoaXMgZmlsZSBleGNlcHQgaW4gY29tcGxpYW5jZSB3aXRoIHRoZSBMaWNlbnNlLlxyXG4gKiBZb3UgbWF5IG9idGFpbiBhIGNvcHkgb2YgdGhlIExpY2Vuc2UgYXRcclxuICpcclxuICogICBodHRwOi8vd3d3LmFwYWNoZS5vcmcvbGljZW5zZXMvTElDRU5TRS0yLjBcclxuICpcclxuICogVW5sZXNzIHJlcXVpcmVkIGJ5IGFwcGxpY2FibGUgbGF3IG9yIGFncmVlZCB0byBpbiB3cml0aW5nLCBzb2Z0d2FyZVxyXG4gKiBkaXN0cmlidXRlZCB1bmRlciB0aGUgTGljZW5zZSBpcyBkaXN0cmlidXRlZCBvbiBhbiBcIkFTIElTXCIgQkFTSVMsXHJcbiAqIFdJVEhPVVQgV0FSUkFOVElFUyBPUiBDT05ESVRJT05TIE9GIEFOWSBLSU5ELCBlaXRoZXIgZXhwcmVzcyBvciBpbXBsaWVkLlxyXG4gKiBTZWUgdGhlIExpY2Vuc2UgZm9yIHRoZSBzcGVjaWZpYyBsYW5ndWFnZSBnb3Zlcm5pbmcgcGVybWlzc2lvbnMgYW5kXHJcbiAqIGxpbWl0YXRpb25zIHVuZGVyIHRoZSBMaWNlbnNlLlxyXG4gKi9cclxuLy8gRmlyZWJhc2UgTGl0ZSBkZXRlY3Rpb25cclxuLy8gZXNsaW50LWRpc2FibGUtbmV4dC1saW5lIEB0eXBlc2NyaXB0LWVzbGludC9uby1leHBsaWNpdC1hbnlcclxuaWYgKGlzQnJvd3NlcigpICYmIHNlbGYuZmlyZWJhc2UgIT09IHVuZGVmaW5lZCkge1xyXG4gICAgbG9nZ2VyLndhcm4oYFxuICAgIFdhcm5pbmc6IEZpcmViYXNlIGlzIGFscmVhZHkgZGVmaW5lZCBpbiB0aGUgZ2xvYmFsIHNjb3BlLiBQbGVhc2UgbWFrZSBzdXJlXG4gICAgRmlyZWJhc2UgbGlicmFyeSBpcyBvbmx5IGxvYWRlZCBvbmNlLlxuICBgKTtcclxuICAgIC8vIGVzbGludC1kaXNhYmxlLW5leHQtbGluZVxyXG4gICAgY29uc3Qgc2RrVmVyc2lvbiA9IHNlbGYuZmlyZWJhc2UuU0RLX1ZFUlNJT047XHJcbiAgICBpZiAoc2RrVmVyc2lvbiAmJiBzZGtWZXJzaW9uLmluZGV4T2YoJ0xJVEUnKSA+PSAwKSB7XHJcbiAgICAgICAgbG9nZ2VyLndhcm4oYFxuICAgIFdhcm5pbmc6IFlvdSBhcmUgdHJ5aW5nIHRvIGxvYWQgRmlyZWJhc2Ugd2hpbGUgdXNpbmcgRmlyZWJhc2UgUGVyZm9ybWFuY2Ugc3RhbmRhbG9uZSBzY3JpcHQuXG4gICAgWW91IHNob3VsZCBsb2FkIEZpcmViYXNlIFBlcmZvcm1hbmNlIHdpdGggdGhpcyBpbnN0YW5jZSBvZiBGaXJlYmFzZSB0byBhdm9pZCBsb2FkaW5nIGR1cGxpY2F0ZSBjb2RlLlxuICAgIGApO1xyXG4gICAgfVxyXG59XHJcbmNvbnN0IGZpcmViYXNlID0gZmlyZWJhc2UkMTtcclxucmVnaXN0ZXJDb3JlQ29tcG9uZW50cygpO1xuXG5leHBvcnQgeyBmaXJlYmFzZSBhcyBkZWZhdWx0IH07XG4vLyMgc291cmNlTWFwcGluZ1VSTD1pbmRleC5lc20yMDE3LmpzLm1hcFxuIl0sIm5hbWVzIjpbXSwic291cmNlUm9vdCI6IiJ9\n//# sourceURL=webpack-internal:///./node_modules/@firebase/app-compat/dist/esm/index.esm2017.js\n");

/***/ })

});